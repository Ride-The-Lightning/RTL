"use strict";(self.webpackChunkRTLApp=self.webpackChunkRTLApp||[]).push([[219],{2219:(om,ft,h)=>{h.r(ft),h.d(ft,{CLModule:()=>im});var u=h(6019),C=h(7292),Qt=h(7362),t=h(3668),p=h(2438),P=h(9009);function Yt(n,a){1&n&&t._UZ(0,"mat-progress-bar",3)}let gt=(()=>{class n{constructor(e){this.router=e,this.loading=!1,this.router.events.subscribe(i=>{switch(!0){case i instanceof C.OD:this.loading=!0;break;case i instanceof C.m2:case i instanceof C.gk:case i instanceof C.Q3:this.loading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-root"]],decls:4,vars:1,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch",1,"inner-sidenav-content"],["color","primary","mode","indeterminate",4,"ngIf"],["outlet","outlet"],["color","primary","mode","indeterminate"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Yt,1,0,"mat-progress-bar",1),t._UZ(2,"router-outlet",null,2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[p.xw,p.yH,p.Wh,u.O5,C.lC,P.pW],styles:[""],data:{animation:[Qt.g]}}),n})();var d=h(7396),_=h(5022),at=h(1818),Ct=h(6424),x=h(9156),s=h(4798),f=h(7634),q=h(507),b=h(7852),H=h(6309),R=h(4234),k=h(3868),ot=h(6167),Z=h(888),ut=h(3530),F=h(8866),O=h(86),pt=h(9112);const xt=function(n){return{backgroundColor:n}};function Bt(n,a){if(1&n&&t._UZ(0,"span",6),2&n){const e=t.oxw();t.Q6J("ngStyle",t.VKq(1,xt,"#"+(null==e.information?null:e.information.color)))}}function Ht(n,a){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"h4",1),t._uU(2,"Color"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"span",7),t._uU(5),t.ALo(6,"uppercase"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngStyle",t.VKq(4,xt,"#"+(null==e.information?null:e.information.color))),t.xp6(1),t.hij(" ",t.lcZ(6,2,null==e.information?null:e.information.color)," ")}}function Vt(n,a){if(1&n&&(t.TgZ(0,"span",2),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}let yt=(()=>{class n{constructor(e){this.commonService=e,this.chains=[""]}ngOnChanges(){this.information&&this.information.chains&&this.information.chains.length>0&&(this.chains=[""],this.information.chains.forEach(e=>{this.chains.push(this.commonService.titleCase(e.chain)+" "+this.commonService.titleCase(e.network))}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-node-info"]],inputs:{information:"information",showColorFieldSeparately:"showColorFieldSeparately"},features:[t.TTD],decls:19,vars:6,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],[1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["class","dashboard-node-dot dot",3,"ngStyle",4,"ngIf"],[4,"ngIf"],["class","overflow-wrap dashboard-info-value",4,"ngFor","ngForOf"],[1,"dashboard-node-dot","dot",3,"ngStyle"],[1,"dashboard-node-square",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"h4",1),t._uU(3,"Alias"),t.qZA(),t.TgZ(4,"div",2),t._uU(5),t.YNc(6,Bt,1,3,"span",3),t.qZA(),t.qZA(),t.YNc(7,Ht,7,6,"div",4),t.TgZ(8,"div"),t.TgZ(9,"h4",1),t._uU(10,"CLT & API Versions"),t.qZA(),t.TgZ(11,"div",2),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"div"),t.TgZ(14,"h4",1),t._uU(15,"Implementation & Chain"),t.qZA(),t.TgZ(16,"span",2),t._uU(17),t.qZA(),t.YNc(18,Vt,2,1,"span",5),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij(" ",null==i.information?null:i.information.alias," "),t.xp6(1),t.Q6J("ngIf",!i.showColorFieldSeparately),t.xp6(1),t.Q6J("ngIf",i.showColorFieldSeparately),t.xp6(5),t.Oqu((null==i.information?null:i.information.version)+" & v"+(null==i.information?null:i.information.api_version)),t.xp6(5),t.Oqu((null==i.information?null:i.information.lnImplementation)+" "),t.xp6(1),t.Q6J("ngForOf",i.chains))},directives:[p.xw,p.yH,p.Wh,u.O5,u.sg,u.PC,F.Zl],pipes:[u.gd],styles:[""]}),n})();function zt(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"h4",3),t._uU(3,"Lightning"),t.qZA(),t.TgZ(4,"div",4),t._uU(5),t.ALo(6,"number"),t.qZA(),t._UZ(7,"mat-progress-bar",5),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"h4",3),t._uU(10,"On-chain"),t.qZA(),t.TgZ(11,"div",4),t._uU(12),t.ALo(13,"number"),t.qZA(),t._UZ(14,"mat-progress-bar",5),t.qZA(),t.TgZ(15,"div"),t.TgZ(16,"h4",3),t._uU(17,"Total"),t.qZA(),t.TgZ(18,"div",4),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(5),t.hij("",t.lcZ(6,5,e.balances.lightning)," Sats"),t.xp6(2),t.s9C("value",e.balances.lightning/e.balances.total*100),t.xp6(5),t.hij("",t.lcZ(13,7,e.balances.onchain)," Sats"),t.xp6(2),t.s9C("value",e.balances.onchain/e.balances.total*100),t.xp6(5),t.hij("",t.lcZ(20,9,e.balances.total)," Sats")}}function Xt(n,a){if(1&n&&(t.TgZ(0,"div",6),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let Gt=(()=>{class n{constructor(){this.balances={onchain:0,lightning:0,total:0}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-balances-info"]],inputs:{balances:"balances",errorMessage:"errorMessage"},decls:3,vars:2,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["mode","determinate",1,"dashboard-progress-bar",3,"value"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,zt,21,11,"div",0),t.YNc(1,Xt,3,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.yH,p.Wh,P.pW],pipes:[u.JJ],styles:[""]}),n})();var g=h(8167),Q=h(7444),X=h(5694),Y=h(7706);function Wt(n,a){if(1&n&&(t.TgZ(0,"div",19),t.TgZ(1,"span",20),t._uU(2),t.ALo(3,"slice"),t.qZA(),t.TgZ(4,"div",6),t.TgZ(5,"mat-hint",21),t.TgZ(6,"strong",8),t._uU(7,"Local:"),t.qZA(),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"mat-hint",22),t._UZ(11,"fa-icon",23),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"mat-hint",24),t.TgZ(15,"strong",8),t._uU(16,"Remote:"),t.qZA(),t._uU(17),t.ALo(18,"number"),t.qZA(),t.qZA(),t._UZ(19,"mat-progress-bar",25),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(3);t.xp6(1),t.s9C("matTooltip",e.alias||e.id),t.s9C("matTooltipDisabled",(e.alias||e.id).length<26),t.xp6(1),t.AsE("",t.Dn7(3,9,e.alias||e.id,0,24),"",(e.alias||e.id).length>25?"...":"",""),t.xp6(6),t.hij("",t.xi3(9,13,e.msatoshi_to_us/1e3||0,"1.0-0")," Sats"),t.xp6(3),t.Q6J("icon",i.faBalanceScale),t.xp6(1),t.hij(" (",t.lcZ(13,16,e.balancedness||0),") "),t.xp6(5),t.hij("",t.xi3(18,18,e.msatoshi_to_them/1e3||0,"1.0-0")," Sats"),t.xp6(2),t.s9C("value",e.msatoshi_to_us&&e.msatoshi_to_us>0?+e.msatoshi_to_us/(+e.msatoshi_to_us+ +e.msatoshi_to_them)*100:0)}}function Kt(n,a){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,Wt,20,21,"div",18),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.activeChannels)}}function $t(n,a){if(1&n&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"span",5),t._uU(3,"Total Capacity"),t.qZA(),t.TgZ(4,"div",6),t.TgZ(5,"mat-hint",7),t.TgZ(6,"strong",8),t._uU(7,"Local:"),t.qZA(),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"mat-hint",9),t._UZ(11,"fa-icon",10),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"mat-hint",11),t.TgZ(15,"strong",8),t._uU(16,"Remote:"),t.qZA(),t._uU(17),t.ALo(18,"number"),t.qZA(),t.qZA(),t._UZ(19,"mat-progress-bar",12),t.qZA(),t.TgZ(20,"div",13),t._UZ(21,"mat-divider",14),t.qZA(),t.TgZ(22,"div",15),t.YNc(23,Kt,2,1,"div",16),t.qZA(),t.qZA()),2&n){const e=t.oxw(),i=t.MAs(2);t.xp6(8),t.hij("",t.xi3(9,7,(null==e.channelBalances?null:e.channelBalances.localBalance)||0,"1.0-0")," Sats"),t.xp6(3),t.Q6J("icon",e.faBalanceScale),t.xp6(1),t.hij(" (",t.lcZ(13,10,(null==e.channelBalances?null:e.channelBalances.balancedness)||0),") "),t.xp6(5),t.hij("",t.xi3(18,12,(null==e.channelBalances?null:e.channelBalances.remoteBalance)||0,"1.0-0")," Sats"),t.xp6(2),t.s9C("value",null!=e.channelBalances&&e.channelBalances.localBalance&&(null==e.channelBalances?null:e.channelBalances.localBalance)>0?+(null==e.channelBalances?null:e.channelBalances.localBalance)/(+(null==e.channelBalances?null:e.channelBalances.localBalance)+ +(null==e.channelBalances?null:e.channelBalances.remoteBalance))*100:0),t.xp6(4),t.Q6J("ngIf",e.activeChannels&&e.activeChannels.length>0)("ngIfElse",i)}}function jt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",26),t._uU(1," No channels available. "),t.TgZ(2,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().goToChannels()}),t._uU(3,"Open Channel"),t.qZA(),t.qZA()}}function te(n,a){if(1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let ee=(()=>{class n{constructor(e){this.router=e,this.faBalanceScale=x.DL8,this.faDumbbell=x.FlN,this.sortBy="Balance Score"}goToChannels(){this.router.navigateByUrl("/cl/connections")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-capacity-info"]],inputs:{channelBalances:"channelBalances",activeChannels:"activeChannels",sortBy:"sortBy",errorMessage:"errorMessage"},decls:5,vars:2,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100",4,"ngIf","ngIfElse"],["noChannelBlock",""],["errorBlock",""],["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100"],["fxLayout","column","fxFlex","9","fxLayoutAlign","end start"],[1,"dashboard-capacity-header","this-channel-capacity"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-100"],["fxFlex","40","fxLayoutAlign","start center",1,"font-size-90"],[1,"font-weight-900","mr-5px"],["fxFlex","20","fxLayoutAlign","center center",1,"font-size-90"],["matTooltip","Balance Score",1,"mr-3px",3,"icon"],["fxFlex","40","fxLayoutAlign","end center",1,"font-size-90"],["mode","determinate","color","accent",1,"dashboard-progress-bar","this-channel-bar",3,"value"],["fxLayout","column","fxFlex","3","fxLayoutAlign","end stretch"],[1,"dashboard-divider"],[1,"channels-capacity-scroll",3,"perfectScrollbar"],["fxLayout","column","fxFlex","100",4,"ngIf","ngIfElse"],["fxLayout","column","fxFlex","100"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"dashboard-capacity-header",3,"matTooltip","matTooltipDisabled"],["fxFlex","40","fxLayoutAlign","start center",1,"font-size-90","color-primary"],["fxFlex","20","fxLayoutAlign","center center",1,"font-size-90","color-primary"],["matTooltip","Balance Score",1,"color-primary","mr-3px",3,"icon"],["fxFlex","40","fxLayoutAlign","end center",1,"font-size-90","color-primary"],["mode","determinate",1,"dashboard-progress-bar",3,"value"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between start",1,"mt-1","w-100"],["mat-stroked-button","","color","primary","tabindex","1",3,"click"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,$t,24,15,"div",0),t.YNc(1,jt,4,0,"ng-template",null,1,t.W1O),t.YNc(3,te,3,1,"ng-template",null,2,t.W1O)),2&e){const o=t.MAs(4);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.Wh,p.yH,g.bx,k.BN,Q.gM,P.pW,X.d,Y.$V,u.sg,O.lW],pipes:[u.JJ,u.OU],styles:[".channels-capacity-scroll[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}"]}),n})();function ne(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div"),t.TgZ(3,"h4",4),t._uU(4,"Total"),t.qZA(),t.TgZ(5,"div",5),t._uU(6),t.ALo(7,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",3),t.TgZ(9,"div"),t.TgZ(10,"h4",4),t._uU(11,"Transactions"),t.qZA(),t.TgZ(12,"div",5),t._uU(13),t.ALo(14,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(6),t.hij("",t.lcZ(7,2,(null==e.fees?null:e.fees.feeCollected)/1e3)," Sats"),t.xp6(7),t.Oqu(t.lcZ(14,4,null==e.fees?null:e.fees.totalTxCount))}}function ie(n,a){if(1&n&&(t.TgZ(0,"div",6),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let Tt=(()=>{class n{constructor(){this.totalFees=[{name:"Total",value:0}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-fee-info"]],inputs:{fees:"fees",errorMessage:"errorMessage"},decls:3,vars:2,consts:[["fxLayout","row","fxFlex","100","fxLayoutAlign","start stretch",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","row","fxFlex","100","fxLayoutAlign","start stretch"],["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,ne,15,6,"div",0),t.YNc(1,ie,3,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.yH,p.Wh],pipes:[u.JJ],styles:[""]}),n})();function ae(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div"),t.TgZ(3,"h4",4),t._uU(4,"Active"),t.qZA(),t.TgZ(5,"div",5),t._UZ(6,"span",6),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.TgZ(9,"div"),t.TgZ(10,"h4",4),t._uU(11,"Pending"),t.qZA(),t.TgZ(12,"div",5),t._UZ(13,"span",7),t._uU(14),t.ALo(15,"number"),t.qZA(),t.qZA(),t.TgZ(16,"div"),t.TgZ(17,"h4",4),t._uU(18,"Inactive"),t.qZA(),t.TgZ(19,"div",5),t._UZ(20,"span",8),t._uU(21),t.ALo(22,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",3),t.TgZ(24,"div"),t.TgZ(25,"h4",4),t._uU(26,"Capacity"),t.qZA(),t.TgZ(27,"div",5),t._uU(28),t.ALo(29,"number"),t.qZA(),t.qZA(),t.TgZ(30,"div"),t.TgZ(31,"h4",4),t._uU(32,"Capacity"),t.qZA(),t.TgZ(33,"div",5),t._uU(34),t.ALo(35,"number"),t.qZA(),t.qZA(),t.TgZ(36,"div"),t.TgZ(37,"h4",4),t._uU(38,"Capacity"),t.qZA(),t.TgZ(39,"div",5),t._uU(40),t.ALo(41,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,6,(null==e.channelsStatus||null==e.channelsStatus.active?null:e.channelsStatus.active.channels)||0)),t.xp6(7),t.Oqu(t.lcZ(15,8,(null==e.channelsStatus||null==e.channelsStatus.pending?null:e.channelsStatus.pending.channels)||0)),t.xp6(7),t.Oqu(t.lcZ(22,10,(null==e.channelsStatus||null==e.channelsStatus.inactive?null:e.channelsStatus.inactive.channels)||0)),t.xp6(7),t.hij("",t.lcZ(29,12,(null==e.channelsStatus||null==e.channelsStatus.active?null:e.channelsStatus.active.capacity)||0)," Sats"),t.xp6(6),t.hij("",t.lcZ(35,14,(null==e.channelsStatus||null==e.channelsStatus.pending?null:e.channelsStatus.pending.capacity)||0)," Sats"),t.xp6(6),t.hij("",t.lcZ(41,16,(null==e.channelsStatus||null==e.channelsStatus.inactive?null:e.channelsStatus.inactive.capacity)||0)," Sats")}}function oe(n,a){if(1&n&&(t.TgZ(0,"div",9),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let Zt=(()=>{class n{constructor(){this.channelsStatus={active:{},pending:{},inactive:{}}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-status-info"]],inputs:{channelsStatus:"channelsStatus",errorMessage:"errorMessage"},decls:3,vars:2,consts:[["fxLayout","row","fxFlex","100","fxLayoutAlign","start stretch",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","row","fxFlex","100","fxLayoutAlign","start stretch"],["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],[1,"dot","tiny-dot","green"],[1,"dot","tiny-dot","yellow"],[1,"dot","tiny-dot","grey"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,ae,42,18,"div",0),t.YNc(1,oe,3,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.yH,p.Wh],pipes:[u.JJ],styles:[""]}),n})();function se(n,a){if(1&n&&(t.TgZ(0,"mat-hint",19),t.TgZ(1,"strong",20),t._uU(2,"Capacity: "),t.qZA(),t._uU(3),t.ALo(4,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij("",t.xi3(4,1,e.msatoshi_to_them/1e3||0,"1.0-0")," Sats")}}function le(n,a){if(1&n&&(t.TgZ(0,"mat-hint",19),t.TgZ(1,"strong",20),t._uU(2,"Capacity: "),t.qZA(),t._uU(3),t.ALo(4,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij("",t.xi3(4,1,e.msatoshi_to_us/1e3||0,"1.0-0")," Sats")}}function re(n,a){if(1&n&&t._UZ(0,"mat-progress-bar",21),2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.s9C("value",i.totalLiquidity>0?(+e.msatoshi_to_them/1e3||0)/i.totalLiquidity*100:0)}}function ce(n,a){if(1&n&&t._UZ(0,"mat-progress-bar",21),2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.s9C("value",i.totalLiquidity>0?(+e.msatoshi_to_us/1e3||0)/i.totalLiquidity*100:0)}}function ue(n,a){if(1&n&&(t.TgZ(0,"div",14),t.TgZ(1,"span",15),t._uU(2),t.ALo(3,"slice"),t.qZA(),t.TgZ(4,"div",16),t.YNc(5,se,5,4,"mat-hint",17),t.YNc(6,le,5,4,"mat-hint",17),t.qZA(),t.YNc(7,re,1,1,"mat-progress-bar",18),t.YNc(8,ce,1,1,"mat-progress-bar",18),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(3);t.xp6(1),t.s9C("matTooltip",e.alias||e.id),t.s9C("matTooltipDisabled",(e.alias||e.id).length<26),t.xp6(1),t.AsE("",t.Dn7(3,8,e.alias||e.id,0,24),"",(e.alias||e.id).length>25?"...":"",""),t.xp6(3),t.Q6J("ngIf","In"===i.direction),t.xp6(1),t.Q6J("ngIf","Out"===i.direction),t.xp6(1),t.Q6J("ngIf","In"===i.direction),t.xp6(1),t.Q6J("ngIf","Out"===i.direction)}}function pe(n,a){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,ue,9,12,"div",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.activeChannels)}}const me=function(n,a,e){return{"mb-4":n,"mb-2":a,"mb-1":e}};function de(n,a){if(1&n&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"span",5),t._uU(3,"Total Capacity"),t.qZA(),t.TgZ(4,"mat-hint",6),t._uU(5),t.ALo(6,"number"),t.qZA(),t._UZ(7,"mat-progress-bar",7),t.qZA(),t.TgZ(8,"div",8),t._UZ(9,"mat-divider",9),t.qZA(),t.TgZ(10,"div",10),t.YNc(11,pe,2,1,"div",11),t.qZA(),t.qZA()),2&n){const e=t.oxw(),i=t.MAs(2);t.Q6J("ngClass",t.kEZ(7,me,e.screenSize===e.screenSizeEnum.XS||e.screenSize===e.screenSizeEnum.SM,e.screenSize===e.screenSizeEnum.MD,e.screenSize===e.screenSizeEnum.LG||e.screenSize===e.screenSizeEnum.XL)),t.xp6(5),t.hij("",t.xi3(6,4,e.totalLiquidity,"1.0-0")," Sats"),t.xp6(6),t.Q6J("ngIf",e.activeChannels&&e.activeChannels.length>0)("ngIfElse",i)}}function _e(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).goToChannels()}),t._uU(1,"Open Channel"),t.qZA()}}function he(n,a){if(1&n&&(t.TgZ(0,"div",22),t._uU(1," No channels available. "),t.YNc(2,_e,2,0,"button",23),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf","Out"===e.direction)}}function fe(n,a){if(1&n&&(t.TgZ(0,"div",25),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let ge=(()=>{class n{constructor(e,i){this.router=e,this.commonService=i,this.screenSize="",this.screenSizeEnum=s.cu}ngOnInit(){this.screenSize=this.commonService.getScreenSize()}goToChannels(){this.router.navigateByUrl("/cl/connections")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-liquidity-info"]],inputs:{direction:"direction",totalLiquidity:"totalLiquidity",activeChannels:"activeChannels",errorMessage:"errorMessage"},decls:5,vars:2,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100",3,"ngClass",4,"ngIf","ngIfElse"],["noChannelBlock",""],["errorBlock",""],["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100",3,"ngClass"],["fxLayout","column","fxFlex","9","fxLayoutAlign","end start"],[1,"dashboard-capacity-header","this-channel-capacity"],[1,"font-size-90"],["mode","determinate","color","accent","value","100",1,"dashboard-progress-bar","this-channel-bar"],["fxLayout","column","fxFlex","3","fxLayoutAlign","end stretch"],[1,"dashboard-divider"],["fxLayout","column","fxFlex.gt-sm","88","fxFlex","84","fxLayoutAlign","start start",3,"perfectScrollbar"],["fxLayout","column","fxFlex","100","class","w-100",4,"ngIf","ngIfElse"],["fxLayout","column","fxFlex","100",1,"w-100"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"dashboard-capacity-header",3,"matTooltip","matTooltipDisabled"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-100"],["fxFlex","100","fxLayoutAlign","start center","class","font-size-90 color-primary",4,"ngIf"],["class","dashboard-progress-bar","mode","determinate",3,"value",4,"ngIf"],["fxFlex","100","fxLayoutAlign","start center",1,"font-size-90","color-primary"],[1,"font-weight-900","mr-5px"],["mode","determinate",1,"dashboard-progress-bar",3,"value"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between center",1,"mt-1"],["mat-stroked-button","","color","primary","tabindex","1",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","tabindex","1",3,"click"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,de,12,11,"div",0),t.YNc(1,he,3,1,"ng-template",null,1,t.W1O),t.YNc(3,fe,3,1,"ng-template",null,2,t.W1O)),2&e){const o=t.MAs(4);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.Wh,p.yH,u.mk,F.oO,g.bx,P.pW,X.d,Y.$V,u.sg,Q.gM,O.lW],pipes:[u.JJ,u.OU],styles:[""]}),n})();var N=h(2605),E=h(181),w=h(8977),A=h(2262),r=h(4176),D=h(5304),y=h(664),c=h(9133),M=h(138),V=h(266),G=h(4786),U=h(6400),st=h(9511),B=h(6731);function Ce(n,a){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function xe(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.invoiceError)}}function ye(n,a){if(1&n&&(t.TgZ(0,"div",27),t._UZ(1,"fa-icon",28),t.YNc(2,xe,2,1,"span",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(1),t.Q6J("ngIf",""!==e.invoiceError)}}let Te=(()=>{class n{constructor(e,i,o,l,m,v){this.dialogRef=e,this.data=i,this.store=o,this.decimalPipe=l,this.commonService=m,this.actions=v,this.faExclamationTriangle=x.eHv,this.selNode={},this.description="",this.invoiceValueHint="",this.invoicePaymentReq="",this.information={},this.private=!1,this.expiryStep=100,this.pageSize=s.IV,this.timeUnitEnum=s.Qk,this.timeUnits=s.LO,this.selTimeUnit=s.Qk.SECS,this.invoiceError="",this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x]}ngOnInit(){this.pageSize=this.data.pageSize,this.store.select(f.Jo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.selNode=e}),this.store.select(f.W3).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.information=e}),this.actions.pipe((0,_.R)(this.unSubs[2]),(0,E.h)(e=>e.type===s.sW.UPDATE_API_CALL_STATUS_CL)).subscribe(e=>{e.type===s.sW.UPDATE_API_CALL_STATUS_CL&&"SaveNewInvoice"===e.payload.action&&(e.payload.status===s.Bn.ERROR&&(this.invoiceError=e.payload.message),e.payload.status===s.Bn.COMPLETED&&this.dialogRef.close())})}onAddInvoice(e){this.invoiceError="",this.invoiceValue||(this.invoiceValue=0);let i=this.expiry?this.expiry:3600;this.selTimeUnit!==s.Qk.SECS&&(i=this.commonService.convertTime(this.expiry,this.selTimeUnit,s.Qk.SECS)),this.store.dispatch((0,y.Rd)({payload:{label:"ulbl"+Math.random().toString(36).slice(2)+Date.now(),amount:1e3*this.invoiceValue,description:this.description,expiry:i,private:this.private}}))}resetData(){this.description="",this.invoiceValue=null,this.private=!1,this.expiry=null,this.invoiceValueHint="",this.selTimeUnit=s.Qk.SECS,this.invoiceError=""}onInvoiceValueChange(){this.selNode.fiatConversion&&this.invoiceValue>99&&(this.invoiceValueHint="",this.commonService.convertCurrency(this.invoiceValue,s.NT.SATS,s.NT.OTHER,this.selNode.currencyUnits[2],this.selNode.fiatConversion).pipe((0,_.R)(this.unSubs[3])).subscribe({next:e=>{this.invoiceValueHint="= "+e.symbol+this.decimalPipe.transform(e.OTHER,s.Xz.OTHER)+" "+e.unit},error:e=>{this.invoiceValueHint="Conversion Error: "+e}}))}onTimeUnitChange(e){this.expiry&&this.selTimeUnit!==e.value&&(this.expiry=this.commonService.convertTime(this.expiry,this.selTimeUnit,e.value)),this.selTimeUnit=e.value}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(D.WI),t.Y36(b.yh),t.Y36(u.JJ),t.Y36(R.v),t.Y36(H.eX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-create-invoices"]],decls:37,vars:17,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","8","fxFlex","5","fxLayoutAlign","center","default","","mat-button","",1,"btn-close-x","p-0",3,"mat-dialog-close"],[1,"padding-gap-x-large"],["fxLayout","row wrap","fxLayoutAlign","start space-between","fxFlex","100"],["addInvoiceForm","ngForm"],["fxFlex","100","fxLayoutAlign","start end"],["matInput","","autoFocus","","placeholder","Description","tabindex","2","name","description",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between start","fxFlex","100"],["fxFlex","40"],["matInput","","placeholder","Amount","type","number","tabindex","3","name","invoiceValue",3,"ngModel","step","min","ngModelChange","keyup"],["matSuffix",""],["fxFlex","30"],["matInput","","name","expiry","placeholder","Expiry","type","number","tabindex","4",3,"ngModel","step","min","ngModelChange"],["fxFlex","26"],["tabindex","5","name","timeUnit",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50","fxLayoutAlign","start center",1,"mt-2"],["tabindex","6","color","primary","matTooltip","Include routing hints for private channels","name","private",3,"ngModel","matTooltipPosition","ngModelChange"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxFlex","100","fxLayoutAlign","end center",1,"mt-1"],["mat-stroked-button","","color","primary","tabindex","7","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","8",3,"click"],[3,"value"],["fxFlex","100",1,"alert","alert-danger","mt-1"],[1,"mr-1","alert-icon",3,"icon"],[4,"ngIf"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5,"Create Invoice"),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.TgZ(9,"form",7,8),t.TgZ(11,"mat-form-field",9),t.TgZ(12,"input",10),t.NdJ("ngModelChange",function(m){return i.description=m}),t.qZA(),t.qZA(),t.TgZ(13,"div",11),t.TgZ(14,"mat-form-field",12),t.TgZ(15,"input",13),t.NdJ("ngModelChange",function(m){return i.invoiceValue=m})("keyup",function(){return i.onInvoiceValueChange()}),t.qZA(),t.TgZ(16,"span",14),t._uU(17," Sats "),t.qZA(),t.TgZ(18,"mat-hint"),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"mat-form-field",15),t.TgZ(21,"input",16),t.NdJ("ngModelChange",function(m){return i.expiry=m}),t.qZA(),t.TgZ(22,"span",14),t._uU(23),t.ALo(24,"titlecase"),t.qZA(),t.qZA(),t.TgZ(25,"mat-form-field",17),t.TgZ(26,"mat-select",18),t.NdJ("selectionChange",function(m){return i.onTimeUnitChange(m)}),t.YNc(27,Ce,3,4,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",20),t.TgZ(29,"mat-slide-toggle",21),t.NdJ("ngModelChange",function(m){return i.private=m}),t._uU(30,"Private Routing Hints"),t.qZA(),t.qZA(),t.YNc(31,ye,3,2,"div",22),t.TgZ(32,"div",23),t.TgZ(33,"button",24),t.NdJ("click",function(){return i.resetData()}),t._uU(34,"Clear Field"),t.qZA(),t.TgZ(35,"button",25),t.NdJ("click",function(){t.CHM(o);const m=t.MAs(10);return i.onAddInvoice(m)}),t._uU(36,"Create Invoice"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(6),t.Q6J("mat-dialog-close",!1),t.xp6(6),t.Q6J("ngModel",i.description),t.xp6(3),t.Q6J("ngModel",i.invoiceValue)("step",100)("min",1),t.xp6(4),t.Oqu(i.invoiceValueHint),t.xp6(2),t.Q6J("ngModel",i.expiry)("step",i.selTimeUnit===i.timeUnitEnum.SECS?300:i.selTimeUnit===i.timeUnitEnum.MINS?10:i.selTimeUnit===i.timeUnitEnum.HOURS?2:1)("min",1),t.xp6(2),t.hij(" ",t.lcZ(24,15,i.selTimeUnit)," "),t.xp6(3),t.Q6J("value",i.selTimeUnit),t.xp6(1),t.Q6J("ngForOf",i.timeUnits),t.xp6(2),t.Q6J("ngModel",i.private)("matTooltipPosition","above"),t.xp6(2),t.Q6J("ngIf",""!==i.invoiceError))},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,D.ZT,Z.dn,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,V.h,c.JJ,c.On,c.wV,c.qQ,G.q,g.R9,g.bx,U.gD,u.sg,st.Rr,Q.gM,u.O5,B.ey,k.BN],pipes:[u.rS],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();var Ze=h(586),L=h(4097),K=h(6718);function Ae(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4,5),t.TgZ(2,"mat-form-field",6),t.TgZ(3,"input",7),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().description=o}),t.qZA(),t.qZA(),t.TgZ(4,"mat-form-field",8),t.TgZ(5,"input",9),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().invoiceValue=o})("keyup",function(){return t.CHM(e),t.oxw().onInvoiceValueChange()}),t.qZA(),t.TgZ(6,"span",10),t._uU(7," Sats "),t.qZA(),t.TgZ(8,"mat-hint"),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",11),t.TgZ(11,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetData()}),t._uU(12,"Clear Field"),t.qZA(),t.TgZ(13,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1);return t.oxw().onAddInvoice(o)}),t._uU(14,"Create Invoice"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.description),t.xp6(2),t.Q6J("ngModel",e.invoiceValue)("step",100)("min",1),t.xp6(4),t.Oqu(e.invoiceValueHint)}}function ve(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDeleteExpiredInvoices()}),t._uU(2,"Delete Expired"),t.qZA(),t.TgZ(3,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openCreateInvoiceModal()}),t._uU(4,"Create Invoice"),t.qZA(),t.qZA()}}function Le(n,a){1&n&&t._UZ(0,"mat-progress-bar",45)}function be(n,a){1&n&&(t.TgZ(0,"th",46),t._uU(1," Expiry Date "),t.qZA())}const mt=function(n){return{"mr-0":n}};function Se(n,a){if(1&n&&t._UZ(0,"span",51),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,mt,e.screenSize===e.screenSizeEnum.XS))}}function we(n,a){if(1&n&&t._UZ(0,"span",52),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,mt,e.screenSize===e.screenSizeEnum.XS))}}function qe(n,a){if(1&n&&t._UZ(0,"span",53),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,mt,e.screenSize===e.screenSizeEnum.XS))}}function Fe(n,a){if(1&n&&(t.TgZ(0,"td",47),t.YNc(1,Se,1,3,"span",48),t.YNc(2,we,1,3,"span",49),t.YNc(3,qe,1,3,"span",50),t._uU(4),t.ALo(5,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","paid"===e.status),t.xp6(1),t.Q6J("ngIf","unpaid"===e.status),t.xp6(1),t.Q6J("ngIf","expired"===e.status),t.xp6(1),t.hij(" ",t.xi3(5,4,1e3*e.expires_at,"dd/MMM/YYYY HH:mm")," ")}}function Re(n,a){1&n&&(t.TgZ(0,"th",46),t._uU(1," Date Settled "),t.qZA())}function Oe(n,a){if(1&n&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,1e3*e.paid_at,"dd/MMM/YYYY HH:mm")||"-")}}function Ue(n,a){1&n&&(t.TgZ(0,"th",46),t._uU(1," Description "),t.qZA())}const ke=function(n){return{"max-width":n}};function Ne(n,a){if(1&n&&(t.TgZ(0,"td",47),t.TgZ(1,"div",54),t.TgZ(2,"span",55),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngStyle",t.VKq(2,ke,i.screenSize===i.screenSizeEnum.XS?"10rem":"32rem")),t.xp6(2),t.Oqu(e.description)}}function Ie(n,a){1&n&&(t.TgZ(0,"th",56),t._uU(1," Amount (Sats) "),t.qZA())}function Me(n,a){if(1&n&&(t.TgZ(0,"td",47),t.TgZ(1,"span",57),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.msatoshi/1e3,e.msatoshi<1e3?"1.0-4":"1.0-0"),"")}}function Ee(n,a){1&n&&(t.TgZ(0,"th",56),t._uU(1," Amount Settled (Sats) "),t.qZA())}function Pe(n,a){if(1&n&&(t.TgZ(0,"td",47),t.TgZ(1,"span",57),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.msatoshi_received/1e3,e.msatoshi_received<1e3?"1.0-4":"1.0-0"),"")}}function De(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",58),t.TgZ(1,"div",59),t.TgZ(2,"mat-select",60),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",61),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}const Je=function(n){return{"px-3":n}};function Qe(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",62),t.TgZ(1,"div",63),t.TgZ(2,"mat-select",64),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",61),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onInvoiceClick(l)}),t._uU(5,"View Info"),t.qZA(),t.TgZ(6,"mat-option",61),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onRefreshInvoice(l)}),t._uU(7,"Refresh"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Je,e.screenSize!==e.screenSizeEnum.XS))}}function Ye(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No invoice available."),t.qZA())}function Be(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting invoices..."),t.qZA())}function He(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function Ve(n,a){if(1&n&&(t.TgZ(0,"td",65),t.YNc(1,Ye,2,0,"p",66),t.YNc(2,Be,2,0,"p",66),t.YNc(3,He,2,1,"p",66),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.invoices&&e.invoices.data)||(null==e.invoices||null==e.invoices.data?null:e.invoices.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.invoices&&e.invoices.data)||(null==e.invoices||null==e.invoices.data?null:e.invoices.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.invoices&&e.invoices.data)||(null==e.invoices||null==e.invoices.data?null:e.invoices.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}const ze=function(n){return{"display-none":n}};function Xe(n,a){if(1&n&&t._UZ(0,"tr",67),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,ze,(null==e.invoices?null:e.invoices.data)&&(null==e.invoices||null==e.invoices.data?null:e.invoices.data.length)>0))}}function Ge(n,a){1&n&&t._UZ(0,"tr",68)}function We(n,a){1&n&&t._UZ(0,"tr",69)}const Ke=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},$e=function(){return["no_invoice"]};function je(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.TgZ(1,"div",18),t.TgZ(2,"div",19),t._UZ(3,"fa-icon",20),t.TgZ(4,"span",21),t._uU(5,"Invoices History"),t.qZA(),t.qZA(),t.TgZ(6,"mat-form-field",22),t.TgZ(7,"input",23),t.NdJ("keyup",function(){return t.CHM(e),t.oxw().applyFilter()})("ngModelChange",function(o){return t.CHM(e),t.oxw().selFilter=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",24),t.YNc(9,Le,1,0,"mat-progress-bar",25),t.TgZ(10,"table",26,27),t.ynx(12,28),t.YNc(13,be,2,0,"th",29),t.YNc(14,Fe,6,7,"td",30),t.BQk(),t.ynx(15,31),t.YNc(16,Re,2,0,"th",29),t.YNc(17,Oe,3,4,"td",30),t.BQk(),t.ynx(18,32),t.YNc(19,Ue,2,0,"th",29),t.YNc(20,Ne,4,4,"td",30),t.BQk(),t.ynx(21,33),t.YNc(22,Ie,2,0,"th",34),t.YNc(23,Me,4,4,"td",30),t.BQk(),t.ynx(24,35),t.YNc(25,Ee,2,0,"th",34),t.YNc(26,Pe,4,4,"td",30),t.BQk(),t.ynx(27,36),t.YNc(28,De,6,0,"th",37),t.YNc(29,Qe,8,3,"td",38),t.BQk(),t.ynx(30,39),t.YNc(31,Ve,4,3,"td",40),t.BQk(),t.YNc(32,Xe,1,3,"tr",41),t.YNc(33,Ge,1,0,"tr",42),t.YNc(34,We,1,0,"tr",43),t.qZA(),t.qZA(),t._UZ(35,"mat-paginator",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faHistory),t.xp6(4),t.Q6J("ngModel",e.selFilter),t.xp6(2),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.invoices)("ngClass",t.VKq(12,Ke,""!==e.errorMessage)),t.xp6(22),t.Q6J("matFooterRowDef",t.DdM(14,$e)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS)}}let At=(()=>{class n{constructor(e,i,o,l,m,v,J){this.logger=e,this.store=i,this.decimalPipe=o,this.commonService=l,this.rtlEffects=m,this.datePipe=v,this.actions=J,this.calledFrom="transactions",this.faHistory=x.qO$,this.selNode={},this.newlyAddedInvoiceMemo="",this.newlyAddedInvoiceValue=0,this.description="",this.invoiceValue=null,this.invoiceValueHint="",this.displayedColumns=[],this.invoicePaymentReq="",this.invoiceJSONArr=[],this.information={},this.flgSticky=!1,this.private=!1,this.expiryStep=100,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.selFilter="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["expires_at","msatoshi","actions"]):this.screenSize===s.cu.SM?(this.flgSticky=!1,this.displayedColumns=["expires_at","description","msatoshi","actions"]):this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["expires_at","description","msatoshi","msatoshi_received","actions"]):(this.flgSticky=!0,this.displayedColumns=["expires_at","paid_at","description","msatoshi","msatoshi_received","actions"])}ngOnInit(){this.store.select(f.Jo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.selNode=e}),this.store.select(f.W3).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.information=e}),this.store.select(f.gc).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.invoiceJSONArr=e.listInvoices.invoices||[],this.invoiceJSONArr&&this.invoiceJSONArr.length>0&&this.sort&&this.paginator&&this.loadInvoicesTable(this.invoiceJSONArr),this.logger.info(e)}),this.actions.pipe((0,_.R)(this.unSubs[3]),(0,E.h)(e=>e.type===s.sW.SET_LOOKUP_CL||e.type===s.sW.UPDATE_API_CALL_STATUS_CL)).subscribe(e=>{e.type===s.sW.SET_LOOKUP_CL&&this.invoiceJSONArr&&this.invoiceJSONArr.length>0&&this.sort&&this.paginator&&e.payload&&(this.updateInvoicesData(JSON.parse(JSON.stringify(e.payload))),this.loadInvoicesTable(this.invoiceJSONArr))})}ngAfterViewInit(){this.invoiceJSONArr&&this.invoiceJSONArr.length>0&&this.sort&&this.paginator&&this.loadInvoicesTable(this.invoiceJSONArr)}openCreateInvoiceModal(){this.store.dispatch((0,L.qR)({payload:{data:{pageSize:this.pageSize,component:Te}}}))}onAddInvoice(e){this.invoiceValue||(this.invoiceValue=0);const i=this.expiry?this.expiry:3600;this.newlyAddedInvoiceMemo="ulbl"+Math.random().toString(36).slice(2)+Date.now(),this.newlyAddedInvoiceValue=this.invoiceValue,this.store.dispatch((0,y.Rd)({payload:{label:this.newlyAddedInvoiceMemo,amount:1e3*this.invoiceValue,description:this.description,expiry:i,private:this.private}})),this.resetData()}onDeleteExpiredInvoices(){this.store.dispatch((0,L.c1)({payload:{data:{type:"CONFIRM",titleMessage:"Delete Expired Invoices",noBtnText:"Cancel",yesBtnText:"Delete Invoices"}}})),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[4])).subscribe(e=>{e&&this.store.dispatch((0,y.g6)({payload:null}))})}onInvoiceClick(e){this.store.dispatch((0,L.qR)({payload:{data:{invoice:{msatoshi:e.msatoshi,label:e.label,expires_at:e.expires_at,paid_at:e.paid_at,bolt11:e.bolt11,payment_hash:e.payment_hash,description:e.description,status:e.status,msatoshi_received:e.msatoshi_received},newlyAdded:!1,component:Ze.$}}}))}resetData(){this.description="",this.invoiceValue=null,this.private=!1,this.expiry=null,this.invoiceValueHint=""}applyFilter(){this.invoices.filter=this.selFilter.trim().toLowerCase()}onInvoiceValueChange(){this.selNode.fiatConversion&&this.invoiceValue>99&&(this.invoiceValueHint="",this.commonService.convertCurrency(this.invoiceValue,s.NT.SATS,s.NT.OTHER,this.selNode.currencyUnits[2],this.selNode.fiatConversion).pipe((0,_.R)(this.unSubs[5])).subscribe({next:e=>{this.invoiceValueHint="= "+e.symbol+this.decimalPipe.transform(e.OTHER,s.Xz.OTHER)+" "+e.unit},error:e=>{this.invoiceValueHint="Conversion Error: "+e}}))}onRefreshInvoice(e){this.store.dispatch((0,y.n7)({payload:e.label}))}updateInvoicesData(e){this.invoiceJSONArr=this.invoiceJSONArr.map(i=>i.label===e.label?e:i)}loadInvoicesTable(e){this.invoices=new r.by(e?[...e]:[]),this.invoices.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.invoices.sort=this.sort,this.invoices.filterPredicate=(i,o)=>((i.paid_at?this.datePipe.transform(new Date(1e3*i.paid_at),"dd/MMM/YYYY HH:mm").toLowerCase():"")+(i.expires_at?this.datePipe.transform(new Date(1e3*i.expires_at),"dd/MMM/YYYY HH:mm").toLowerCase():"")+JSON.stringify(i).toLowerCase()).includes(o),this.invoices.paginator=this.paginator,this.applyFilter()}onDownloadCSV(){this.invoices.data&&this.invoices.data.length>0&&this.commonService.downloadFile(this.invoices.data,"Invoices")}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(u.JJ),t.Y36(R.v),t.Y36(K.V),t.Y36(u.uU),t.Y36(H.eX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-lightning-invoices"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},inputs:{calledFrom:"calledFrom"},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Invoices")}])],decls:4,vars:3,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch",1,"padding-gap"],["fxLayout","row wrap","fxLayoutAlign","stretch start","fxFlex","100",4,"ngIf"],["fxLayout","row",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","stretch start","fxFlex","100"],["addInvoiceForm","ngForm"],["fxFlex","100","fxLayoutAlign","space-between stretch"],["matInput","","placeholder","Description","tabindex","2","name","description",3,"ngModel","ngModelChange"],["fxFlex","100","fxLayoutAlign","start end"],["matInput","","placeholder","Amount","name","invoiceValue","type","number","tabindex","3",3,"ngModel","step","min","ngModelChange","keyup"],["matSuffix",""],["fxLayout","row",1,"mt-1"],["mat-stroked-button","","color","primary","tabindex","9","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","10",3,"click"],["fxLayout","row"],["mat-stroked-button","","color","warn","tabindex","7","type","button",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","8",3,"click"],["fxLayout","column","fxLayoutAlign","start stretch"],["fxLayout","column","fxLayoutAlign","start stretch","fxLayout.gt-sm","row wrap",1,"page-sub-title-container","mt-1"],["fxFlex","70","fxLayoutAlign","start start","fxLayoutAlign.gt-sm","start center"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxFlex","30","fxLayoutAlign","start end"],["matInput","","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","fxFlex","100","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","expires_at"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","paid_at"],["matColumnDef","description"],["matColumnDef","msatoshi"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","msatoshi_received"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center",3,"ngClass",4,"matCellDef"],["matColumnDef","no_invoice"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","dot green","matTooltip","Paid","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["class","dot yellow","matTooltip","Unpaid","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["class","dot red","matTooltip","Expired","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["matTooltip","Paid","matTooltipPosition","right",1,"dot","green",3,"ngClass"],["matTooltip","Unpaid","matTooltipPosition","right",1,"dot","yellow",3,"ngClass"],["matTooltip","Expired","matTooltipPosition","right",1,"dot","red",3,"ngClass"],[1,"ellipsis-parent",3,"ngStyle"],[1,"ellipsis-child"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",3,"ngClass"],["fxLayoutAlign","center center",1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","4",1,"mr-0"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ae,15,5,"form",1),t.YNc(2,ve,5,0,"div",2),t.YNc(3,je,36,15,"div",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf","home"===i.calledFrom),t.xp6(1),t.Q6J("ngIf","transactions"===i.calledFrom),t.xp6(1),t.Q6J("ngIf","transactions"===i.calledFrom))},directives:[p.xw,p.yH,p.Wh,u.O5,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,c.JJ,c.On,c.wV,c.qQ,G.q,g.R9,g.bx,O.lW,k.BN,Y.$V,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,Q.gM,u.PC,F.Zl,U.gD,U.$L,B.ey,r.yh,r.Q2,r.XQ,r.Gk],pipes:[u.uU,u.JJ],styles:[".mat-column-description[_ngcontent-%COMP%]{flex:0 0 15%;width:15%}.mat-column-description[_ngcontent-%COMP%]   .ellipsis-parent[_ngcontent-%COMP%]{display:flex}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();var z=h(3453),et=h(5864),lt=h(9859),rt=h(904);const tn=["paymentReq"],en=["offerReq"];function nn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-radio-group",18),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().paymentType=o})("change",function(){return t.CHM(e),t.oxw().onPaymentTypeChange()}),t.TgZ(1,"mat-radio-button",19),t._uU(2,"Invoice"),t.qZA(),t.TgZ(3,"mat-radio-button",20),t._uU(4,"Keysend"),t.qZA(),t.TgZ(5,"mat-radio-button",21),t._uU(6,"Offer"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.paymentType),t.xp6(1),t.s9C("value",e.paymentTypes.INVOICE),t.xp6(2),t.s9C("value",e.paymentTypes.KEYSEND),t.xp6(2),t.s9C("value",e.paymentTypes.OFFER)}}function an(n,a){1&n&&t.GkF(0)}function on(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.paymentError)}}function sn(n,a){if(1&n&&(t.TgZ(0,"div",22),t._UZ(1,"fa-icon",23),t.YNc(2,on,2,1,"span",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(1),t.Q6J("ngIf",""!==e.paymentError)}}function ln(n,a){if(1&n&&(t.TgZ(0,"mat-hint"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.paymentDecodedHint)}}function rn(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment request is required."),t.qZA())}function cn(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.paymentDecodedHint)}}function un(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment amount is required."),t.qZA())}function pn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"input",28,29),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).paymentAmount=o})("change",function(o){return t.CHM(e),t.oxw(2).onAmountChange(o)}),t.qZA(),t.TgZ(3,"mat-hint"),t._uU(4,"It is a zero amount invoice, enter amount to be paid."),t.qZA(),t.YNc(5,un,2,0,"mat-error",24),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.paymentAmount),t.xp6(4),t.Q6J("ngIf",!e.paymentAmount)}}function mn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"textarea",25,26),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().onPaymentRequestEntry(o)})("matTextareaAutosize",function(){return!0}),t.qZA(),t.YNc(3,ln,2,1,"mat-hint",24),t.YNc(4,rn,2,0,"mat-error",24),t.YNc(5,cn,2,1,"mat-error",24),t.qZA(),t.YNc(6,pn,6,2,"mat-form-field",27)}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.paymentRequest),t.xp6(2),t.Q6J("ngIf",i.paymentRequest&&""!==i.paymentDecodedHint),t.xp6(1),t.Q6J("ngIf",!i.paymentRequest),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.decodeError),t.xp6(1),t.Q6J("ngIf",i.zeroAmtInvoice)}}function dn(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Pubkey is required."),t.qZA())}function _n(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Keysend amount is required."),t.qZA())}function hn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"input",30),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().pubkey=o}),t.qZA(),t.YNc(2,dn,2,0,"mat-error",24),t.qZA(),t.TgZ(3,"mat-form-field",1),t.TgZ(4,"input",31,32),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().keysendAmount=o}),t.qZA(),t.YNc(6,_n,2,0,"mat-error",24),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.pubkey),t.xp6(1),t.Q6J("ngIf",!e.pubkey),t.xp6(2),t.Q6J("ngModel",e.keysendAmount),t.xp6(2),t.Q6J("ngIf",!e.keysendAmount)}}function fn(n,a){if(1&n&&(t.TgZ(0,"mat-hint"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.offerDecodedHint)}}function gn(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Offer request is required."),t.qZA())}function Cn(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.offerDecodedHint)}}function xn(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Offer amount is required."),t.qZA())}function yn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"input",36,37),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).offerAmount=o})("change",function(o){return t.CHM(e),t.oxw(2).onAmountChange(o)}),t.qZA(),t.TgZ(3,"mat-hint"),t._uU(4,"It is a zero amount offer, enter amount to be paid."),t.qZA(),t.YNc(5,xn,2,0,"mat-error",24),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.offerAmount),t.xp6(4),t.Q6J("ngIf",!e.offerAmount)}}function Tn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"textarea",33,34),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().onPaymentRequestEntry(o)})("matTextareaAutosize",function(){return!0}),t.qZA(),t.YNc(3,fn,2,1,"mat-hint",24),t.YNc(4,gn,2,0,"mat-error",24),t.YNc(5,Cn,2,1,"mat-error",24),t.qZA(),t.YNc(6,yn,6,2,"mat-form-field",27),t.TgZ(7,"div",1),t.TgZ(8,"mat-checkbox",35),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().flgSaveToDB=o}),t._uU(9,"Save Offer"),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(2),i=t.oxw();t.xp6(1),t.Q6J("ngModel",i.offerRequest),t.xp6(2),t.Q6J("ngIf",i.offerRequest&&""!==i.offerDecodedHint),t.xp6(1),t.Q6J("ngIf",!i.offerRequest),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.decodeError),t.xp6(1),t.Q6J("ngIf",i.zeroAmtOffer),t.xp6(2),t.Q6J("ngModel",i.flgSaveToDB)("matTooltipPosition","above")}}let Zn=(()=>{class n{constructor(e,i,o,l,m,v,J){this.dialogRef=e,this.store=i,this.clEffects=o,this.logger=l,this.commonService=m,this.decimalPipe=v,this.actions=J,this.faExclamationTriangle=x.eHv,this.paymentTypes=s.IX,this.paymentType=s.IX.INVOICE,this.selNode={},this.offerDecoded={},this.offerRequest="",this.offerDecodedHint="",this.offerMemo="",this.zeroAmtOffer=!1,this.offerInvoice=null,this.offerAmount=null,this.flgSaveToDB=!1,this.paymentDecoded={},this.paymentRequest="",this.paymentDecodedHint="",this.zeroAmtInvoice=!1,this.paymentAmount=null,this.pubkey="",this.keysendAmount=null,this.selActiveChannel={},this.activeChannels={},this.feeLimit=null,this.selFeeLimitType=s.Vc[0],this.feeLimitTypes=s.Vc,this.paymentError="",this.isCompatibleVersion=!1,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x,new d.x]}set payReq(e){e&&(this.paymentReq=e)}set offrReq(e){e&&(this.offerReq=e)}ngOnInit(){this.store.select(f.Jo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.selNode=e}),this.store.select(f.W3).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.isCompatibleVersion=this.commonService.isVersionCompatible(e.version,"0.9.0")&&this.commonService.isVersionCompatible(e.api_version,"0.4.0")}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.activeChannels=e.activeChannels,this.logger.info(e)}),this.actions.pipe((0,_.R)(this.unSubs[3]),(0,E.h)(e=>e.type===s.sW.UPDATE_API_CALL_STATUS_CL||e.type===s.sW.SEND_PAYMENT_STATUS_CL||e.type===s.sW.SET_DECODED_PAYMENT_CL||e.type===s.sW.SET_OFFER_INVOICE_CL)).subscribe(e=>{e.type===s.sW.SEND_PAYMENT_STATUS_CL&&this.dialogRef.close(),e.type===s.sW.SET_DECODED_PAYMENT_CL&&(this.paymentType===s.IX.INVOICE?"bolt12 offer"===e.payload.type&&e.payload.offer_id?(this.paymentDecodedHint="ERROR: Select Offer option to pay the bolt12 offer invoice.",this.paymentReq.control.setErrors({decodeError:!0})):(this.paymentDecoded=e.payload,this.setPaymentDecodedDetails()):this.paymentType===s.IX.OFFER&&("bolt11 invoice"===e.payload.type&&e.payload.payment_hash?(this.offerDecodedHint="ERROR: Select Invoice option to pay the bolt11 invoice.",this.offerReq.control.setErrors({decodeError:!0})):(this.offerDecoded=e.payload,this.setOfferDecodedDetails()))),e.type===s.sW.SET_OFFER_INVOICE_CL&&(this.offerInvoice=e.payload,this.sendPayment()),e.type===s.sW.UPDATE_API_CALL_STATUS_CL&&e.payload.status===s.Bn.ERROR&&("SendPayment"===e.payload.action&&(delete this.paymentDecoded.msatoshi,this.paymentError=e.payload.message),"DecodePayment"===e.payload.action&&(this.paymentType===s.IX.INVOICE&&(this.paymentDecodedHint="ERROR: "+e.payload.message,this.paymentReq.control.setErrors({decodeError:!0})),this.paymentType===s.IX.OFFER&&(this.offerDecodedHint="ERROR: "+e.payload.message,this.offerReq.control.setErrors({decodeError:!0}))),"FetchOfferInvoice"===e.payload.action&&this.paymentType===s.IX.OFFER&&(this.paymentError=e.payload.message))})}onSendPayment(){switch(this.paymentType){case s.IX.KEYSEND:if(!this.pubkey||""===this.pubkey.trim()||!this.keysendAmount||this.keysendAmount<=0)return!0;this.keysendPayment();break;case s.IX.INVOICE:if(!this.paymentRequest)return!0;this.paymentDecoded.created_at?this.sendPayment():(this.resetInvoiceDetails(),this.store.dispatch((0,y.is)({payload:{routeParam:this.paymentRequest,fromDialog:!0}})));break;case s.IX.OFFER:if(!this.offerRequest)return!0;this.offerDecoded.offer_id?this.sendPayment():(this.resetOfferDetails(),this.store.dispatch((0,y.is)({payload:{routeParam:this.offerRequest,fromDialog:!0}})))}}keysendPayment(){this.store.dispatch((0,y.oV)({payload:{uiMessage:s.m6.SEND_KEYSEND,paymentType:s.IX.KEYSEND,pubkey:this.pubkey,amount:1e3*this.keysendAmount,fromDialog:!0}}))}sendPayment(){this.paymentType===s.IX.INVOICE?this.store.dispatch((0,y.oV)(this.zeroAmtInvoice?{payload:{uiMessage:s.m6.SEND_PAYMENT,paymentType:s.IX.INVOICE,invoice:this.paymentRequest,amount:1e3*this.paymentAmount,fromDialog:!0}}:{payload:{uiMessage:s.m6.SEND_PAYMENT,paymentType:s.IX.INVOICE,invoice:this.paymentRequest,fromDialog:!0}})):this.paymentType===s.IX.OFFER&&this.store.dispatch(this.offerInvoice?(0,y.oV)({payload:{uiMessage:s.m6.SEND_OFFER,paymentType:s.IX.OFFER,invoice:this.offerInvoice.invoice,saveToDB:this.flgSaveToDB,amount:1e3*this.offerAmount,description:this.offerMemo,fromDialog:!0}}):(0,y.eM)(this.zeroAmtOffer?{payload:{offer:this.offerRequest,msatoshi:1e3*this.offerAmount}}:{payload:{offer:this.offerRequest}}))}onPaymentRequestEntry(e){this.paymentType===s.IX.INVOICE?(this.paymentRequest=e,this.paymentRequest&&this.paymentRequest.length>100&&(this.resetInvoiceDetails(),this.store.dispatch((0,y.is)({payload:{routeParam:this.paymentRequest,fromDialog:!0}})))):this.paymentType===s.IX.OFFER&&(this.offerRequest=e,this.offerRequest&&this.offerRequest.length>100&&(this.resetOfferDetails(),this.store.dispatch((0,y.is)({payload:{routeParam:this.offerRequest,fromDialog:!0}}))))}resetOfferDetails(){this.offerInvoice=null,this.offerAmount=null,this.offerDecodedHint="",this.offerReq.control.setErrors(null),this.zeroAmtOffer=!1,this.paymentError=""}resetInvoiceDetails(){this.paymentAmount=null,this.paymentDecodedHint="",this.paymentReq.control.setErrors(null),this.zeroAmtInvoice=!1,this.paymentError=""}onAmountChange(e){this.paymentType===s.IX.INVOICE&&(delete this.paymentDecoded.msatoshi,this.paymentDecoded.msatoshi=+e.target.value),this.paymentType===s.IX.OFFER&&(delete this.offerDecoded.amount,delete this.offerDecoded.amount_msat,this.offerDecoded.amount=1e3*+e.target.value,this.offerDecoded.amount_msat=e.target.value+"msat")}onPaymentTypeChange(){this.paymentError="",this.paymentDecodedHint="",this.offerDecodedHint="",this.offerInvoice=null}setOfferDecodedDetails(){this.offerDecoded.offer_id&&!this.offerDecoded.amount_msat?(this.offerDecoded.amount_msat="0msat",this.offerDecoded.amount=0,this.zeroAmtOffer=!0,this.offerDecodedHint="Zero Amount Offer | Description: "+this.offerDecoded.description):(this.zeroAmtOffer=!1,this.offerDecoded.amount=+(this.offerDecoded.amount||this.offerDecoded.amount_msat.slice(0,-4)),this.offerAmount=this.offerDecoded.amount?this.offerDecoded.amount/1e3:0,this.offerMemo=this.offerDecoded.description,this.selNode.fiatConversion?this.commonService.convertCurrency(this.offerAmount,s.NT.SATS,s.NT.OTHER,this.selNode.currencyUnits[2],this.selNode.fiatConversion).pipe((0,_.R)(this.unSubs[5])).subscribe({next:e=>{this.offerDecodedHint="Sending: "+this.decimalPipe.transform(this.offerAmount)+" Sats ("+e.symbol+this.decimalPipe.transform(e.OTHER?e.OTHER:0,s.Xz.OTHER)+") | Description: "+this.offerDecoded.description},error:e=>{this.offerDecodedHint="Sending: "+this.decimalPipe.transform(this.offerAmount)+" Sats | Description: "+this.offerDecoded.description+". Unable to convert currency."}}):this.offerDecodedHint="Sending: "+this.decimalPipe.transform(this.offerAmount)+" Sats | Description: "+this.offerDecoded.description)}setPaymentDecodedDetails(){this.paymentDecoded.created_at&&!this.paymentDecoded.msatoshi?(this.paymentDecoded.msatoshi=0,this.zeroAmtInvoice=!0,this.paymentDecodedHint="Zero Amount Invoice | Memo: "+this.paymentDecoded.description):(this.zeroAmtInvoice=!1,this.selNode.fiatConversion?this.commonService.convertCurrency(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0,s.NT.SATS,s.NT.OTHER,this.selNode.currencyUnits[2],this.selNode.fiatConversion).pipe((0,_.R)(this.unSubs[6])).subscribe({next:e=>{this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats ("+e.symbol+this.decimalPipe.transform(e.OTHER?e.OTHER:0,s.Xz.OTHER)+") | Memo: "+this.paymentDecoded.description},error:e=>{this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats | Memo: "+this.paymentDecoded.description+". Unable to convert currency."}}):this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats | Memo: "+this.paymentDecoded.description)}resetData(){switch(this.paymentType){case s.IX.KEYSEND:this.pubkey="",this.keysendAmount=null;break;case s.IX.INVOICE:this.paymentRequest="",this.paymentDecoded={},this.selActiveChannel=null,this.feeLimit=null,this.selFeeLimitType=s.Vc[0],this.resetInvoiceDetails();break;case s.IX.OFFER:this.offerRequest="",this.offerDecoded={},this.resetOfferDetails()}this.paymentError=""}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(b.yh),t.Y36(et.s),t.Y36(q.mQ),t.Y36(R.v),t.Y36(u.JJ),t.Y36(H.eX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-lightning-send-payments"]],viewQuery:function(e,i){if(1&e&&(t.Gf(tn,5),t.Gf(en,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.payReq=o.first),t.iGM(o=t.CRH())&&(i.offrReq=o.first)}},decls:25,vars:4,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","12","fxFlex","9","fxLayoutAlign","center","default","","mat-button","",1,"btn-close-x","p-0",3,"mat-dialog-close"],["fxLayout","column","fxLayoutAlign","start stretch",1,"padding-gap-x-large"],["class","my-1","color","primary","name","paymentType","fxFlex","100","fxLayoutAlign","start start",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxLayoutAlign","space-between stretch","fxLayout","column"],["sendPaymentForm","ngForm"],[4,"ngTemplateOutlet"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","8","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","7",3,"click"],["invoiceBlock",""],["keysendBlock",""],["offerBlock",""],["color","primary","name","paymentType","fxFlex","100","fxLayoutAlign","start start",1,"my-1",3,"ngModel","ngModelChange","change"],["fxFlex","20","tabindex","1",3,"value"],["fxFlex","20","tabindex","2",3,"value"],["fxFlex","20","tabindex","3",3,"value"],["fxFlex","100",1,"alert","alert-danger","mt-1"],[1,"mr-1","alert-icon",3,"icon"],[4,"ngIf"],["autoFocus","","matInput","","placeholder","Payment Request","name","paymentRequest","tabindex","4","required","",3,"ngModel","ngModelChange","matTextareaAutosize"],["paymentReq","ngModel"],["fxFlex","100",4,"ngIf"],["matInput","","placeholder","Amount (Sats)","name","amount","tabindex","5","required","",3,"ngModel","ngModelChange","change"],["paymentAmt","ngModel"],["autoFocus","","matInput","","placeholder","Pubkey","name","pubkey","tabindex","4","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Amount (Sats)","name","keysendAmount","tabindex","5","required","",3,"ngModel","ngModelChange"],["keysendAmt","ngModel"],["autoFocus","","matInput","","placeholder","Offer Request","rows","4","name","offerRequest","tabindex","4","required","",3,"ngModel","ngModelChange","matTextareaAutosize"],["offerReq","ngModel"],["fxFlex","30","tabindex","6","color","primary","matTooltip","Save offer in database for future payments",1,"mt-1",3,"ngModel","matTooltipPosition","ngModelChange"],["matInput","","placeholder","Amount (Sats)","name","amountoffer","tabindex","5","required","",3,"ngModel","ngModelChange","change"],["offerAmt","ngModel"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5,"Send Payment"),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.YNc(9,nn,7,4,"mat-radio-group",7),t.TgZ(10,"form",8,9),t.YNc(12,an,1,0,"ng-container",10),t.YNc(13,sn,3,2,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"button",13),t.NdJ("click",function(){return i.resetData()}),t._uU(16,"Clear Fields"),t.qZA(),t.TgZ(17,"button",14),t.NdJ("click",function(){return i.onSendPayment()}),t._uU(18,"Send Payment"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,mn,7,5,"ng-template",null,15,t.W1O),t.YNc(21,hn,7,4,"ng-template",null,16,t.W1O),t.YNc(23,Tn,10,7,"ng-template",null,17,t.W1O)),2&e){const o=t.MAs(20),l=t.MAs(22),m=t.MAs(24);t.xp6(6),t.Q6J("mat-dialog-close",!1),t.xp6(3),t.Q6J("ngIf",i.isCompatibleVersion),t.xp6(3),t.Q6J("ngTemplateOutlet",i.paymentType===i.paymentTypes.KEYSEND?l:i.paymentType===i.paymentTypes.OFFER?m:o),t.xp6(1),t.Q6J("ngIf",""!==i.paymentError)}},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,D.ZT,Z.dn,u.O5,c._Y,c.JL,c.F,u.tP,lt.VQ,c.JJ,c.On,lt.U0,k.BN,g.KE,M.Nt,c.Fj,V.h,c.Q7,g.bx,g.TO,rt.oG,Q.gM],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}.mat-column-payment_hash[_ngcontent-%COMP%]{flex:1 1 20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();const An=["sendPaymentForm"];function vn(n,a){if(1&n&&(t.TgZ(0,"mat-hint"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.paymentDecodedHint)}}function Ln(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Payment request is required."),t.qZA())}function bn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4,5),t.TgZ(2,"mat-form-field",6),t.TgZ(3,"textarea",7,8),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().onPaymentRequestEntry(o)})("matTextareaAutosize",function(){return!0}),t.qZA(),t.YNc(5,vn,2,1,"mat-hint",9),t.YNc(6,Ln,2,0,"mat-error",9),t.qZA(),t.TgZ(7,"div",10),t.TgZ(8,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetData()}),t._uU(9,"Clear Field"),t.qZA(),t.TgZ(10,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSendPayment()}),t._uU(11,"Send Payment"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.paymentRequest),t.xp6(2),t.Q6J("ngIf",e.paymentRequest&&""!==e.paymentDecodedHint),t.xp6(1),t.Q6J("ngIf",!e.paymentRequest)}}function Sn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openSendPaymentModal()}),t._uU(2,"Send Payment"),t.qZA(),t.qZA()}}function wn(n,a){1&n&&t._UZ(0,"mat-progress-bar",47)}function qn(n,a){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Created At"),t.qZA())}const $=function(n){return{"mr-0":n}};function Fn(n,a){if(1&n&&t._UZ(0,"span",52),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function Rn(n,a){if(1&n&&t._UZ(0,"span",53),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function On(n,a){if(1&n&&(t.TgZ(0,"td",49),t.YNc(1,Fn,1,3,"span",50),t.YNc(2,Rn,1,3,"span",51),t._uU(3),t.ALo(4,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","complete"===e.status),t.xp6(1),t.Q6J("ngIf","complete"!==e.status),t.xp6(1),t.hij(" ",t.xi3(4,3,1e3*(null==e?null:e.created_at),"dd/MMM/YYYY HH:mm")," ")}}function Un(n,a){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Payment Hash"),t.qZA())}function kn(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.payment_hash)}}function Nn(n,a){1&n&&(t.TgZ(0,"th",54),t._uU(1,"Sats Sent"),t.qZA())}function In(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",55),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.msatoshi_sent)/1e3,(null==e?null:e.msatoshi_sent)<1e3?"1.0-4":"1.0-0"))}}function Mn(n,a){1&n&&(t.TgZ(0,"th",54),t._uU(1,"Sats Received"),t.qZA())}function En(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",55),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.msatoshi)/1e3,(null==e?null:e.msatoshi)<1e3?"1.0-4":"1.0-0"))}}function Pn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",56),t.TgZ(1,"div",57),t.TgZ(2,"mat-select",58),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",59),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Dn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",60),t.TgZ(1,"button",61),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onPaymentClick(l)}),t._uU(2,"View Info"),t.qZA(),t.qZA()}}function Jn(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No payment available."),t.qZA())}function Qn(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting payments..."),t.qZA())}function Yn(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function Bn(n,a){if(1&n&&(t.TgZ(0,"td",62),t.YNc(1,Jn,2,0,"p",9),t.YNc(2,Qn,2,0,"p",9),t.YNc(3,Yn,2,1,"p",9),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.payments&&e.payments.data)||(null==e.payments||null==e.payments.data?null:e.payments.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.payments&&e.payments.data)||(null==e.payments||null==e.payments.data?null:e.payments.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.payments&&e.payments.data)||(null==e.payments||null==e.payments.data?null:e.payments.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}function Hn(n,a){if(1&n&&t._UZ(0,"span",66),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function Vn(n,a){if(1&n&&t._UZ(0,"span",67),2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function zn(n,a){if(1&n&&t._UZ(0,"span",66),2&n){const e=t.oxw(5);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function Xn(n,a){if(1&n&&t._UZ(0,"span",67),2&n){const e=t.oxw(5);t.Q6J("ngClass",t.VKq(1,$,e.screenSize===e.screenSizeEnum.XS))}}function Gn(n,a){if(1&n&&(t.TgZ(0,"span",69),t.YNc(1,zn,1,3,"span",64),t.YNc(2,Xn,1,3,"span",65),t._uU(3),t.ALo(4,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","complete"===e.status),t.xp6(1),t.Q6J("ngIf","complete"!==e.status),t.xp6(1),t.hij(" ",t.xi3(4,3,1e3*e.created_at,"dd/MMM/YYYY HH:mm")," ")}}function Wn(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Gn,5,6,"span",68),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.mpps)}}function Kn(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",63),t.YNc(2,Hn,1,3,"span",64),t.YNc(3,Vn,1,3,"span",65),t._uU(4),t.qZA(),t.YNc(5,Wn,2,1,"ng-container",9),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Q6J("ngIf","complete"===e.status),t.xp6(1),t.Q6J("ngIf","complete"!==e.status),t.xp6(1),t.hij(" Total Attempts: ",null==e?null:e.total_parts," "),t.xp6(1),t.Q6J("ngIf",e.is_expanded)}}function $n(n,a){if(1&n&&(t.TgZ(0,"span",63),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" Part ID ",e.partid?e.partid:0," ")}}function jn(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,$n,2,1,"span",70),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.mpps)}}function ti(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",63),t._uU(2),t.qZA(),t.YNc(3,jn,2,1,"span",9),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.payment_hash),t.xp6(1),t.Q6J("ngIf",e.is_expanded)}}function ei(n,a){if(1&n&&(t.TgZ(0,"span",71),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.msatoshi_sent/1e3,e.msatoshi_sent<1e3?"1.0-4":"1.0-0")," ")}}function ni(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ei,3,4,"span",72),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.mpps)}}function ii(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",71),t._uU(2),t.ALo(3,"number"),t.qZA(),t.YNc(4,ni,2,1,"span",9),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,2,(null==e?null:e.msatoshi_sent)/1e3,(null==e?null:e.msatoshi_sent)<1e3?"1.0-4":"1.0-0")),t.xp6(2),t.Q6J("ngIf",e.is_expanded)}}function ai(n,a){if(1&n&&(t.TgZ(0,"span",71),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.msatoshi/1e3,e.msatoshi<1e3?"1.0-4":"1.0-0")," ")}}function oi(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ai,3,4,"span",72),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.mpps)}}function si(n,a){if(1&n&&(t.TgZ(0,"td",49),t.TgZ(1,"span",71),t._uU(2),t.ALo(3,"number"),t.qZA(),t.YNc(4,oi,2,1,"span",9),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,2,(null==e?null:e.msatoshi)/1e3,(null==e?null:e.msatoshi)<1e3?"1.0-4":"1.0-0")),t.xp6(2),t.Q6J("ngIf",e.is_expanded)}}function li(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",55),t.TgZ(1,"button",76),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(4).onPaymentClick(l)}),t._uU(2),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(2),t.hij("View ",e.partid?e.partid:0,"")}}function ri(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,li,3,1,"div",75),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.mpps)}}function ci(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",73),t.TgZ(1,"span",55),t.TgZ(2,"button",74),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return l.is_expanded=!l.is_expanded}),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,ri,2,1,"div",9),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(3),t.Oqu(e.is_expanded?"Hide":"Show"),t.xp6(1),t.Q6J("ngIf",e.is_expanded)}}function ui(n,a){1&n&&t._UZ(0,"tr",77)}const pi=function(n){return{"display-none":n}};function mi(n,a){if(1&n&&t._UZ(0,"tr",78),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,pi,(null==e.payments?null:e.payments.data)&&(null==e.payments||null==e.payments.data?null:e.payments.data.length)>0))}}function di(n,a){1&n&&t._UZ(0,"tr",79)}function _i(n,a){1&n&&t._UZ(0,"tr",77)}const hi=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},fi=function(){return["no_payment"]};function gi(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"div",15),t.TgZ(2,"div",16),t._UZ(3,"fa-icon",17),t.TgZ(4,"span",18),t._uU(5,"Payments History"),t.qZA(),t.qZA(),t.TgZ(6,"mat-form-field",19),t.TgZ(7,"input",20),t.NdJ("keyup",function(){return t.CHM(e),t.oxw().applyFilter()})("ngModelChange",function(o){return t.CHM(e),t.oxw().selFilter=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",21),t.YNc(9,wn,1,0,"mat-progress-bar",22),t.TgZ(10,"table",23,24),t.ynx(12,25),t.YNc(13,qn,2,0,"th",26),t.YNc(14,On,5,6,"td",27),t.BQk(),t.ynx(15,28),t.YNc(16,Un,2,0,"th",26),t.YNc(17,kn,3,1,"td",27),t.BQk(),t.ynx(18,29),t.YNc(19,Nn,2,0,"th",30),t.YNc(20,In,4,4,"td",27),t.BQk(),t.ynx(21,31),t.YNc(22,Mn,2,0,"th",30),t.YNc(23,En,4,4,"td",27),t.BQk(),t.ynx(24,32),t.YNc(25,Pn,6,0,"th",33),t.YNc(26,Dn,3,0,"td",34),t.BQk(),t.ynx(27,35),t.YNc(28,Bn,4,3,"td",36),t.BQk(),t.ynx(29,37),t.YNc(30,Kn,6,4,"td",27),t.BQk(),t.ynx(31,38),t.YNc(32,ti,4,2,"td",27),t.BQk(),t.ynx(33,39),t.YNc(34,ii,5,5,"td",27),t.BQk(),t.ynx(35,40),t.YNc(36,si,5,5,"td",27),t.BQk(),t.ynx(37,41),t.YNc(38,ci,5,2,"td",42),t.BQk(),t.YNc(39,ui,1,0,"tr",43),t.YNc(40,mi,1,3,"tr",44),t.YNc(41,di,1,0,"tr",45),t.YNc(42,_i,1,0,"tr",43),t.qZA(),t.qZA(),t._UZ(43,"mat-paginator",46),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("icon",e.faHistory),t.xp6(4),t.Q6J("ngModel",e.selFilter),t.xp6(2),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.payments)("ngClass",t.VKq(15,hi,""!==e.errorMessage)),t.xp6(29),t.Q6J("matRowDefColumns",e.mppColumns)("matRowDefWhen",e.is_group),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(17,fi)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)("matRowDefWhen",!e.is_group),t.xp6(1),t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS)}}let vt=(()=>{class n{constructor(e,i,o,l,m,v,J,T){this.logger=e,this.commonService=i,this.store=o,this.rtlEffects=l,this.clEffects=m,this.decimalPipe=v,this.titleCasePipe=J,this.datePipe=T,this.calledFrom="transactions",this.faHistory=x.qO$,this.newlyAddedPayment="",this.selNode={},this.information={},this.paymentJSONArr=[],this.displayedColumns=[],this.mppColumns=[],this.paymentDecoded={},this.paymentRequest="",this.paymentDecodedHint="",this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.selFilter="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["created_at","actions"],this.mppColumns=["groupTotal","groupAction"]):this.screenSize===s.cu.SM?(this.flgSticky=!1,this.displayedColumns=["created_at","msatoshi","actions"],this.mppColumns=["groupTotal","groupAmtRecv","groupAction"]):this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["created_at","msatoshi_sent","msatoshi","actions"],this.mppColumns=["groupTotal","groupAmtSent","groupAmtRecv","groupAction"]):(this.flgSticky=!0,this.displayedColumns=["created_at","payment_hash","msatoshi_sent","msatoshi","actions"],this.mppColumns=["groupTotal","groupHash","groupAmtSent","groupAmtRecv","groupAction"])}ngOnInit(){this.store.select(f.Jo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.selNode=e}),this.store.select(f.W3).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.information=e}),this.store.select(f.PP).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.paymentJSONArr=e.payments||[],this.paymentJSONArr.length>0&&this.loadPaymentsTable(this.paymentJSONArr),this.logger.info(e)})}ngAfterViewInit(){this.paymentJSONArr.length>0&&this.loadPaymentsTable(this.paymentJSONArr)}is_group(e,i){return i.is_group}onSendPayment(){if(!this.paymentRequest)return!0;this.paymentDecoded.created_at?this.sendPayment():(this.store.dispatch((0,y.is)({payload:{routeParam:this.paymentRequest,fromDialog:!1}})),this.clEffects.setDecodedPaymentCL.pipe((0,z.q)(1)).subscribe(e=>{this.paymentDecoded=e,this.paymentDecoded.created_at?(this.paymentDecoded.msatoshi||(this.paymentDecoded.msatoshi=0),this.sendPayment()):this.resetData()}))}sendPayment(){this.newlyAddedPayment=this.paymentDecoded.payment_hash,this.paymentDecoded.msatoshi&&0!==this.paymentDecoded.msatoshi?(this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Confirm Send Payment",noBtnText:"Cancel",yesBtnText:"Send Payment",message:[[{key:"payment_hash",value:this.paymentDecoded.payment_hash,title:"Payment Hash",width:100}],[{key:"payee",value:this.paymentDecoded.payee,title:"Payee",width:100}],[{key:"description",value:this.paymentDecoded.description,title:"Description",width:100}],[{key:"created_at",value:this.paymentDecoded.created_at,title:"Creation Date",width:50,type:s.Gi.DATE_TIME},{key:"num_satoshis",value:this.paymentDecoded.msatoshi/1e3,title:"Amount (Sats)",width:50,type:s.Gi.NUMBER}],[{key:"expiry",value:this.paymentDecoded.expiry,title:"Expiry",width:50,type:s.Gi.NUMBER},{key:"min_finaltv_expiry",value:this.paymentDecoded.min_final_cltv_expiry,title:"CLTV Expiry",width:50}]]}}})),this.rtlEffects.closeConfirm.pipe((0,z.q)(1)).subscribe(i=>{i&&(this.store.dispatch((0,y.oV)({payload:{uiMessage:s.m6.SEND_PAYMENT,paymentType:s.IX.INVOICE,invoice:this.paymentRequest,fromDialog:!1}})),this.resetData())})):(this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Enter Amount and Confirm Send Payment",message:[[{key:"payment_hash",value:this.paymentDecoded.payment_hash,title:"Payment Hash",width:100}],[{key:"payee",value:this.paymentDecoded.payee,title:"Payee",width:100}],[{key:"description",value:this.paymentDecoded.description,title:"Description",width:100}],[{key:"created_at",value:this.paymentDecoded.created_at,title:"Creation Date",width:40,type:s.Gi.DATE_TIME},{key:"expiry",value:this.paymentDecoded.expiry,title:"Expiry",width:30,type:s.Gi.NUMBER},{key:"min_finaltv_expiry",value:this.paymentDecoded.min_final_cltv_expiry,title:"CLTV Expiry",width:30}]],noBtnText:"Cancel",yesBtnText:"Send Payment",flgShowInput:!0,titleMessage:"It is a zero amount invoice. Enter the amount (Sats) to pay.",getInputs:[{placeholder:"Amount (Sats)",inputType:s.Gi.NUMBER.toLowerCase(),inputValue:"",width:30}]}}})),this.rtlEffects.closeConfirm.pipe((0,z.q)(1)).subscribe(o=>{o&&(this.paymentDecoded.msatoshi=o[0].inputValue,this.store.dispatch((0,y.oV)({payload:{uiMessage:s.m6.SEND_PAYMENT,paymentType:s.IX.INVOICE,invoice:this.paymentRequest,amount:1e3*o[0].inputValue,fromDialog:!1}})),this.resetData())}))}onPaymentRequestEntry(e){this.paymentRequest=e,this.paymentDecodedHint="",this.paymentRequest&&this.paymentRequest.length>100&&(this.store.dispatch((0,y.is)({payload:{routeParam:this.paymentRequest,fromDialog:!1}})),this.clEffects.setDecodedPaymentCL.subscribe(i=>{this.paymentDecoded=i,this.paymentDecoded.msatoshi?this.selNode.fiatConversion?this.commonService.convertCurrency(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0,s.NT.SATS,s.NT.OTHER,this.selNode.currencyUnits[2],this.selNode.fiatConversion).pipe((0,_.R)(this.unSubs[3])).subscribe({next:o=>{this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats ("+o.symbol+this.decimalPipe.transform(o.OTHER?o.OTHER:0,s.Xz.OTHER)+") | Memo: "+this.paymentDecoded.description},error:o=>{this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats | Memo: "+this.paymentDecoded.description+". Unable to convert currency."}}):this.paymentDecodedHint="Sending: "+this.decimalPipe.transform(this.paymentDecoded.msatoshi?this.paymentDecoded.msatoshi/1e3:0)+" Sats | Memo: "+this.paymentDecoded.description:this.paymentDecodedHint="Zero Amount Invoice | Memo: "+this.paymentDecoded.description}))}openSendPaymentModal(){this.store.dispatch((0,L.qR)({payload:{data:{component:Zn}}}))}resetData(){this.paymentDecoded={},this.paymentRequest="",this.form.resetForm()}onPaymentClick(e){const i=[[{key:"bolt11",value:e.bolt11,title:"Bolt 11",width:100,type:s.Gi.STRING}],[{key:"payment_preimage",value:e.payment_preimage,title:"Payment Preimage",width:100,type:s.Gi.STRING}],[{key:"id",value:e.id,title:"ID",width:20,type:s.Gi.STRING},{key:"destination",value:e.destination,title:"Destination",width:80,type:s.Gi.STRING}],[{key:"created_at",value:e.created_at,title:"Creation Date",width:50,type:s.Gi.DATE_TIME},{key:"status",value:this.titleCasePipe.transform(e.status),title:"Status",width:50,type:s.Gi.STRING}],[{key:"msatoshi",value:e.msatoshi,title:"Amount (mSats)",width:50,type:s.Gi.NUMBER},{key:"msatoshi_sent",value:e.msatoshi_sent,title:"Amount Sent (mSats)",width:50,type:s.Gi.NUMBER}]];e.memo&&""!==e.memo&&i.splice(2,0,[{key:"memo",value:e.memo,title:"Memo",width:100,type:s.Gi.STRING}]),e.hasOwnProperty("partid")?i.unshift([{key:"payment_hash",value:e.payment_hash,title:"Payment Hash",width:80,type:s.Gi.STRING},{key:"partid",value:e.partid,title:"Part ID",width:20,type:s.Gi.STRING}]):i.unshift([{key:"payment_hash",value:e.payment_hash,title:"Payment Hash",width:100,type:s.Gi.STRING}]),this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Payment Information",message:i}}}))}applyFilter(){this.payments.filter=this.selFilter.trim().toLowerCase()}loadPaymentsTable(e){this.payments=new r.by(e?[...e]:[]),this.payments.data=this.paymentJSONArr,this.payments.sort=this.sort,this.payments.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.payments.filterPredicate=(i,o)=>JSON.stringify(i).toLowerCase().includes(o),this.payments.filterPredicate=(i,o)=>((i.created_at?this.datePipe.transform(new Date(1e3*i.created_at),"dd/MMM/YYYY HH:mm").toLowerCase():"")+JSON.stringify(i).toLowerCase()).includes(o),this.payments.paginator=this.paginator,this.applyFilter()}onDownloadCSV(){if(this.payments.data&&this.payments.data.length>0){const i=JSON.parse(JSON.stringify(this.payments.data)).reduce((o,l)=>l.mpps?o.concat(l.mpps):(delete l.is_group,delete l.is_expanded,delete l.total_parts,o.concat(l)),[]);this.commonService.downloadFile(i,"Payments")}}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh),t.Y36(K.V),t.Y36(et.s),t.Y36(u.JJ),t.Y36(u.rS),t.Y36(u.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-lightning-payments"]],viewQuery:function(e,i){if(1&e&&(t.Gf(An,5),t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.form=o.first),t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},inputs:{calledFrom:"calledFrom"},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Payments")}])],decls:4,vars:3,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap",4,"ngIf"],["fxLayout","row",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap"],["sendPaymentForm","ngForm"],["fxFlex","100"],["matInput","","placeholder","Payment Request","name","paymentRequest","tabindex","1","required","",3,"perfectScrollbar","ngModel","ngModelChange","matTextareaAutosize"],["paymentReq","ngModel"],[4,"ngIf"],["fxLayout","row",1,"mt-1"],["mat-stroked-button","","color","primary","tabindex","2","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","3",3,"click"],["fxLayout","row"],["fxLayout","column","fxLayoutAlign","start stretch"],["fxLayout","column","fxLayoutAlign","start stretch","fxLayout.gt-sm","row wrap",1,"page-sub-title-container","mt-1"],["fxFlex","70","fxLayoutAlign","start start","fxLayoutAlign.gt-sm","start center"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxFlex","30","fxLayoutAlign","start end"],["matInput","","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","fxFlex","100","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","payment_hash"],["matColumnDef","msatoshi_sent"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","msatoshi"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","class","px-3","fxLayoutAlign","end center",4,"matCellDef"],["matColumnDef","no_payment"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["matColumnDef","groupTotal"],["matColumnDef","groupHash"],["matColumnDef","groupAmtSent"],["matColumnDef","groupAmtRecv"],["matColumnDef","groupAction"],["mat-cell","","class","px-3",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns","matRowDefWhen"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","dot green","matTooltip","Completed","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["class","dot yellow","matTooltip","Failed","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["matTooltip","Completed","matTooltipPosition","right",1,"dot","green",3,"ngClass"],["matTooltip","Failed","matTooltipPosition","right",1,"dot","yellow",3,"ngClass"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"px-3"],["mat-stroked-button","","color","primary","type","button","tabindex","4",3,"click"],["mat-footer-cell","","colspan","4"],["fxLayoutAlign","start center",1,"mpp-row-span"],["class","dot green mt-0","matTooltip","Completed","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["class","dot yellow mt-0","matTooltip","Incomplete/Failed","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["matTooltip","Completed","matTooltipPosition","right",1,"dot","green","mt-0",3,"ngClass"],["matTooltip","Incomplete/Failed","matTooltipPosition","right",1,"dot","yellow","mt-0",3,"ngClass"],["fxLayoutAlign","start center","class","mpp-row-span pl-3",4,"ngFor","ngForOf"],["fxLayoutAlign","start center",1,"mpp-row-span","pl-3"],["fxLayoutAlign","start center","class","mpp-row-span",4,"ngFor","ngForOf"],["fxLayoutAlign","end center",1,"mpp-row-span"],["fxLayoutAlign","end center","class","mpp-row-span",4,"ngFor","ngForOf"],["mat-cell","",1,"px-3"],["mat-flat-button","","color","primary","type","button","tabindex","5",1,"btn-mpp-expand",3,"click"],["fxLayoutAlign","end center",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary","type","button","tabindex","6",1,"btn-mpp-info",3,"click"],["mat-row",""],["mat-footer-row","",3,"ngClass"],["mat-header-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,bn,12,3,"form",1),t.YNc(2,Sn,3,0,"div",2),t.YNc(3,gi,44,18,"div",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf","home"===i.calledFrom),t.xp6(1),t.Q6J("ngIf","transactions"===i.calledFrom),t.xp6(1),t.Q6J("ngIf","transactions"===i.calledFrom))},directives:[p.xw,p.yH,p.Wh,u.O5,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,c.Q7,Y.$V,c.JJ,c.On,O.lW,g.bx,g.TO,k.BN,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.nj,r.Ke,r.as,w.NW,P.pW,r.ge,A.nU,r.ev,Q.gM,U.gD,U.$L,B.ey,r.yh,u.sg,r.Gk,r.Q2,r.XQ],pipes:[u.uU,u.JJ],styles:[".mat-column-bolt11[_ngcontent-%COMP%]{flex:1 1 20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}.mat-column-groupAction[_ngcontent-%COMP%]{min-height:4.8rem}.mat-column-groupAction[_ngcontent-%COMP%]   .btn-mpp-expand[_ngcontent-%COMP%]{width:9rem}.mat-column-groupAction[_ngcontent-%COMP%]   .btn-mpp-info[_ngcontent-%COMP%]{margin-top:.5rem;width:9rem}.mpp-row-span[_ngcontent-%COMP%]{min-height:4.2rem}.mat-column-groupTotal[_ngcontent-%COMP%]{min-width:17rem}"]}),n})();function Ci(n,a){if(1&n&&(t.TgZ(0,"button",26),t.TgZ(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA(),t.qZA()),2&n){t.oxw();const e=t.MAs(11);t.Q6J("matMenuTriggerFor",e)}}function xi(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).onNavigateTo("/cl/reports")}),t._uU(1,"Fees Summary"),t.qZA()}}function yi(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).onsortChannelsBy()}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.hij("Sort By ","Balance Score"===e.sortField?"Capacity":"Balance Score","")}}function Ti(n,a){1&n&&t._UZ(0,"mat-progress-bar",27)}function Zi(n,a){if(1&n&&t._UZ(0,"rtl-cl-node-info",28),2&n){const e=t.oxw(3);t.Q6J("information",e.information)("showColorFieldSeparately",!1)}}function Ai(n,a){if(1&n&&t._UZ(0,"rtl-cl-balances-info",29),2&n){const e=t.oxw(3);t.Q6J("balances",e.balances)("errorMessage",e.errorMessages[2]+" "+e.errorMessages[3])}}function vi(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-capacity-info",30),2&n){const e=t.oxw(3);t.Q6J("sortBy",e.sortField)("channelBalances",e.channelBalances)("activeChannels",e.activeChannelsCapacity)("errorMessage",e.errorMessages[4]+" "+e.errorMessages[3])}}function Li(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-info",31),2&n){const e=t.oxw(3);t.Q6J("fees",e.fees)("errorMessage",e.errorMessages[1]+" "+e.errorMessages[4]+" "+e.errorMessages[5])}}function bi(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-status-info",32),2&n){const e=t.oxw(3);t.Q6J("channelsStatus",e.channelsStatus)("errorMessage",e.errorMessages[0]+" "+e.errorMessages[3])}}function Si(n,a){1&n&&(t.TgZ(0,"h3"),t._uU(1,"Error! Unable to find information!"),t.qZA())}const Lt=function(n){return{"dashboard-card-content":!0,"error-border":n}};function wi(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-grid-tile",8),t.TgZ(1,"mat-card",9),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title",10),t.TgZ(4,"div"),t._UZ(5,"fa-icon",11),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div"),t.YNc(9,Ci,3,1,"button",12),t.TgZ(10,"mat-menu",13,14),t.TgZ(12,"button",15),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onNavigateTo(l.link)}),t._uU(13),t.qZA(),t.YNc(14,xi,2,0,"button",16),t.YNc(15,yi,2,1,"button",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-content",17),t.YNc(17,Ti,1,0,"mat-progress-bar",18),t.TgZ(18,"div",19),t.YNc(19,Zi,1,2,"rtl-cl-node-info",20),t.YNc(20,Ai,1,2,"rtl-cl-balances-info",21),t.YNc(21,vi,1,4,"rtl-cl-channel-capacity-info",22),t.YNc(22,Li,1,2,"rtl-cl-fee-info",23),t.YNc(23,bi,1,2,"rtl-cl-channel-status-info",24),t.YNc(24,Si,2,0,"h3",25),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("colspan",e.cols)("rowspan",e.rows),t.xp6(5),t.Q6J("icon",e.icon),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",e.link),t.xp6(4),t.hij("Go To ",e.goTo,""),t.xp6(1),t.Q6J("ngIf","fee"===e.id),t.xp6(1),t.Q6J("ngIf","capacity"===e.id),t.xp6(1),t.s9C("fxFlex","capacity"===e.id?90:70),t.Q6J("ngClass",t.VKq(17,Lt,"node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||"balance"===e.id&&(i.apiCallStatusBalance.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR)||"capacity"===e.id&&(i.apiCallStatusChannels.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusChannels.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.ERROR)||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR))),t.xp6(1),t.Q6J("ngIf","node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||"balance"===e.id&&(i.apiCallStatusBalance.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)||"capacity"===e.id&&(i.apiCallStatusChannels.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusChannels.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.INITIATED)||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)),t.xp6(1),t.Q6J("ngSwitch",e.id),t.xp6(1),t.Q6J("ngSwitchCase","node"),t.xp6(1),t.Q6J("ngSwitchCase","balance"),t.xp6(1),t.Q6J("ngSwitchCase","capacity"),t.xp6(1),t.Q6J("ngSwitchCase","fee"),t.xp6(1),t.Q6J("ngSwitchCase","status")}}function qi(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t._UZ(2,"fa-icon",4),t.TgZ(3,"span",5),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-grid-list",6),t.YNc(6,wi,25,19,"mat-grid-tile",7),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("icon",e.apiCallStatusNodeInfo.status===e.apiCallStatusEnum.ERROR?e.faFrown:e.faSmile),t.xp6(2),t.Oqu(e.apiCallStatusNodeInfo.status===e.apiCallStatusEnum.COMPLETED?"Welcome "+e.information.alias+"! Your node is up and running.":e.apiCallStatusNodeInfo.status===e.apiCallStatusEnum.INITIATED?"Wait! Getting your node information...":"Error! Please check the server connection."),t.xp6(1),t.Q6J("rowHeight",e.operatorCardHeight),t.xp6(1),t.Q6J("ngForOf",e.operatorCards)}}function Fi(n,a){if(1&n&&(t.TgZ(0,"button",26),t.TgZ(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA(),t.qZA()),2&n){t.oxw();const e=t.MAs(9);t.Q6J("matMenuTriggerFor",e)}}function Ri(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card-header"),t.TgZ(1,"mat-card-title",10),t.TgZ(2,"div"),t._UZ(3,"fa-icon",11),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div"),t.YNc(7,Fi,3,1,"button",12),t.TgZ(8,"mat-menu",13,41),t.TgZ(10,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onNavigateTo(o.link)}),t._uU(11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("icon",e.icon),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",e.link),t.xp6(4),t.hij("Go To ",e.goTo,"")}}function Oi(n,a){1&n&&t._UZ(0,"mat-progress-bar",27)}function Ui(n,a){if(1&n&&t._UZ(0,"rtl-cl-node-info",42),2&n){const e=t.oxw(3);t.Q6J("information",e.information)}}function ki(n,a){if(1&n&&t._UZ(0,"rtl-cl-balances-info",29),2&n){const e=t.oxw(3);t.Q6J("balances",e.balances)("errorMessage",e.errorMessages[2]+" "+e.errorMessages[3])}}function Ni(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-liquidity-info",43),2&n){const e=t.oxw(3);t.Q6J("direction","In")("totalLiquidity",e.totalInboundLiquidity)("activeChannels",e.allInboundChannels)("errorMessage",e.errorMessages[4])}}function Ii(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-liquidity-info",43),2&n){const e=t.oxw(3);t.Q6J("direction","Out")("totalLiquidity",e.totalOutboundLiquidity)("activeChannels",e.allOutboundChannels)("errorMessage",e.errorMessages[4])}}function Mi(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.TgZ(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA(),t.qZA(),t.TgZ(3,"mat-menu",13,53),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(2).onNavigateTo(o.link)}),t._uU(6),t.qZA(),t.TgZ(7,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).onNavigateTo("/cl/reports/transactions")}),t._uU(8,"Transactions Summary"),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(4),i=t.oxw(2).$implicit;t.Q6J("matMenuTriggerFor",e),t.xp6(6),t.hij("Go To ",i.goTo,"")}}function Ei(n,a){1&n&&(t.TgZ(0,"span",44),t.TgZ(1,"mat-tab-group",45),t.TgZ(2,"mat-tab",46),t._UZ(3,"rtl-cl-lightning-invoices",47),t.qZA(),t.TgZ(4,"mat-tab",48),t._UZ(5,"rtl-cl-lightning-payments",49),t.qZA(),t.TgZ(6,"mat-tab",50),t.YNc(7,Mi,9,2,"ng-template",51),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("calledFrom","home"),t.xp6(2),t.Q6J("calledFrom","home"),t.xp6(1),t.Q6J("disabled",!0))}function Pi(n,a){1&n&&(t.TgZ(0,"h3"),t._uU(1,"Error! Unable to find information!"),t.qZA())}const Di=function(n){return{"p-0":n}};function Ji(n,a){if(1&n&&(t.TgZ(0,"mat-grid-tile",8),t.TgZ(1,"mat-card",35),t.YNc(2,Ri,12,4,"mat-card-header",36),t.TgZ(3,"mat-card-content",37),t.YNc(4,Oi,1,0,"mat-progress-bar",18),t.TgZ(5,"div",19),t.YNc(6,Ui,1,1,"rtl-cl-node-info",38),t.YNc(7,ki,1,2,"rtl-cl-balances-info",21),t.YNc(8,Ni,1,4,"rtl-cl-channel-liquidity-info",39),t.YNc(9,Ii,1,4,"rtl-cl-channel-liquidity-info",39),t.YNc(10,Ei,8,3,"span",40),t.YNc(11,Pi,2,0,"h3",25),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("colspan",e.cols)("rowspan",e.rows),t.xp6(1),t.Q6J("ngClass",t.VKq(13,Di,"transactions"===e.id)),t.xp6(1),t.Q6J("ngIf","transactions"!==e.id),t.xp6(1),t.s9C("fxFlex","transactions"===e.id?100:"balance"===e.id?70:90),t.Q6J("ngClass",t.VKq(15,Lt,"node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||"balance"===e.id&&(i.apiCallStatusBalance.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR)||("inboundLiq"===e.id||"outboundLiq"===e.id)&&i.apiCallStatusChannels.status===i.apiCallStatusEnum.ERROR)),t.xp6(1),t.Q6J("ngIf","node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||"balance"===e.id&&(i.apiCallStatusBalance.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)||("inboundLiq"===e.id||"outboundLiq"===e.id)&&i.apiCallStatusChannels.status===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngSwitch",e.id),t.xp6(1),t.Q6J("ngSwitchCase","node"),t.xp6(1),t.Q6J("ngSwitchCase","balance"),t.xp6(1),t.Q6J("ngSwitchCase","inboundLiq"),t.xp6(1),t.Q6J("ngSwitchCase","outboundLiq"),t.xp6(1),t.Q6J("ngSwitchCase","transactions")}}function Qi(n,a){if(1&n&&(t.TgZ(0,"div",33),t._UZ(1,"fa-icon",4),t.TgZ(2,"span",5),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-grid-list",34),t.YNc(5,Ji,12,17,"mat-grid-tile",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faSmile),t.xp6(2),t.hij("Welcome ",e.information.alias,"! Your node is up and running."),t.xp6(1),t.Q6J("rowHeight",e.merchantCardHeight),t.xp6(1),t.Q6J("ngForOf",e.merchantCards)}}let Yi=(()=>{class n{constructor(e,i,o,l,m){this.logger=e,this.store=i,this.actions=o,this.commonService=l,this.router=m,this.faSmile=Ct.I3,this.faFrown=Ct.Kf,this.faAngleDoubleDown=x.Sbq,this.faAngleDoubleUp=x.Vfw,this.faChartPie=x.OS1,this.faBolt=x.BDt,this.faServer=x.xf3,this.faNetworkWired=x.kXW,this.userPersonaEnum=s.ol,this.channelBalances={localBalance:0,remoteBalance:0,balancedness:0},this.selNode={},this.information={},this.totalBalance={},this.balances={onchain:-1,lightning:-1,total:0},this.activeChannels=[],this.channelsStatus={active:{},pending:{},inactive:{}},this.activeChannelsCapacity=[],this.allInboundChannels=[],this.allOutboundChannels=[],this.totalInboundLiquidity=0,this.totalOutboundLiquidity=0,this.operatorCards=[],this.merchantCards=[],this.screenSize="",this.operatorCardHeight="330px",this.merchantCardHeight="65px",this.sortField="Balance Score",this.errorMessages=["","","","","",""],this.apiCallStatusNodeInfo=null,this.apiCallStatusFees=null,this.apiCallStatusBalance=null,this.apiCallStatusLRBal=null,this.apiCallStatusChannels=null,this.apiCallStatusFHistory=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:10,rows:1},{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:10,rows:1},{id:"fee",goTo:"Routing",link:"/cl/routing",icon:this.faBolt,title:"Routing Fee",cols:10,rows:1},{id:"status",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels",cols:10,rows:1},{id:"capacity",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels Capacity",cols:10,rows:2}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:6,rows:4},{id:"transactions",goTo:"Transactions",link:"/cl/transactions",title:"",cols:6,rows:4},{id:"inboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:6,rows:8},{id:"outboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:6,rows:8}]):this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:5,rows:1},{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:5,rows:1},{id:"fee",goTo:"Routing",link:"/cl/routing",icon:this.faBolt,title:"Routing Fee",cols:5,rows:1},{id:"status",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels",cols:5,rows:1},{id:"capacity",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels Capacity",cols:10,rows:2}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:3,rows:4},{id:"transactions",goTo:"Transactions",link:"/cl/transactions",title:"",cols:3,rows:4},{id:"inboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:3,rows:8},{id:"outboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:3,rows:8}]):(this.operatorCardHeight=.77*window.screen.height/2+"px",this.merchantCardHeight=.76*window.screen.height/10+"px",this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:3,rows:1},{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:3,rows:1},{id:"capacity",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels Capacity",cols:4,rows:2},{id:"fee",goTo:"Routing",link:"/cl/routing",icon:this.faBolt,title:"Routing Fee",cols:3,rows:1},{id:"status",goTo:"Channels",link:"/cl/connections",icon:this.faNetworkWired,title:"Channels",cols:3,rows:1}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/cl/onchain",icon:this.faChartPie,title:"Balances",cols:2,rows:5},{id:"inboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:2,rows:10},{id:"outboundLiq",goTo:"Channels",link:"/cl/connections",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:2,rows:10},{id:"transactions",goTo:"Transactions",link:"/cl/transactions",title:"",cols:2,rows:5}])}ngOnInit(){this.store.select(f.Hz).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.errorMessages[0]="",this.errorMessages[5]="",this.apiCallStatusNodeInfo=e.apisCallStatus[0],this.apiCallStatusFHistory=e.apisCallStatus[1],this.apiCallStatusNodeInfo.status===s.Bn.ERROR&&(this.errorMessages[0]="object"==typeof this.apiCallStatusNodeInfo.message?JSON.stringify(this.apiCallStatusNodeInfo.message):this.apiCallStatusNodeInfo.message),this.apiCallStatusFHistory.status===s.Bn.ERROR&&(this.errorMessages[5]="object"==typeof this.apiCallStatusFHistory.message?JSON.stringify(this.apiCallStatusFHistory.message):this.apiCallStatusFHistory.message),this.selNode=e.nodeSettings,this.information=e.information}),this.store.select(f.JG).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.errorMessages[1]="",this.apiCallStatusFees=e.apiCallStatus,this.apiCallStatusFees.status===s.Bn.ERROR&&(this.errorMessages[1]="object"==typeof this.apiCallStatusFees.message?JSON.stringify(this.apiCallStatusFees.message):this.apiCallStatusFees.message),this.fees=e.fees,this.logger.info(e)}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.errorMessages[4]="",this.apiCallStatusChannels=e.apiCallStatus,this.apiCallStatusChannels.status===s.Bn.ERROR&&(this.errorMessages[4]="object"==typeof this.apiCallStatusChannels.message?JSON.stringify(this.apiCallStatusChannels.message):this.apiCallStatusChannels.message),this.totalInboundLiquidity=0,this.totalOutboundLiquidity=0,this.activeChannels=e.activeChannels,this.activeChannelsCapacity=JSON.parse(JSON.stringify(this.commonService.sortDescByKey(this.activeChannels,"balancedness")))||[],this.allInboundChannels=JSON.parse(JSON.stringify(this.commonService.sortDescByKey(this.activeChannels.filter(i=>i.msatoshi_to_them>0),"msatoshi_to_them")))||[],this.allOutboundChannels=JSON.parse(JSON.stringify(this.commonService.sortDescByKey(this.activeChannels.filter(i=>i.msatoshi_to_us>0),"msatoshi_to_us")))||[],this.activeChannels.forEach(i=>{this.totalInboundLiquidity=this.totalInboundLiquidity+Math.ceil(i.msatoshi_to_them/1e3),this.totalOutboundLiquidity=this.totalOutboundLiquidity+Math.floor(i.msatoshi_to_us/1e3)}),this.channelsStatus.active.channels=e.activeChannels.length||0,this.channelsStatus.pending.channels=e.pendingChannels.length||0,this.channelsStatus.inactive.channels=e.inactiveChannels.length||0,this.logger.info(e)}),this.store.select(f.Rn).pipe((0,_.R)(this.unSubs[3]),(0,at.M)(this.store.select(f.Wj))).subscribe(([e,i])=>{this.errorMessages[2]="",this.apiCallStatusBalance=e.apiCallStatus,this.apiCallStatusBalance.status===s.Bn.ERROR&&(this.errorMessages[2]="object"==typeof this.apiCallStatusBalance.message?JSON.stringify(this.apiCallStatusBalance.message):this.apiCallStatusBalance.message),this.errorMessages[3]="",this.apiCallStatusLRBal=i.apiCallStatus,this.apiCallStatusLRBal.status===s.Bn.ERROR&&(this.errorMessages[3]="object"==typeof this.apiCallStatusLRBal.message?JSON.stringify(this.apiCallStatusLRBal.message):this.apiCallStatusLRBal.message),this.totalBalance=e.balance,this.balances.onchain=e.balance.totalBalance,this.balances.lightning=i.localRemoteBalance.localBalance,this.balances.total=this.balances.lightning+this.balances.onchain,this.balances=Object.assign({},this.balances);const o=i.localRemoteBalance.localBalance?+i.localRemoteBalance.localBalance:0,l=i.localRemoteBalance.remoteBalance?+i.localRemoteBalance.remoteBalance:0;this.channelBalances={localBalance:o,remoteBalance:l,balancedness:+(1-Math.abs((o-l)/(o+l))).toFixed(3)},this.channelsStatus.active.capacity=i.localRemoteBalance.localBalance||0,this.channelsStatus.pending.capacity=i.localRemoteBalance.pendingBalance||0,this.channelsStatus.inactive.capacity=i.localRemoteBalance.inactiveBalance||0,this.logger.info(e),this.logger.info(i)})}onNavigateTo(e){this.router.navigateByUrl(e)}onsortChannelsBy(){"Balance Score"===this.sortField?(this.sortField="Capacity",this.activeChannelsCapacity=this.activeChannels.sort((e,i)=>{const o=+e.msatoshi_to_us+ +e.msatoshi_to_them,l=+i.msatoshi_to_them+ +i.msatoshi_to_them;return o>l?-1:o<l?1:0})):(this.sortField="Balance Score",this.activeChannelsCapacity=JSON.parse(JSON.stringify(this.commonService.sortDescByKey(this.activeChannels,"balancedness")))||[])}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(H.eX),t.Y36(R.v),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-home"]],decls:3,vars:2,consts:[["fxLayout","column",4,"ngIf","ngIfElse"],["merchantDashboard",""],["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start start",1,"page-title-container","mb-0"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["cols","10",3,"rowHeight"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],[3,"colspan","rowspan"],["fxFlex","100","fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","dashboard-card","mt-4"],["fxLayoutAlign","space-between center"],[1,"mr-1",3,"icon"],["mat-icon-button","","class","more-button","aria-label","Toggle menu",3,"matMenuTriggerFor",4,"ngIf"],["xPosition","before",1,"dashboard-vert-menu"],["menuOperator","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","column",3,"fxFlex","ngClass"],["mode","indeterminate",4,"ngIf"],["fxLayout","column","fxFlex","100",3,"ngSwitch"],["fxFlex","100",3,"information","showColorFieldSeparately",4,"ngSwitchCase"],["fxFlex","100",3,"balances","errorMessage",4,"ngSwitchCase"],["fxFlex","100",3,"sortBy","channelBalances","activeChannels","errorMessage",4,"ngSwitchCase"],["fxFlex","100",3,"fees","errorMessage",4,"ngSwitchCase"],["fxFlex","100",3,"channelsStatus","errorMessage",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mat-icon-button","","aria-label","Toggle menu",1,"more-button",3,"matMenuTriggerFor"],["mode","indeterminate"],["fxFlex","100",3,"information","showColorFieldSeparately"],["fxFlex","100",3,"balances","errorMessage"],["fxFlex","100",3,"sortBy","channelBalances","activeChannels","errorMessage"],["fxFlex","100",3,"fees","errorMessage"],["fxFlex","100",3,"channelsStatus","errorMessage"],["fxLayout","row","fxLayoutAlign","start end",1,"page-title-container","mb-0"],["cols","6",3,"rowHeight"],["fxFlex","100","fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","dashboard-card","mt-4",3,"ngClass"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",3,"fxFlex","ngClass"],["fxFlex","100",3,"information",4,"ngSwitchCase"],["fxFlex","100",3,"direction","totalLiquidity","activeChannels","errorMessage",4,"ngSwitchCase"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between start",4,"ngSwitchCase"],["menuMerchant","matMenu"],["fxFlex","100",3,"information"],["fxFlex","100",3,"direction","totalLiquidity","activeChannels","errorMessage"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between start"],["fxLayout","column",1,"w-100","dashboard-tabs-group"],["label","Receive"],[1,"h-100",3,"calledFrom"],["label","Pay"],[3,"calledFrom"],[3,"disabled"],["mat-tab-label",""],["mat-icon-button","","aria-label","Toggle menu",1,"more-button",2,"max-width","20px",3,"matMenuTriggerFor"],["menuTransactions","matMenu"]],template:function(e,i){if(1&e&&(t.YNc(0,qi,7,4,"div",0),t.YNc(1,Qi,6,4,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.selNode.userPersona===i.userPersonaEnum.OPERATOR)("ngIfElse",o)}},directives:[u.O5,p.xw,p.Wh,k.BN,ot.Il,u.sg,ot.DX,Z.a8,p.yH,Z.dk,Z.n5,ut.VK,ut.OP,Z.dn,u.mk,F.oO,u.RF,u.n9,u.ED,O.lW,ut.p6,pt.Hw,P.pW,yt,Gt,ee,Tt,Zt,ge,N.SP,N.uX,At,vt,N.uD],styles:[""]}),n})();var Bi=h(2331),Hi=h(5533),bt=h(4084),j=h(9966),tt=h(3050),W=h(4290);const Vi=["form"],zi=["formSweepAll"],Xi=["stepper"];function Gi(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Bitcoin address is required."),t.qZA())}function Wi(n,a){1&n&&(t.TgZ(0,"mat-hint"),t._uU(1,"Amount replaced by UTXO balance"),t.qZA())}function Ki(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.amountError)}}function $i(n,a){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function ji(n,a){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.feeRateId),t.xp6(1),t.hij(" ",e.feeRateType," ")}}function ta(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Min Confirmation Blocks is required."),t.qZA())}function ea(n,a){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",t.lcZ(2,2,e.value)," Sats")}}function na(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",37),t.TgZ(1,"mat-expansion-panel",38),t.NdJ("closed",function(){return t.CHM(e),t.oxw(2).onAdvancedPanelToggle(!0)})("opened",function(){return t.CHM(e),t.oxw(2).onAdvancedPanelToggle(!1)}),t.TgZ(2,"mat-expansion-panel-header"),t.TgZ(3,"mat-panel-title"),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",31),t.TgZ(7,"div",39),t.TgZ(8,"mat-form-field",40),t.TgZ(9,"mat-select",41),t.NdJ("selectionChange",function(o){return t.CHM(e),t.oxw(2).onUTXOSelectionChange(o)})("valueChange",function(o){return t.CHM(e),t.oxw(2).selUTXOs=o}),t.TgZ(10,"mat-select-trigger"),t._uU(11),t.ALo(12,"number"),t.qZA(),t.YNc(13,ea,3,4,"mat-option",21),t.qZA(),t.qZA(),t.TgZ(14,"mat-slide-toggle",42),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).flgUseAllBalance=o})("change",function(){return t.CHM(e),t.oxw(2).onUTXOAllBalanceChange()}),t._uU(15," Use selected UTXOs balance "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(e.advancedTitle),t.xp6(4),t.Q6J("value",e.selUTXOs),t.xp6(2),t.AsE("",t.lcZ(12,7,e.totalSelectedUTXOAmount)," Sats (",e.selUTXOs.length>1?e.selUTXOs.length+" UTXOs":"1 UTXO",")"),t.xp6(2),t.Q6J("ngForOf",e.utxos),t.xp6(1),t.Q6J("ngModel",e.flgUseAllBalance)("disabled",e.selUTXOs.length<1)}}function ia(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.sendFundError)}}function aa(n,a){if(1&n&&(t.TgZ(0,"div",43),t._UZ(1,"fa-icon",44),t.YNc(2,ia,2,1,"span",14),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(1),t.Q6J("ngIf",""!==e.sendFundError)}}function oa(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",9,10),t.NdJ("submit",function(){return t.CHM(e),t.oxw().onSendFunds()})("reset",function(){return t.CHM(e),t.oxw().resetData()}),t.TgZ(2,"mat-form-field",11),t.TgZ(3,"input",12,13),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().transaction.address=o}),t.qZA(),t.YNc(5,Gi,2,0,"mat-error",14),t.qZA(),t.TgZ(6,"mat-form-field",15),t.TgZ(7,"input",16,17),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().transaction.satoshis=o}),t.qZA(),t.YNc(9,Wi,2,0,"mat-hint",14),t.TgZ(10,"span",18),t._uU(11),t.qZA(),t.YNc(12,Ki,2,1,"mat-error",14),t.qZA(),t.TgZ(13,"mat-form-field",19),t.TgZ(14,"mat-select",20),t.NdJ("selectionChange",function(o){return t.CHM(e),t.oxw().onAmountUnitChange(o)}),t.YNc(15,$i,2,2,"mat-option",21),t.qZA(),t.qZA(),t.TgZ(16,"div",22),t.TgZ(17,"mat-form-field",23),t.TgZ(18,"mat-select",24),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw().transaction.feeRate=o}),t.YNc(19,ji,2,2,"mat-option",21),t.qZA(),t.qZA(),t.TgZ(20,"div",25),t.TgZ(21,"mat-checkbox",26),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().flgMinConf=o})("change",function(){t.CHM(e);const o=t.oxw();return o.flgMinConf?o.transaction.feeRate=null:o.transaction.minconf=null}),t.qZA(),t.TgZ(22,"mat-form-field",27),t.TgZ(23,"input",28,29),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().transaction.minconf=o}),t.qZA(),t.YNc(25,ta,2,0,"mat-error",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(26,na,16,9,"div",30),t._UZ(27,"div",31),t.YNc(28,aa,3,2,"div",32),t.TgZ(29,"div",33),t.TgZ(30,"button",34),t._uU(31,"Clear Fields"),t.qZA(),t.TgZ(32,"button",35),t._uU(33,"Send Funds"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.transaction.address),t.xp6(2),t.Q6J("ngIf",!e.transaction.address),t.xp6(2),t.Q6J("ngModel",e.transaction.satoshis)("type",e.flgUseAllBalance?"text":"number")("step",100)("min",0)("disabled",e.flgUseAllBalance),t.xp6(2),t.Q6J("ngIf",e.flgUseAllBalance),t.xp6(2),t.hij(" ",e.selAmountUnit," "),t.xp6(1),t.Q6J("ngIf",!e.transaction.satoshis),t.xp6(2),t.Q6J("value",e.selAmountUnit)("disabled",e.flgUseAllBalance),t.xp6(1),t.Q6J("ngForOf",e.amountUnits),t.xp6(3),t.Q6J("value",e.transaction.feeRate)("disabled",e.flgMinConf),t.xp6(1),t.Q6J("ngForOf",e.feeRateTypes),t.xp6(2),t.Q6J("ngModel",e.flgMinConf),t.xp6(2),t.Q6J("ngModel",e.transaction.minconf)("step",1)("min",0)("required",e.flgMinConf)("disabled",!e.flgMinConf),t.xp6(2),t.Q6J("ngIf",e.flgMinConf&&!e.transaction.minconf),t.xp6(1),t.Q6J("ngIf",e.isCompatibleVersion),t.xp6(2),t.Q6J("ngIf",""!==e.sendFundError)}}function sa(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw(3);t.Oqu(e.passwordFormLabel)}}function la(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required."),t.qZA())}function ra(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-step",49),t.TgZ(1,"form",69),t.YNc(2,sa,1,1,"ng-template",63),t.TgZ(3,"div",0),t.TgZ(4,"mat-form-field",1),t._UZ(5,"input",70),t.YNc(6,la,2,0,"mat-error",14),t.qZA(),t.qZA(),t.TgZ(7,"div",71),t.TgZ(8,"button",72),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onAuthenticate()}),t._uU(9,"Confirm"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("stepControl",e.passwordFormGroup)("editable",e.flgEditable),t.xp6(1),t.Q6J("formGroup",e.passwordFormGroup),t.xp6(5),t.Q6J("ngIf",null==e.passwordFormGroup.controls.password.errors?null:e.passwordFormGroup.controls.password.errors.required)}}function ca(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.Oqu(e.sendFundFormLabel)}}function ua(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Bitcoin address is required."),t.qZA())}function pa(n,a){if(1&n&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.feeRateId),t.xp6(1),t.hij(" ",e.feeRateType," ")}}function ma(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Fees Rate is required."),t.qZA())}function da(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Min confirmation blocks is required."),t.qZA())}function _a(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw(2);t.Oqu(e.confirmFormLabel)}}function ha(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.sendFundError)}}function fa(n,a){if(1&n&&(t.TgZ(0,"div",43),t._UZ(1,"fa-icon",44),t.YNc(2,ha,2,1,"span",14),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(1),t.Q6J("ngIf",""!==e.sendFundError)}}function ga(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",45),t.TgZ(1,"mat-vertical-stepper",46,47),t.NdJ("selectionChange",function(o){return t.CHM(e),t.oxw().stepSelectionChanged(o)}),t.YNc(3,ra,10,4,"mat-step",48),t.TgZ(4,"mat-step",49),t.TgZ(5,"form",50),t.YNc(6,ca,1,1,"ng-template",51),t.TgZ(7,"div",31),t.TgZ(8,"mat-form-field",1),t._UZ(9,"input",52),t.YNc(10,ua,2,0,"mat-error",14),t.qZA(),t.TgZ(11,"div",53),t.TgZ(12,"mat-form-field",54),t.TgZ(13,"mat-select",55),t.YNc(14,pa,2,2,"mat-option",21),t.qZA(),t.YNc(15,ma,2,0,"mat-error",14),t.qZA(),t.TgZ(16,"div",56),t._UZ(17,"mat-checkbox",57),t.TgZ(18,"mat-form-field",27),t._UZ(19,"input",58),t.YNc(20,da,2,0,"mat-error",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",59),t.TgZ(22,"button",60),t._uU(23,"Next"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"mat-step",61),t.TgZ(25,"form",62),t.YNc(26,_a,1,1,"ng-template",63),t.TgZ(27,"div",45),t.TgZ(28,"div",64),t._UZ(29,"fa-icon",65),t.TgZ(30,"span"),t._uU(31,"You are about to sweep all funds from RTL. Are you sure?"),t.qZA(),t.qZA(),t.YNc(32,fa,3,2,"div",32),t.TgZ(33,"div",59),t.TgZ(34,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSendFunds()}),t._uU(35,"Sweep All Funds"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",67),t.TgZ(37,"button",68),t._uU(38),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("ngIf",!e.appConfig.sso.rtlSSO),t.xp6(1),t.Q6J("stepControl",e.sendFundFormGroup)("editable",e.flgEditable),t.xp6(1),t.Q6J("formGroup",e.sendFundFormGroup),t.xp6(5),t.Q6J("ngIf",null==e.sendFundFormGroup.controls.transactionAddress.errors?null:e.sendFundFormGroup.controls.transactionAddress.errors.required),t.xp6(4),t.Q6J("ngForOf",e.feeRateTypes),t.xp6(1),t.Q6J("ngIf",null==e.sendFundFormGroup.controls.transactionFeeRate.errors?null:e.sendFundFormGroup.controls.transactionFeeRate.errors.required),t.xp6(4),t.Q6J("step",1)("min",0),t.xp6(1),t.Q6J("ngIf",null==e.sendFundFormGroup.controls.transactionBlocks.errors?null:e.sendFundFormGroup.controls.transactionBlocks.errors.required),t.xp6(4),t.Q6J("stepControl",e.confirmFormGroup),t.xp6(1),t.Q6J("formGroup",e.confirmFormGroup),t.xp6(4),t.Q6J("icon",e.faExclamationTriangle),t.xp6(3),t.Q6J("ngIf",""!==e.sendFundError),t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.Oqu(e.flgValidated?"Close":"Cancel")}}let St=(()=>{class n{constructor(e,i,o,l,m,v,J,T,I,am){this.dialogRef=e,this.data=i,this.logger=o,this.store=l,this.commonService=m,this.decimalPipe=v,this.actions=J,this.formBuilder=T,this.rtlEffects=I,this.snackBar=am,this.faExclamationTriangle=x.eHv,this.sweepAll=!1,this.selNode={},this.addressTypes=[],this.utxos=[],this.selUTXOs=[],this.flgUseAllBalance=!1,this.totalSelectedUTXOAmount=null,this.selectedAddress=s._t[1],this.blockchainBalance={},this.information={},this.isCompatibleVersion=!1,this.newAddress="",this.transaction={},this.feeRateTypes=s.vn,this.flgMinConf=!1,this.sendFundError="",this.fiatConversion=!1,this.amountUnits=s.uA,this.selAmountUnit=s.uA[0],this.currConvertorRate={},this.unitConversionValue=0,this.currencyUnitFormats=s.Xz,this.advancedTitle="Advanced Options",this.flgValidated=!1,this.flgEditable=!0,this.passwordFormLabel="Authenticate with your RTL password",this.sendFundFormLabel="Sweep funds",this.confirmFormLabel="Confirm sweep",this.amountError="Amount is Required.",this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x,new d.x,new d.x]}ngOnInit(){this.sweepAll=this.data.sweepAll,this.passwordFormGroup=this.formBuilder.group({hiddenPassword:["",[c.kI.required]],password:["",[c.kI.required]]}),this.sendFundFormGroup=this.formBuilder.group({transactionAddress:["",c.kI.required],transactionFeeRate:[null],flgMinConf:[!1],transactionBlocks:[{value:null,disabled:!0}]}),this.confirmFormGroup=this.formBuilder.group({}),this.sendFundFormGroup.controls.flgMinConf.valueChanges.pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{e?(this.sendFundFormGroup.controls.transactionBlocks.enable(),this.sendFundFormGroup.controls.transactionBlocks.setValidators([c.kI.required]),this.sendFundFormGroup.controls.transactionBlocks.setValue(null),this.sendFundFormGroup.controls.transactionFeeRate.disable(),this.sendFundFormGroup.controls.transactionFeeRate.setValue(null)):(this.sendFundFormGroup.controls.transactionBlocks.disable(),this.sendFundFormGroup.controls.transactionBlocks.setValidators(null),this.sendFundFormGroup.controls.transactionBlocks.setValue(null),this.sendFundFormGroup.controls.transactionBlocks.setErrors(null),this.sendFundFormGroup.controls.transactionFeeRate.enable(),this.sendFundFormGroup.controls.transactionFeeRate.setValue(null))}),(0,Bi.a)([this.store.select(bt.dT),this.store.select(bt.Yj)]).pipe((0,_.R)(this.unSubs[1])).subscribe(([e,i])=>{this.fiatConversion=e.settings.fiatConversion,this.amountUnits=e.settings.currencyUnits,this.appConfig=i}),this.store.select(f.W3).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.information=e,this.isCompatibleVersion=this.commonService.isVersionCompatible(this.information.version,"0.9.0")&&this.commonService.isVersionCompatible(this.information.api_version,"0.4.0")}),this.store.select(f.T4).pipe((0,_.R)(this.unSubs[3])).subscribe(e=>{this.utxos=this.commonService.sortAscByKey(e.utxos.filter(i=>"confirmed"===i.status),"value"),this.logger.info(e)}),this.actions.pipe((0,_.R)(this.unSubs[4]),(0,E.h)(e=>e.type===s.sW.UPDATE_API_CALL_STATUS_CL||e.type===s.sW.SET_CHANNEL_TRANSACTION_RES_CL)).subscribe(e=>{e.type===s.sW.SET_CHANNEL_TRANSACTION_RES_CL&&(this.store.dispatch((0,L.jW)({payload:"Fund Sent Successfully!"})),this.dialogRef.close()),e.type===s.sW.UPDATE_API_CALL_STATUS_CL&&e.payload.status===s.Bn.ERROR&&"SetChannelTransaction"===e.payload.action&&(this.sendFundError=e.payload.message)})}onAuthenticate(){if(!this.passwordFormGroup.controls.password.value)return!0;this.flgValidated=!1,this.store.dispatch((0,L.QO)({payload:Hi(this.passwordFormGroup.controls.password.value).toString()})),this.rtlEffects.isAuthorizedRes.pipe((0,z.q)(1)).subscribe(e=>{"ERROR"!==e?(this.passwordFormGroup.controls.hiddenPassword.setValue(this.passwordFormGroup.controls.password.value),this.stepper.next()):(this.dialogRef.close(),this.snackBar.open("Unauthorized User. Logging out from RTL."))})}onSendFunds(){if(this.invalidValues)return!0;this.sendFundError="",this.flgUseAllBalance&&(this.transaction.satoshis="all"),this.selUTXOs.length&&this.selUTXOs.length>0&&(this.transaction.utxos=[],this.selUTXOs.forEach(e=>this.transaction.utxos.push(e.txid+":"+e.output))),this.sweepAll?(this.transaction.satoshis="all",this.transaction.address=this.sendFundFormGroup.controls.transactionAddress.value,this.sendFundFormGroup.controls.flgMinConf.value?(delete this.transaction.feeRate,this.transaction.minconf=this.sendFundFormGroup.controls.transactionBlocks.value):(delete this.transaction.minconf,this.sendFundFormGroup.controls.transactionFeeRate.value?this.transaction.feeRate=this.sendFundFormGroup.controls.transactionFeeRate.value:delete this.transaction.feeRate),delete this.transaction.utxos,this.store.dispatch((0,y.Wi)({payload:this.transaction}))):this.transaction.satoshis&&"all"!==this.transaction.satoshis&&this.selAmountUnit!==s.NT.SATS?this.commonService.convertCurrency(+this.transaction.satoshis,this.selAmountUnit===this.amountUnits[2]?s.NT.OTHER:this.selAmountUnit,s.NT.SATS,this.amountUnits[2],this.fiatConversion).pipe((0,_.R)(this.unSubs[5])).subscribe({next:e=>{this.transaction.satoshis=e[s.NT.SATS],this.selAmountUnit=s.NT.SATS,this.store.dispatch((0,y.Wi)({payload:this.transaction}))},error:e=>{this.transaction.satoshis=null,this.selAmountUnit=s.NT.SATS,this.amountError="Conversion Error: "+e}}):this.store.dispatch((0,y.Wi)({payload:this.transaction}))}get invalidValues(){return this.sweepAll?!this.sendFundFormGroup.controls.transactionAddress.value||""===this.sendFundFormGroup.controls.transactionAddress.value||this.sendFundFormGroup.controls.flgMinConf.value&&(!this.sendFundFormGroup.controls.transactionBlocks.value||this.sendFundFormGroup.controls.transactionBlocks.value<=0):!this.transaction.address||""===this.transaction.address||!this.transaction.satoshis||+this.transaction.satoshis<=0||this.flgMinConf&&(!this.transaction.minconf||this.transaction.minconf<=0)}resetData(){this.sendFundError="",this.transaction={},this.flgMinConf=!1,this.totalSelectedUTXOAmount=null,this.selUTXOs=[],this.flgUseAllBalance=!1,this.selAmountUnit=s.uA[0]}stepSelectionChanged(e){switch(this.sendFundError="",e.selectedIndex){default:this.passwordFormLabel="Authenticate with your RTL password",this.sendFundFormLabel="Sweep funds";break;case 1:this.passwordFormLabel="User authenticated successfully",this.sendFundFormLabel="Sweep funds";break;case 2:this.passwordFormLabel="User authenticated successfully",this.sendFundFormLabel="Sweep funds | Address: "+this.sendFundFormGroup.controls.transactionAddress.value+(this.sendFundFormGroup.controls.flgMinConf.value?" | Min Confirmation Blocks: "+this.sendFundFormGroup.controls.transactionBlocks.value:this.sendFundFormGroup.controls.transactionFeeRate.value?" | Fee Rate: "+this.feeRateTypes.find(i=>i.feeRateId===this.sendFundFormGroup.controls.transactionFeeRate.value).feeRateType:"")}e.selectedIndex<e.previouslySelectedIndex&&0===e.selectedIndex&&this.passwordFormGroup.controls.hiddenPassword.setValue("")}onUTXOSelectionChange(e){const i={value:0};this.selUTXOs.length&&this.selUTXOs.length>0?(this.totalSelectedUTXOAmount=this.selUTXOs.reduce((o,l)=>(i.value=o.value+l.value,i)).value,this.flgUseAllBalance&&this.onUTXOAllBalanceChange()):(this.totalSelectedUTXOAmount=null,this.transaction.satoshis=null,this.flgUseAllBalance=!1)}onUTXOAllBalanceChange(){this.flgUseAllBalance?(this.transaction.satoshis=this.totalSelectedUTXOAmount,this.selAmountUnit=s.uA[0]):this.transaction.satoshis=null}onAmountUnitChange(e){const i=this,o=this.selAmountUnit===this.amountUnits[2]?s.NT.OTHER:this.selAmountUnit;let l=e.value===this.amountUnits[2]?s.NT.OTHER:e.value;this.transaction.satoshis&&this.selAmountUnit!==e.value&&this.commonService.convertCurrency(+this.transaction.satoshis,o,l,this.amountUnits[2],this.fiatConversion).pipe((0,_.R)(this.unSubs[6])).subscribe({next:m=>{this.selAmountUnit=e.value,i.transaction.satoshis=i.decimalPipe.transform(m[l],i.currencyUnitFormats[l]).replace(/,/g,"")},error:m=>{i.transaction.satoshis=null,this.amountError="Conversion Error: "+m,this.selAmountUnit=o,l=o}})}onAdvancedPanelToggle(e){this.advancedTitle=e&&this.selUTXOs.length&&this.selUTXOs.length>0?"Advanced Options | Selected UTXOs: "+this.selUTXOs.length+" | Selected UTXO Amount: "+this.decimalPipe.transform(this.totalSelectedUTXOAmount)+" Sats":"Advanced Options"}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(D.WI),t.Y36(q.mQ),t.Y36(b.yh),t.Y36(R.v),t.Y36(u.JJ),t.Y36(H.eX),t.Y36(c.qu),t.Y36(K.V),t.Y36(j.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-on-chain-send-modal"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Vi,7),t.Gf(zi,5),t.Gf(Xi,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.form=o.first),t.iGM(o=t.CRH())&&(i.formSweepAll=o.first),t.iGM(o=t.CRH())&&(i.stepper=o.first)}},decls:12,vars:4,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","8","fxFlex","5","fxLayoutAlign","center","default","","mat-button","",1,"btn-close-x","p-0",3,"mat-dialog-close"],[1,"padding-gap-x-large"],["fxLayout","row wrap","fxLayoutAlign","space-between start","fxFlex","100","class","overflow-x-hidden",3,"submit","reset",4,"ngIf","ngIfElse"],["sweepAllBlock",""],["fxLayout","row wrap","fxLayoutAlign","space-between start","fxFlex","100",1,"overflow-x-hidden",3,"submit","reset"],["form","ngForm"],["fxFlex","55"],["matInput","","autoFocus","","placeholder","Bitcoin Address","tabindex","1","name","address","required","",3,"ngModel","ngModelChange"],["address","ngModel"],[4,"ngIf"],["fxFlex","30"],["matInput","","placeholder","Amount","name","amount","tabindex","2","required","",3,"ngModel","type","step","min","disabled","ngModelChange"],["amount","ngModel"],["matSuffix",""],["fxFlex","10","fxLayoutAlign","start end"],["tabindex","3","required","","name","amountUnit",3,"value","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","60","fxLayoutAlign","space-between stretch","fxLayout","row wrap"],["fxFlex","48","fxLayoutAlign","start end"],["tabindex","6","placeholder","Fee Rate",3,"value","disabled","valueChange"],["fxFlex","48","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","2","tabindex","7","color","primary","name","flgMinConf","fxLayoutAlign","stretch start",1,"mr-2",3,"ngModel","ngModelChange","change"],["fxFlex","98"],["matInput","","placeholder","Min Confirmation Blocks","type","number","name","blocks","tabindex","8",3,"ngModel","step","min","required","disabled","ngModelChange"],["blocks","ngModel"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between stretch",4,"ngIf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxFlex","100","fxLayoutAlign","end center",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","7","type","reset",1,"mr-1"],["mat-flat-button","","color","primary","type","submit","tabindex","8"],[3,"value"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayout","column","fxFlex","100","expanded","false",1,"flat-expansion-panel","mt-2",3,"closed","opened"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between center"],["fxFlex","35","fxLayoutAlign","start end"],["tabindex","8","placeholder","Coin Selection","multiple","",3,"value","selectionChange","valueChange"],["fxFlex","60","tabindex","9","color","primary","name","flgUseAllBalance","matTooltip","Use selected UTXOs balance as the amount to be sent. Final amount sent will be less the mining fee.","matTooltipPosition","above",3,"ngModel","disabled","ngModelChange","change"],["fxFlex","100",1,"alert","alert-danger","mt-1"],[1,"mr-1","alert-icon",3,"icon"],["fxLayout","column"],[3,"linear","selectionChange"],["stepper",""],[3,"stepControl","editable",4,"ngIf"],[3,"stepControl","editable"],["fxLayout","column",1,"my-1","pr-1",3,"formGroup"],["matStepLabel","","disabled","true"],["matInput","","formControlName","transactionAddress","placeholder","Bitcoin Address","tabindex","4","name","address","required",""],["fxLayout","row wrap","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxFlex.gt-sm","48","fxLayoutAlign","start end"],["tabindex","5","placeholder","Fee Rate","formControlName","transactionFeeRate"],["fxFlex.gt-sm","48","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","2","tabindex","6","color","primary","formControlName","flgMinConf","name","flgMinCon",1,"mr-2"],["matInput","","formControlName","transactionBlocks","placeholder","Min Confirmation Blocks","type","number","name","blocks","tabindex","7","required","",3,"step","min"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","8","type","default","matStepperNext",""],[3,"stepControl"],["fxLayout","column","fxLayoutAlign","start",1,"my-1","pr-1",3,"formGroup"],["matStepLabel",""],["fxFlex","100",1,"w-100","alert","alert-warn"],[1,"mt-1","mr-1","alert-icon",3,"icon"],["mat-stroked-button","","color","primary","tabindex","9","type","button",3,"click"],["fxLayout","row","fxFlex","100","fxLayoutAlign","end center"],["mat-stroked-button","","color","primary","tabindex","12","type","button","default","",3,"mat-dialog-close"],["fxLayout","column","fxLayoutAlign","space-between",1,"my-1","pr-1",3,"formGroup"],["autoFocus","","matInput","","placeholder","Password","type","password","tabindex","1","formControlName","password","required",""],["fxLayout","row",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","3","type","default",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.YNc(9,oa,34,25,"form",7),t.qZA(),t.qZA(),t.qZA(),t.YNc(10,ga,39,17,"ng-template",null,8,t.W1O)),2&e){const o=t.MAs(11);t.xp6(5),t.Oqu(i.sweepAll?"Sweep All Funds":"Send Funds"),t.xp6(1),t.Q6J("mat-dialog-close",!1),t.xp6(3),t.Q6J("ngIf",!i.sweepAll)("ngIfElse",o)}},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,D.ZT,Z.dn,u.O5,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,V.h,c.Q7,c.JJ,c.On,G.q,g.R9,U.gD,u.sg,rt.oG,c.wV,c.qQ,g.TO,g.bx,B.ey,tt.ib,tt.yz,tt.yK,U.$L,st.Rr,Q.gM,k.BN,W.Vq,W.C0,c.sg,W.VY,c.u,W.Ic],pipes:[u.JJ],styles:[""]}),n})();var dt=h(2737);function Ca(n,a){1&n&&t._UZ(0,"mat-progress-bar",27)}function xa(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1," Transaction ID "),t.qZA())}function ya(n,a){1&n&&(t.TgZ(0,"span",36),t.TgZ(1,"mat-icon",37),t._uU(2,"warning"),t.qZA(),t.qZA())}function Ta(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ya,3,0,"span",35),t.qZA()),2&n){const e=t.oxw().$implicit;t.oxw();const i=t.MAs(32);t.xp6(1),t.Q6J("ngIf",e.value<1e3)("ngIfElse",i)}}function Za(n,a){1&n&&t._UZ(0,"span",38)}function Aa(n,a){if(1&n&&(t._UZ(0,"span",39),t.ALo(1,"titlecase")),2&n){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,1,e.status))}}const va=function(n){return{"max-width":n}};function La(n,a){if(1&n&&(t.TgZ(0,"td",29),t.TgZ(1,"span",30),t.YNc(2,Ta,2,2,"span",31),t.YNc(3,Za,1,0,"span",32),t.YNc(4,Aa,2,3,"span",33),t.TgZ(5,"span",34),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(5,va,i.screenSize===i.screenSizeEnum.XS?"10rem":"50rem")),t.xp6(1),t.Q6J("ngIf",i.numDustUTXOs>0&&!i.isDustUTXO),t.xp6(1),t.Q6J("ngIf","confirmed"===e.status),t.xp6(1),t.Q6J("ngIf","confirmed"!==e.status),t.xp6(2),t.Oqu(e.txid)}}function ba(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1," Output "),t.qZA())}function Sa(n,a){if(1&n&&(t.TgZ(0,"td",29),t.TgZ(1,"span",41),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.output)," ")}}function wa(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1," Value (Sats) "),t.qZA())}function qa(n,a){if(1&n&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.value))}}function Fa(n,a){if(1&n&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",t.lcZ(2,1,-1*e.value),")")}}function Ra(n,a){if(1&n&&(t.TgZ(0,"td",29),t.YNc(1,qa,3,3,"span",42),t.YNc(2,Fa,3,3,"span",43),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.value>0||0===e.value),t.xp6(1),t.Q6J("ngIf",e.value<0)}}function Oa(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1," Blockheight "),t.qZA())}function Ua(n,a){if(1&n&&(t.TgZ(0,"td",29),t.TgZ(1,"span",41),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.blockheight)," ")}}function ka(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",45),t.TgZ(1,"div",46),t.TgZ(2,"mat-select",47),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Na(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",49),t.TgZ(1,"button",50),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw().onUTXOClick(m,o)}),t._uU(2,"View Info"),t.qZA(),t.qZA()}}function Ia(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No utxos available."),t.qZA())}function Ma(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting utxos..."),t.qZA())}function Ea(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorMessage)}}function Pa(n,a){if(1&n&&(t.TgZ(0,"td",51),t.YNc(1,Ia,2,0,"p",31),t.YNc(2,Ma,2,0,"p",31),t.YNc(3,Ea,2,1,"p",31),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(!(null!=e.listUTXOs&&e.listUTXOs.data)||(null==e.listUTXOs||null==e.listUTXOs.data?null:e.listUTXOs.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.listUTXOs&&e.listUTXOs.data)||(null==e.listUTXOs||null==e.listUTXOs.data?null:e.listUTXOs.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.listUTXOs&&e.listUTXOs.data)||(null==e.listUTXOs||null==e.listUTXOs.data?null:e.listUTXOs.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}const Da=function(n){return{"display-none":n}};function Ja(n,a){if(1&n&&t._UZ(0,"tr",52),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,Da,(null==e.listUTXOs?null:e.listUTXOs.data)&&(null==e.listUTXOs||null==e.listUTXOs.data?null:e.listUTXOs.data.length)>0))}}function Qa(n,a){1&n&&t._UZ(0,"tr",53)}function Ya(n,a){1&n&&t._UZ(0,"tr",54)}function Ba(n,a){1&n&&t._UZ(0,"mat-icon",37)}const Ha=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},Va=function(){return["no_utxo"]};let za=(()=>{class n{constructor(e,i,o){this.logger=e,this.commonService=i,this.store=o,this.numDustUTXOs=0,this.isDustUTXO=!1,this.displayedColumns=[],this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.selFilter="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["txid","value","actions"]):this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["txid","output","value","blockheight","actions"]):(this.flgSticky=!0,this.displayedColumns=["txid","output","value","blockheight","actions"])}ngOnInit(){this.store.select(f.T4).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.logger.info(e)})}ngAfterViewInit(){this.utxos&&this.utxos.length>0&&this.sort&&this.paginator&&this.loadUTXOsTable(this.utxos)}ngOnChanges(){this.utxos&&this.utxos.length>0&&this.loadUTXOsTable(this.utxos)}applyFilter(){this.listUTXOs.filter=this.selFilter.trim().toLowerCase()}onUTXOClick(e,i){const o=[[{key:"txid",value:e.txid,title:"Transaction ID",width:100}],[{key:"output",value:e.output,title:"Output",width:50,type:s.Gi.NUMBER},{key:"value",value:e.value,title:"Value (Sats)",width:50,type:s.Gi.NUMBER}],[{key:"status",value:this.commonService.titleCase(e.status),title:"Status",width:50,type:s.Gi.STRING},{key:"blockheight",value:e.blockheight,title:"Blockheight",width:50,type:s.Gi.NUMBER}],[{key:"address",value:e.address,title:"Address",width:100}]];this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"UTXO Information",message:o}}}))}loadUTXOsTable(e){this.listUTXOs=new r.by([...e]),this.listUTXOs.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.listUTXOs.sort=this.sort,this.listUTXOs.filterPredicate=(i,o)=>JSON.stringify(i).toLowerCase().includes(o),this.listUTXOs.paginator=this.paginator,this.applyFilter(),this.logger.info(this.listUTXOs)}onDownloadCSV(){this.listUTXOs.data&&this.listUTXOs.data.length>0&&this.commonService.downloadFile(this.listUTXOs.data,"UTXOs")}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-on-chain-utxos"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},inputs:{numDustUTXOs:"numDustUTXOs",isDustUTXO:"isDustUTXO",utxos:"utxos"},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("UTXOs")}]),t.TTD],decls:33,vars:14,consts:[["fxLayout","row wrap","fxLayoutAlign","start start","fxLayout.gt-sm","column","fxFlex","100","fxLayoutAlign.gt-sm","start stretch",1,"padding-gap-x-large"],["fxLayout","column","fxLayout.gt-xs","row wrap","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["fxLayout","row","fxLayoutAlign","start start"],["fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","txid"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","output"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","value"],["matColumnDef","blockheight"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","class","pl-3","fxLayoutAlign","end center",4,"matCellDef"],["matColumnDef","no_utxo"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["emptySpace",""],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["fxLayout","row",1,"ellipsis-parent",3,"ngStyle"],[4,"ngIf"],["class","dot green","matTooltip","Confirmed","matTooltipPosition","right",4,"ngIf"],["class","dot yellow","matTooltipPosition","right",3,"matTooltip",4,"ngIf"],[1,"ellipsis-child"],["matTooltip","Risk of dust attack","matTooltipPosition","right",4,"ngIf","ngIfElse"],["matTooltip","Risk of dust attack","matTooltipPosition","right"],["fxLayoutAlign","start center","color","warn",1,"mr-1"],["matTooltip","Confirmed","matTooltipPosition","right",1,"dot","green"],["matTooltipPosition","right",1,"dot","yellow",3,"matTooltip"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["fxLayoutAlign","end center",4,"ngIf"],["fxLayoutAlign","end center","class","red",4,"ngIf"],["fxLayoutAlign","end center",1,"red"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"pl-3"],["mat-stroked-button","","color","primary","type","button","tabindex","4",3,"click"],["mat-footer-cell","","colspan","4"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"input",4),t.NdJ("keyup",function(){return i.applyFilter()})("ngModelChange",function(l){return i.selFilter=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.YNc(7,Ca,1,0,"mat-progress-bar",7),t.TgZ(8,"table",8,9),t.ynx(10,10),t.YNc(11,xa,2,0,"th",11),t.YNc(12,La,7,7,"td",12),t.BQk(),t.ynx(13,13),t.YNc(14,ba,2,0,"th",14),t.YNc(15,Sa,4,3,"td",12),t.BQk(),t.ynx(16,15),t.YNc(17,wa,2,0,"th",14),t.YNc(18,Ra,3,2,"td",12),t.BQk(),t.ynx(19,16),t.YNc(20,Oa,2,0,"th",14),t.YNc(21,Ua,4,3,"td",12),t.BQk(),t.ynx(22,17),t.YNc(23,ka,6,0,"th",18),t.YNc(24,Na,3,0,"td",19),t.BQk(),t.ynx(25,20),t.YNc(26,Pa,4,3,"td",21),t.BQk(),t.YNc(27,Ja,1,3,"tr",22),t.YNc(28,Qa,1,0,"tr",23),t.YNc(29,Ya,1,0,"tr",24),t.qZA(),t._UZ(30,"mat-paginator",25),t.qZA(),t.qZA(),t.qZA(),t.YNc(31,Ba,1,0,"ng-template",null,26,t.W1O)),2&e&&(t.xp6(4),t.Q6J("ngModel",i.selFilter),t.xp6(3),t.Q6J("ngIf",(null==i.apiCallStatus?null:i.apiCallStatus.status)===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",i.listUTXOs)("ngClass",t.VKq(11,Ha,""!==i.errorMessage)),t.xp6(19),t.Q6J("matFooterRowDef",t.DdM(13,Va)),t.xp6(1),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",i.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions)("showFirstLastButtons",i.screenSize!==i.screenSizeEnum.XS))},directives:[p.xw,p.Wh,p.yH,g.KE,M.Nt,c.Fj,c.JJ,c.On,Y.$V,u.O5,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,u.PC,F.Zl,Q.gM,pt.Hw,U.gD,U.$L,B.ey,O.lW,r.yh,r.Q2,r.XQ,r.Gk],pipes:[u.rS,u.JJ],styles:[".mat-column-txid[_ngcontent-%COMP%]{flex:0 0 15%;width:15%}.mat-column-txid[_ngcontent-%COMP%]   .ellipsis-parent[_ngcontent-%COMP%]{display:flex}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();var _t=h(4377);function Xa(n,a){if(1&n&&(t.TgZ(0,"span",5),t._uU(1,"UTXOs"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.numUtxos)}}function Ga(n,a){if(1&n&&(t.TgZ(0,"span",5),t._uU(1,"Dust UTXOs"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.numDustUtxos)}}let Wa=(()=>{class n{constructor(e,i){this.logger=e,this.store=i,this.selectedTableIndex=0,this.selectedTableIndexChange=new t.vpe,this.utxos=[],this.numUtxos=0,this.dustUtxos=[],this.numDustUtxos=0,this.unSubs=[new d.x,new d.x]}ngOnInit(){this.store.select(f.T4).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{e.utxos&&e.utxos.length>0&&(this.utxos=e.utxos,this.numUtxos=this.utxos.length,this.dustUtxos=e.utxos.filter(i=>+i.value<1e3),this.numDustUtxos=this.dustUtxos.length),e.utxos&&e.utxos.length>0&&(this.utxos=e.utxos,this.numUtxos=this.utxos.length),this.logger.info(e)})}onSelectedIndexChanged(e){this.selectedTableIndexChange.emit(e)}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-utxo-tables"]],inputs:{selectedTableIndex:"selectedTableIndex"},outputs:{selectedTableIndexChange:"selectedTableIndexChange"},decls:8,vars:7,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch",1,"bordered-box"],[3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["xLayout","row","fxFlex","100",3,"utxos","numDustUTXOs","isDustUTXO"],["fxLayout","row","fxFlex","100",3,"utxos","numDustUTXOs","isDustUTXO"],["matBadgeOverlap","false",1,"tab-badge",3,"matBadge"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedIndexChange",function(l){return i.onSelectedIndexChanged(l)}),t.TgZ(2,"mat-tab"),t.YNc(3,Xa,2,1,"ng-template",2),t._UZ(4,"rtl-cl-on-chain-utxos",3),t.qZA(),t.TgZ(5,"mat-tab"),t.YNc(6,Ga,2,1,"ng-template",2),t._UZ(7,"rtl-cl-on-chain-utxos",4),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("selectedIndex",i.selectedTableIndex),t.xp6(3),t.Q6J("utxos",i.utxos)("numDustUTXOs",i.numDustUtxos)("isDustUTXO",!1),t.xp6(3),t.Q6J("utxos",i.dustUtxos)("numDustUTXOs",i.numDustUtxos)("isDustUTXO",!0))},directives:[p.xw,p.yH,p.Wh,N.SP,N.uX,N.uD,za,_t.k],styles:[""]}),n})();const Ka=function(n,a){return[n,a]};function $a(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeLink=null==l?null:l.link}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.Q6J("active",i.activeLink===(null==e?null:e.link))("routerLink",t.WLB(3,Ka,null==e?null:e.link,null==i.selectedTable?null:i.selectedTable.name)),t.xp6(1),t.Oqu(null==e?null:e.name)}}let ja=(()=>{class n{constructor(e,i,o){this.store=e,this.router=i,this.activatedRoute=o,this.selNode={},this.faExchangeAlt=x.Ssp,this.faChartPie=x.OS1,this.balances=[{title:"Total Balance",dataValue:0},{title:"Confirmed",dataValue:0},{title:"Unconfirmed",dataValue:0}],this.links=[{link:"receive",name:"Receive"},{link:"send",name:"Send"},{link:"sweep",name:"Sweep All"}],this.activeLink=this.links[0].link,this.tables=[{id:0,name:"utxos"},{id:1,name:"dustUtxos"}],this.selectedTable=this.tables[0],this.unSubs=[new d.x,new d.x,new d.x,new d.x]}ngOnInit(){const e=this.links.find(i=>this.router.url.includes(i.link));this.activeLink=e?e.link:this.links[0].link,this.selectedTable=this.tables.find(i=>i.name===this.router.url.substring(this.router.url.lastIndexOf("/")+1)),this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(i=>i instanceof C.Av)).subscribe(i=>{const o=this.links.find(l=>i.urlAfterRedirects.includes(l.link));this.activeLink=o?o.link:this.links[0].link,this.selectedTable=this.tables.find(l=>l.name===i.urlAfterRedirects.substring(i.urlAfterRedirects.lastIndexOf("/")+1))}),this.store.select(f.Jo).pipe((0,_.R)(this.unSubs[1])).subscribe(i=>{this.selNode=i}),this.store.select(f.Rn).pipe((0,_.R)(this.unSubs[2])).subscribe(i=>{this.balances=[{title:"Total Balance",dataValue:i.balance.totalBalance||0},{title:"Confirmed",dataValue:i.balance.confBalance},{title:"Unconfirmed",dataValue:i.balance.unconfBalance}]})}openSendFundsModal(e){this.store.dispatch((0,L.qR)({payload:{data:{sweepAll:e,component:St}}}))}onSelectedTableIndexChanged(e){this.selectedTable=this.tables.find(i=>i.id===e),this.router.navigate(["./",this.activeLink,this.selectedTable.name],{relativeTo:this.activatedRoute})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh),t.Y36(C.F0),t.Y36(C.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-on-chain"]],decls:21,vars:5,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x","mb-4"],["fxLayout","column"],[3,"values"],["fxLayout","column",1,"padding-gap-x"],["mat-tab-nav-bar",""],["role","tab","mat-tab-link","","class","mat-tab-label",3,"active","routerLink","click",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"mat-tab-body-wrapper"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap-x-large"],["fxLayout","row","fxFlex","100",3,"selectedTableIndex","selectedTableIndexChange"],["role","tab","mat-tab-link","",1,"mat-tab-label",3,"active","routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"fa-icon",1),t.TgZ(2,"span",2),t._uU(3,"On-chain Balance"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-card"),t.TgZ(6,"mat-card-content",4),t._UZ(7,"rtl-currency-unit-converter",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t._UZ(9,"fa-icon",1),t.TgZ(10,"span",2),t._uU(11,"On-chain Transactions"),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"mat-card"),t.TgZ(14,"mat-card-content",4),t.TgZ(15,"nav",7),t.YNc(16,$a,2,6,"div",8),t.qZA(),t.TgZ(17,"div",9),t._UZ(18,"router-outlet"),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"rtl-cl-utxo-tables",11),t.NdJ("selectedTableIndexChange",function(l){return i.onSelectedTableIndexChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",i.faChartPie),t.xp6(6),t.Q6J("values",i.balances),t.xp6(2),t.Q6J("icon",i.faExchangeAlt),t.xp6(7),t.Q6J("ngForOf",i.links),t.xp6(4),t.Q6J("selectedTableIndex",null==i.selectedTable?null:i.selectedTable.id))},directives:[p.xw,p.Wh,k.BN,Z.a8,Z.dn,dt.D,N.BU,u.sg,p.yH,C.lC,Wa,N.Nj,C.rH],styles:[""]}),n})();function to(n,a){if(1&n&&(t.TgZ(0,"span",10),t._uU(1,"Channels"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.activeChannels)}}function eo(n,a){if(1&n&&(t.TgZ(0,"span",10),t._uU(1,"Peers"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.activePeers)}}let no=(()=>{class n{constructor(e,i,o){this.store=e,this.logger=i,this.router=o,this.activePeers=0,this.activeChannels=0,this.faUsers=x.FVb,this.faChartPie=x.OS1,this.balances=[{title:"Total Balance",dataValue:0},{title:"Confirmed",dataValue:0},{title:"Unconfirmed",dataValue:0}],this.links=[{link:"channels",name:"Channels"},{link:"peers",name:"Peers"}],this.activeLink=0,this.unSubs=[new d.x,new d.x,new d.x,new d.x]}ngOnInit(){this.activeLink=this.links.findIndex(e=>e.link===this.router.url.substring(this.router.url.lastIndexOf("/")+1)),this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(e=>e instanceof C.Av)).subscribe(e=>{this.activeLink=this.links.findIndex(i=>i.link===e.urlAfterRedirects.substring(e.urlAfterRedirects.lastIndexOf("/")+1))}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.activeChannels=e.activeChannels.length||0}),this.store.select(f.Wi).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.activePeers=e.peers&&e.peers.length?e.peers.length:0,this.logger.info(e)}),this.store.select(f.Rn).pipe((0,_.R)(this.unSubs[3])).subscribe(e=>{this.balances=[{title:"Total Balance",dataValue:e.balance.totalBalance||0},{title:"Confirmed",dataValue:e.balance.confBalance},{title:"Unconfirmed",dataValue:e.balance.unconfBalance}]})}onSelectedTabChange(e){this.router.navigateByUrl("/cl/connections/"+this.links[e.index].link)}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh),t.Y36(q.mQ),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-connections"]],decls:22,vars:4,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x","mb-4"],["fxLayout","column"],[3,"values"],["fxLayout","column",1,"padding-gap-x"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],["mat-tab-label",""],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap-x-large"],["matBadgeOverlap","false",1,"tab-badge",3,"matBadge"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"fa-icon",1),t.TgZ(2,"span",2),t._uU(3,"On-chain Balance"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-card"),t.TgZ(6,"mat-card-content",4),t._UZ(7,"rtl-currency-unit-converter",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t._UZ(9,"fa-icon",1),t.TgZ(10,"span",2),t._uU(11,"Connections"),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"mat-card"),t.TgZ(14,"mat-card-content",4),t.TgZ(15,"mat-tab-group",7),t.NdJ("selectedIndexChange",function(l){return i.activeLink=l})("selectedTabChange",function(l){return i.onSelectedTabChange(l)}),t.TgZ(16,"mat-tab"),t.YNc(17,to,2,1,"ng-template",8),t.qZA(),t.TgZ(18,"mat-tab"),t.YNc(19,eo,2,1,"ng-template",8),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t._UZ(21,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",i.faChartPie),t.xp6(6),t.Q6J("values",i.balances),t.xp6(2),t.Q6J("icon",i.faUsers),t.xp6(6),t.Q6J("selectedIndex",i.activeLink))},directives:[p.xw,p.Wh,k.BN,Z.a8,Z.dn,dt.D,N.SP,N.uX,N.uD,p.yH,C.lC,_t.k],styles:[""]}),n})();function io(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeLink=l.link}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.s9C("routerLink",e.link),t.Q6J("active",i.activeLink===e.link),t.xp6(1),t.Oqu(e.name)}}let ao=(()=>{class n{constructor(e,i,o){this.logger=e,this.store=i,this.router=o,this.faExchangeAlt=x.Ssp,this.faChartPie=x.OS1,this.currencyUnits=[],this.balances=[{title:"Local Capacity",dataValue:0,tooltip:"Amount you can send"},{title:"Remote Capacity",dataValue:0,tooltip:"Amount you can receive"}],this.links=[{link:"payments",name:"Payments"},{link:"invoices",name:"Invoices"},{link:"queryroutes",name:"Query Routes"}],this.activeLink=this.links[0].link,this.unSubs=[new d.x,new d.x,new d.x,new d.x]}ngOnInit(){const e=this.links.find(i=>this.router.url.includes(i.link));this.activeLink=e?e.link:this.links[0].link,this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(i=>i instanceof C.Av)).subscribe(i=>{const o=this.links.find(l=>i.urlAfterRedirects.includes(l.link));this.activeLink=o?o.link:this.links[0].link}),this.store.select(f.Wj).pipe((0,_.R)(this.unSubs[1]),(0,at.M)(this.store.select(f.Jo))).subscribe(([i,o])=>{this.currencyUnits=o.currencyUnits,this.balances=o.userPersona===s.ol.OPERATOR?[{title:"Local Capacity",dataValue:i.localRemoteBalance.localBalance,tooltip:"Amount you can send"},{title:"Remote Capacity",dataValue:i.localRemoteBalance.remoteBalance,tooltip:"Amount you can receive"}]:[{title:"Outbound Capacity",dataValue:i.localRemoteBalance.localBalance,tooltip:"Amount you can send"},{title:"Inbound Capacity",dataValue:i.localRemoteBalance.remoteBalance,tooltip:"Amount you can receive"}],this.logger.info(i)})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-transactions"]],decls:19,vars:4,consts:[["fxLayout","row wrap","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x","mb-4"],["fxLayout","column"],[3,"values"],["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],["fxLayout","column",1,"padding-gap-x"],["mat-tab-nav-bar",""],["role","tab","mat-tab-link","","class","mat-tab-label",3,"active","routerLink","click",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"mat-tab-body-wrapper"],["role","tab","mat-tab-link","",1,"mat-tab-label",3,"active","routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"fa-icon",1),t.TgZ(2,"span",2),t._uU(3,"Lightning Balance"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-card"),t.TgZ(6,"mat-card-content",4),t._UZ(7,"rtl-currency-unit-converter",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"fa-icon",1),t.TgZ(10,"span",2),t._uU(11,"Lightning Transactions"),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"mat-card"),t.TgZ(14,"mat-card-content",4),t.TgZ(15,"nav",8),t.YNc(16,io,2,3,"div",9),t.qZA(),t.TgZ(17,"div",10),t._UZ(18,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",i.faChartPie),t.xp6(6),t.Q6J("values",i.balances),t.xp6(2),t.Q6J("icon",i.faExchangeAlt),t.xp6(7),t.Q6J("ngForOf",i.links))},directives:[p.xw,p.Wh,k.BN,Z.a8,Z.dn,dt.D,N.BU,u.sg,p.yH,C.lC,N.Nj,C.rH],styles:[""]}),n})();function oo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeLink=l.link}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.s9C("routerLink",e.link),t.Q6J("active",i.activeLink===e.link),t.xp6(1),t.Oqu(e.name)}}let so=(()=>{class n{constructor(e){this.router=e,this.faMapSigns=x.SuH,this.links=[{link:"forwardinghistory",name:"Forwarding History"},{link:"routingpeers",name:"Routing Peers"},{link:"failedtransactions",name:"Failed Transactions"}],this.activeLink=this.links[0].link,this.unSubs=[new d.x,new d.x,new d.x]}ngOnInit(){const e=this.links.find(i=>this.router.url.includes(i.link));this.activeLink=e?e.link:this.links[0].link,this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(i=>i instanceof C.Av)).subscribe(i=>{const o=this.links.find(l=>i.urlAfterRedirects.includes(l.link));this.activeLink=o?o.link:this.links[0].link})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-routing"]],decls:13,vars:2,consts:[["fxLayout","column",1,"mb-2"],["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start start",1,"padding-gap-x"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start start"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch"],["fxLayout","row","fxFlex","100"],["mat-tab-nav-bar","","fxFlex","100"],["role","tab","mat-tab-link","","class","mat-tab-label",3,"active","routerLink","click",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch",1,"padding-gap-x-large"],["role","tab","mat-tab-link","",1,"mat-tab-label",3,"active","routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"fa-icon",2),t.TgZ(3,"span",3),t._uU(4,"Routing"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"mat-card",5),t.TgZ(7,"mat-card-content",6),t.TgZ(8,"div",7),t.TgZ(9,"nav",8),t.YNc(10,oo,2,3,"div",9),t.qZA(),t.qZA(),t.TgZ(11,"div",10),t._UZ(12,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("icon",i.faMapSigns),t.xp6(8),t.Q6J("ngForOf",i.links))},directives:[p.xw,p.Wh,k.BN,p.yH,Z.a8,Z.dn,N.BU,u.sg,C.lC,N.Nj,C.rH],styles:[""]}),n})();var nt=h(1979);function lo(n,a){if(1&n&&(t.TgZ(0,"span",8),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function ro(n,a){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Type"),t.qZA())}function co(n,a){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.type," ")}}function uo(n,a){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Address"),t.qZA())}function po(n,a){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.address," ")}}function mo(n,a){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Port"),t.qZA())}function _o(n,a){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.port," ")}}function ho(n,a){1&n&&(t.TgZ(0,"th",28),t.TgZ(1,"span",29),t._uU(2,"Actions"),t.qZA(),t.qZA())}function fo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",30),t.TgZ(1,"span",29),t.TgZ(2,"button",31),t.NdJ("copied",function(o){return t.CHM(e),t.oxw(2).onCopyNodeURI(o)}),t._uU(3,"Copy Node URI"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("payload",(null==i.lookupResult?null:i.lookupResult.nodeid)+"@"+e.address+":"+e.port)}}function go(n,a){1&n&&t._UZ(0,"tr",32)}function Co(n,a){1&n&&t._UZ(0,"tr",33)}const xo=function(n){return{"background-color":n}};function yo(n,a){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"mat-divider",2),t.TgZ(2,"div",3),t.TgZ(3,"h4",4),t._uU(4,"Pub Key"),t.qZA(),t.TgZ(5,"span",5),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"mat-divider",6),t.TgZ(8,"div",7),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11,"Alias"),t.qZA(),t.TgZ(12,"span",8),t._uU(13),t.TgZ(14,"span",9),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(16,"mat-divider",6),t.TgZ(17,"div",7),t.TgZ(18,"div",3),t.TgZ(19,"h4",4),t._uU(20,"Last Update"),t.qZA(),t.TgZ(21,"span",8),t._uU(22),t.ALo(23,"date"),t.qZA(),t.qZA(),t.qZA(),t._UZ(24,"mat-divider",6),t.TgZ(25,"div",7),t.TgZ(26,"div",3),t.TgZ(27,"h4",4),t._uU(28,"Features"),t.qZA(),t.YNc(29,lo,2,1,"span",10),t.qZA(),t.qZA(),t._UZ(30,"mat-divider",6),t.TgZ(31,"div",11),t.TgZ(32,"h4",12),t._uU(33,"Addresses"),t.qZA(),t.TgZ(34,"div",13),t.TgZ(35,"table",14,15),t.ynx(37,16),t.YNc(38,ro,2,0,"th",17),t.YNc(39,co,2,1,"td",18),t.BQk(),t.ynx(40,19),t.YNc(41,uo,2,0,"th",17),t.YNc(42,po,2,1,"td",18),t.BQk(),t.ynx(43,20),t.YNc(44,mo,2,0,"th",17),t.YNc(45,_o,2,1,"td",18),t.BQk(),t.ynx(46,21),t.YNc(47,ho,3,0,"th",22),t.YNc(48,fo,4,1,"td",23),t.BQk(),t.YNc(49,go,1,0,"tr",24),t.YNc(50,Co,1,0,"tr",25),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult?null:e.lookupResult.nodeid),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(null==e.lookupResult?null:e.lookupResult.alias),t.xp6(1),t.Q6J("ngStyle",t.VKq(17,xo,"#"+(null==e.lookupResult?null:e.lookupResult.color))),t.xp6(1),t.Oqu(null!=e.lookupResult&&e.lookupResult.color?"#"+(null==e.lookupResult?null:e.lookupResult.color):""),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(t.xi3(23,14,1e3*(null==e.lookupResult?null:e.lookupResult.last_timestamp),"dd/MMM/YYYY HH:mm")),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Q6J("ngForOf",e.featureDescriptions),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Q6J("dataSource",e.addresses),t.xp6(14),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let To=(()=>{class n{constructor(e,i){this.logger=e,this.snackBar=i,this.featureDescriptions=[],this.displayedColumns=["type","address","port","actions"]}ngOnInit(){this.addresses=new r.by(this.lookupResult&&this.lookupResult.addresses?[...this.lookupResult.addresses]:[]),this.addresses.data=this.lookupResult.addresses||[],this.addresses.sort=this.sort,this.addresses.sortingDataAccessor=(e,i)=>e[i]&&isNaN(e[i])?e[i].toLocaleLowerCase():e[i]?+e[i]:null,this.lookupResult.features&&""!==this.lookupResult.features.trim()&&s._C.forEach(e=>{parseInt(this.lookupResult.features,16)&(1<<e.range.min|1<<e.range.max)&&this.featureDescriptions.push(e.description)})}onCopyNodeURI(e){this.snackBar.open("Node URI copied."),this.logger.info("Copied Text: "+e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(j.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-node-lookup"]],viewQuery:function(e,i){if(1&e&&t.Gf(A.YE,5),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},inputs:{lookupResult:"lookupResult"},decls:1,vars:1,consts:[["fxLayout","column","class","mt-1",4,"ngIf"],["fxLayout","column",1,"mt-1"],[1,"mb-1",3,"inset"],["fxLayout","column","fxFlex","100","fxLayoutAlign","end start",1,"my-1"],["fxLayoutAlign","start",1,"font-bold-500"],[1,"foreground-secondary-text","w-100"],[1,"my-1",3,"inset"],["fxLayout","row"],[1,"foreground-secondary-text"],[1,"ml-2",3,"ngStyle"],["class","foreground-secondary-text",4,"ngFor","ngForOf"],["fxLayout","column",1,"mt-2"],["fxFlex","100","fxLayoutAlign","start",1,"font-bold-500","mb-1"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mat-table","","matSort","",1,"overflow-auto",3,"dataSource"],["table",""],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","port"],["matColumnDef","actions"],["mat-header-cell","","class","pl-1",4,"matHeaderCellDef"],["mat-cell","","class","pl-1",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"pl-1"],["fxLayoutAlign","end center"],["mat-cell","",1,"pl-1"],["mat-stroked-button","","color","primary","type","button","tabindex","1","rtlClipboard","",3,"payload","copied"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&t.YNc(0,yo,51,19,"div",0),2&e&&t.Q6J("ngIf",i.lookupResult)},directives:[u.O5,p.xw,X.d,p.yH,p.Wh,u.PC,F.Zl,u.sg,Y.$V,r.BZ,A.YE,r.w1,r.fO,r.Dz,r.as,r.nj,r.ge,A.nU,r.ev,O.lW,nt.y,r.XQ,r.Gk],pipes:[u.uU],styles:[""]}),n})();function Zo(n,a){1&n&&(t.TgZ(0,"h3",11),t._uU(1,"Node 1"),t.qZA())}function Ao(n,a){1&n&&(t.TgZ(0,"h3",11),t._uU(1,"Node 1 (Your Node)"),t.qZA())}function vo(n,a){1&n&&(t.TgZ(0,"h3",11),t._uU(1,"Node 2"),t.qZA())}function Lo(n,a){1&n&&(t.TgZ(0,"h3",11),t._uU(1,"Node 2 (Your Node)"),t.qZA())}function bo(n,a){if(1&n&&(t.TgZ(0,"div",1),t._UZ(1,"mat-divider"),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.YNc(5,Zo,2,0,"h3",5),t.YNc(6,Ao,2,0,"h3",5),t.qZA(),t._UZ(7,"mat-divider",6),t.TgZ(8,"div",7),t.TgZ(9,"h4",8),t._uU(10,"Short Channel Id"),t.qZA(),t.TgZ(11,"span",9),t._uU(12),t.qZA(),t.qZA(),t._UZ(13,"mat-divider",6),t.TgZ(14,"div",10),t.TgZ(15,"h4",8),t._uU(16,"Active"),t.qZA(),t.TgZ(17,"span",9),t._uU(18),t.qZA(),t.qZA(),t._UZ(19,"mat-divider",6),t.TgZ(20,"div",10),t.TgZ(21,"h4",8),t._uU(22,"Last Update"),t.qZA(),t.TgZ(23,"span",9),t._uU(24),t.qZA(),t.qZA(),t._UZ(25,"mat-divider",6),t.TgZ(26,"div",10),t.TgZ(27,"h4",8),t._uU(28,"Amount (mSats)"),t.qZA(),t.TgZ(29,"span",9),t._uU(30),t.qZA(),t.qZA(),t._UZ(31,"mat-divider",6),t.TgZ(32,"div",10),t.TgZ(33,"h4",8),t._uU(34,"Base Fee (mSats)"),t.qZA(),t.TgZ(35,"span",9),t._uU(36),t.ALo(37,"number"),t.qZA(),t.qZA(),t._UZ(38,"mat-divider",6),t.TgZ(39,"div",10),t.TgZ(40,"h4",8),t._uU(41,"Channel Flags"),t.qZA(),t.TgZ(42,"span",9),t._uU(43),t.ALo(44,"number"),t.qZA(),t.qZA(),t._UZ(45,"mat-divider",6),t.TgZ(46,"div",10),t.TgZ(47,"h4",8),t._uU(48,"Delay"),t.qZA(),t.TgZ(49,"span",9),t._uU(50),t.ALo(51,"number"),t.qZA(),t.qZA(),t._UZ(52,"mat-divider",6),t.TgZ(53,"div",10),t.TgZ(54,"h4",8),t._uU(55,"Destination"),t.qZA(),t.TgZ(56,"span",9),t._uU(57),t.qZA(),t.qZA(),t._UZ(58,"mat-divider",6),t.TgZ(59,"div",10),t.TgZ(60,"h4",8),t._uU(61,"Fee/Millionth"),t.qZA(),t.TgZ(62,"span",9),t._uU(63),t.ALo(64,"number"),t.qZA(),t.qZA(),t._UZ(65,"mat-divider",6),t.TgZ(66,"div",10),t.TgZ(67,"h4",8),t._uU(68,"Max Htlc (mSat)"),t.qZA(),t.TgZ(69,"span",9),t._uU(70),t.qZA(),t.qZA(),t._UZ(71,"mat-divider",6),t.TgZ(72,"div",10),t.TgZ(73,"h4",8),t._uU(74,"Min Htlc (mSat)"),t.qZA(),t.TgZ(75,"span",9),t._uU(76),t.qZA(),t.qZA(),t._UZ(77,"mat-divider",6),t.TgZ(78,"div",10),t.TgZ(79,"h4",8),t._uU(80,"Message Flags"),t.qZA(),t.TgZ(81,"span",9),t._uU(82),t.ALo(83,"number"),t.qZA(),t.qZA(),t._UZ(84,"mat-divider",6),t.TgZ(85,"div",10),t.TgZ(86,"h4",8),t._uU(87,"Public"),t.qZA(),t.TgZ(88,"span",9),t._uU(89),t.qZA(),t.qZA(),t._UZ(90,"mat-divider",6),t.TgZ(91,"div",10),t.TgZ(92,"h4",8),t._uU(93,"Satoshis"),t.qZA(),t.TgZ(94,"span",9),t._uU(95),t.ALo(96,"number"),t.qZA(),t.qZA(),t._UZ(97,"mat-divider",6),t.TgZ(98,"div",10),t.TgZ(99,"h4",8),t._uU(100,"Source"),t.qZA(),t.TgZ(101,"span",9),t._uU(102),t.qZA(),t.qZA(),t.qZA(),t.TgZ(103,"div",3),t.TgZ(104,"div"),t.YNc(105,vo,2,0,"h3",5),t.YNc(106,Lo,2,0,"h3",5),t.qZA(),t._UZ(107,"mat-divider",6),t.TgZ(108,"div",7),t.TgZ(109,"h4",8),t._uU(110,"Short Channel Id"),t.qZA(),t.TgZ(111,"span",9),t._uU(112),t.qZA(),t.qZA(),t._UZ(113,"mat-divider",6),t.TgZ(114,"div",10),t.TgZ(115,"h4",8),t._uU(116,"Active"),t.qZA(),t.TgZ(117,"span",9),t._uU(118),t.qZA(),t.qZA(),t._UZ(119,"mat-divider",6),t.TgZ(120,"div",10),t.TgZ(121,"h4",8),t._uU(122,"Last Update"),t.qZA(),t.TgZ(123,"span",9),t._uU(124),t.ALo(125,"date"),t.qZA(),t.qZA(),t._UZ(126,"mat-divider",6),t.TgZ(127,"div",10),t.TgZ(128,"h4",8),t._uU(129,"Amount (mSats)"),t.qZA(),t.TgZ(130,"span",9),t._uU(131),t.qZA(),t.qZA(),t._UZ(132,"mat-divider",6),t.TgZ(133,"div",10),t.TgZ(134,"h4",8),t._uU(135,"Base Fee (mSats)"),t.qZA(),t.TgZ(136,"span",9),t._uU(137),t.ALo(138,"number"),t.qZA(),t.qZA(),t._UZ(139,"mat-divider",6),t.TgZ(140,"div",10),t.TgZ(141,"h4",8),t._uU(142,"Channel Flags"),t.qZA(),t.TgZ(143,"span",9),t._uU(144),t.ALo(145,"number"),t.qZA(),t.qZA(),t._UZ(146,"mat-divider",6),t.TgZ(147,"div",10),t.TgZ(148,"h4",8),t._uU(149,"Delay"),t.qZA(),t.TgZ(150,"span",9),t._uU(151),t.ALo(152,"number"),t.qZA(),t.qZA(),t._UZ(153,"mat-divider",6),t.TgZ(154,"div",10),t.TgZ(155,"h4",8),t._uU(156,"Destination"),t.qZA(),t.TgZ(157,"span",9),t._uU(158),t.qZA(),t.qZA(),t._UZ(159,"mat-divider",6),t.TgZ(160,"div",10),t.TgZ(161,"h4",8),t._uU(162,"Fee/Millionth"),t.qZA(),t.TgZ(163,"span",9),t._uU(164),t.ALo(165,"number"),t.qZA(),t.qZA(),t._UZ(166,"mat-divider",6),t.TgZ(167,"div",10),t.TgZ(168,"h4",8),t._uU(169,"Max Htlc (mSat)"),t.qZA(),t.TgZ(170,"span",9),t._uU(171),t.qZA(),t.qZA(),t._UZ(172,"mat-divider",6),t.TgZ(173,"div",10),t.TgZ(174,"h4",8),t._uU(175,"Min Htlc (mSat)"),t.qZA(),t.TgZ(176,"span",9),t._uU(177),t.qZA(),t.qZA(),t._UZ(178,"mat-divider",6),t.TgZ(179,"div",10),t.TgZ(180,"h4",8),t._uU(181,"Message Flags"),t.qZA(),t.TgZ(182,"span",9),t._uU(183),t.ALo(184,"number"),t.qZA(),t.qZA(),t._UZ(185,"mat-divider",6),t.TgZ(186,"div",10),t.TgZ(187,"h4",8),t._uU(188,"Public"),t.qZA(),t.TgZ(189,"span",9),t._uU(190),t.qZA(),t.qZA(),t._UZ(191,"mat-divider",6),t.TgZ(192,"div",10),t.TgZ(193,"h4",8),t._uU(194,"Satoshis"),t.qZA(),t.TgZ(195,"span",9),t._uU(196),t.ALo(197,"number"),t.qZA(),t.qZA(),t._UZ(198,"mat-divider",6),t.TgZ(199,"div",10),t.TgZ(200,"h4",8),t._uU(201,"Source"),t.qZA(),t.TgZ(202,"span",9),t._uU(203),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",!e.node1_match),t.xp6(1),t.Q6J("ngIf",e.node1_match),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].short_channel_id),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null!=e.lookupResult[0]&&e.lookupResult[0].active?"True":"False"),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].last_update),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].amount_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(37,64,null==e.lookupResult[0]?null:e.lookupResult[0].base_fee_millisatoshi)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(44,66,null==e.lookupResult[0]?null:e.lookupResult[0].channel_flags)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(51,68,null==e.lookupResult[0]?null:e.lookupResult[0].delay)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].destination),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(64,70,null==e.lookupResult[0]?null:e.lookupResult[0].fee_per_millionth)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].htlc_maximum_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].htlc_minimum_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(83,72,null==e.lookupResult[0]?null:e.lookupResult[0].message_flags)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null!=e.lookupResult[0]&&e.lookupResult[0].public?"Yes":"No"),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(96,74,null==e.lookupResult[0]?null:e.lookupResult[0].satoshis)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[0]?null:e.lookupResult[0].source),t.xp6(3),t.Q6J("ngIf",!e.node2_match),t.xp6(1),t.Q6J("ngIf",e.node2_match),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].short_channel_id),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null!=e.lookupResult[1]&&e.lookupResult[1].active?"True":"False"),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.xi3(125,76,1e3*(null==e.lookupResult[1]?null:e.lookupResult[1].last_update),"dd/MMM/YYYY HH:mm")),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].amount_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(138,79,null==e.lookupResult[1]?null:e.lookupResult[1].base_fee_millisatoshi)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(145,81,null==e.lookupResult[1]?null:e.lookupResult[1].channel_flags)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(152,83,null==e.lookupResult[1]?null:e.lookupResult[1].delay)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].destination),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(165,85,null==e.lookupResult[1]?null:e.lookupResult[1].fee_per_millionth)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].htlc_maximum_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].htlc_minimum_msat),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(184,87,null==e.lookupResult[1]?null:e.lookupResult[1].message_flags)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null!=e.lookupResult[1]&&e.lookupResult[1].public?"Yes":"No"),t.xp6(1),t.Q6J("inset",!0),t.xp6(5),t.Oqu(t.lcZ(197,89,null==e.lookupResult[1]?null:e.lookupResult[1].satoshis)),t.xp6(2),t.Q6J("inset",!0),t.xp6(5),t.Oqu(null==e.lookupResult[1]?null:e.lookupResult[1].source)}}let So=(()=>{class n{constructor(e){this.store=e,this.lookupResult=[],this.node1_match=!1,this.node2_match=!1,this.unSubs=[new d.x,new d.x,new d.x,new d.x]}ngOnInit(){this.store.select(f.W3).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.lookupResult.length>0&&this.lookupResult[0].source===e.id&&(this.node1_match=!0),this.lookupResult.length>1&&this.lookupResult[1].source===e.id&&(this.node2_match=!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-lookup"]],inputs:{lookupResult:"lookupResult"},decls:1,vars:1,consts:[["fxLayout","column","class","mt-1",4,"ngIf"],["fxLayout","column",1,"mt-1"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row"],["fxLayout","column","fxFlex","49","fxLayoutAlign","start start",1,"mt-1","bordered-box","padding-gap-large"],["fxLayout","column"],["class","page-title font-bold-500",4,"ngIf"],[3,"inset"],["fxLayout","column","fxFlex","20",1,"my-1"],[1,"font-bold-500"],[1,"foreground-secondary-text"],["fxLayout","column","fxFlex","10",1,"my-1"],[1,"page-title","font-bold-500"]],template:function(e,i){1&e&&t.YNc(0,bo,204,91,"div",0),2&e&&t.Q6J("ngIf",i.lookupResult)},directives:[u.O5,p.xw,X.d,p.Wh,p.yH],pipes:[u.JJ,u.uU],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{height:38px!important}"]}),n})();const wo=["form"];function qo(n,a){if(1&n&&(t.TgZ(0,"mat-radio-button",21),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("value",e.id)("checked",i.selectedFieldId===e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Fo(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",null==e.lookupFields[e.selectedFieldId]?null:e.lookupFields[e.selectedFieldId].placeholder," is required.")}}function Ro(n,a){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"rtl-cl-node-lookup",30),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("lookupResult",e.nodeLookupValue)}}function Oo(n,a){if(1&n&&(t.TgZ(0,"span",28),t.YNc(1,Ro,2,1,"div",29),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(24);t.xp6(1),t.Q6J("ngIf",""!==e.nodeLookupValue.nodeid)("ngIfElse",i)}}function Uo(n,a){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"rtl-cl-channel-lookup",30),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("lookupResult",e.channelLookupValue)}}function ko(n,a){if(1&n&&(t.TgZ(0,"span",28),t.YNc(1,Uo,2,1,"div",29),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(24);t.xp6(1),t.Q6J("ngIf",e.channelLookupValue.length>0)("ngIfElse",i)}}function No(n,a){1&n&&(t.TgZ(0,"span",28),t.TgZ(1,"h3"),t._uU(2,"Error! Unable to find details!"),t.qZA(),t.qZA())}function Io(n,a){if(1&n&&(t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"span",24),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",25),t.YNc(5,Oo,2,2,"span",26),t.YNc(6,ko,2,2,"span",26),t.YNc(7,No,3,0,"span",27),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij("",e.lookupFields[e.selectedFieldId].name," Details"),t.xp6(1),t.Q6J("ngSwitch",e.selectedFieldId),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1)}}function Mo(n,a){1&n&&(t.TgZ(0,"h3"),t._uU(1,"Error! Unable to find details!"),t.qZA())}const Eo=function(n){return{"mt-2":n}};let Po=(()=>{class n{constructor(e,i,o,l){this.logger=e,this.commonService=i,this.store=o,this.actions=l,this.lookupKey="",this.nodeLookupValue={nodeid:""},this.channelLookupValue=[],this.flgSetLookupValue=!1,this.messageObj=[],this.selectedFieldId=0,this.lookupFields=[{id:0,name:"Node",placeholder:"Pubkey"},{id:1,name:"Channel",placeholder:"Short Channel ID"}],this.flgLoading=[!0],this.faSearch=x.wn1,this.screenSize="",this.screenSizeEnum=s.cu,this.unSubs=[new d.x],this.screenSize=this.commonService.getScreenSize()}ngOnInit(){this.actions.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(e=>e.type===s.sW.SET_LOOKUP_CL||e.type===s.sW.UPDATE_API_CALL_STATUS_CL)).subscribe(e=>{if(e.type===s.sW.SET_LOOKUP_CL){switch(this.flgLoading[0]=!0,this.selectedFieldId){case 0:this.nodeLookupValue=JSON.parse(JSON.stringify(e.payload[0]))||{nodeid:""};break;case 1:this.channelLookupValue=JSON.parse(JSON.stringify(e.payload))||[]}this.flgSetLookupValue=!0,this.logger.info(this.nodeLookupValue),this.logger.info(this.channelLookupValue)}e.type===s.sW.UPDATE_API_CALL_STATUS_CL&&e.payload.status===s.Bn.ERROR&&"Lookup"===e.payload.action&&(this.flgLoading[0]="error")})}onLookup(){if(!this.lookupKey)return!0;switch(this.flgSetLookupValue=!1,this.nodeLookupValue={nodeid:""},this.channelLookupValue=[],this.selectedFieldId){case 0:this.store.dispatch((0,y.Sf)({payload:this.lookupKey.trim()}));break;case 1:this.store.dispatch((0,y.$A)({payload:{uiMessage:s.m6.SEARCHING_CHANNEL,shortChannelID:this.lookupKey.trim(),showError:!1}}))}}onSelectChange(e){this.resetData(),this.selectedFieldId=e.value}resetData(){this.flgSetLookupValue=!1,this.selectedFieldId=0,this.nodeLookupValue={nodeid:""},this.channelLookupValue=[],this.form.resetForm()}clearLookupValue(){this.nodeLookupValue={nodeid:""},this.channelLookupValue=[],this.flgSetLookupValue=!1}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh),t.Y36(H.eX))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-lookups"]],viewQuery:function(e,i){if(1&e&&t.Gf(wo,7),2&e){let o;t.iGM(o=t.CRH())&&(i.form=o.first)}},decls:25,vars:10,consts:[["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start end",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start start",1,"padding-gap"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start start"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"card-content-gap","mt-1"],["fxFlex","100","fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutAlign.gt-sm","space-between center","fxLayoutAlign","start space-between",1,"w-100"],["form","ngForm"],["fxFlex","35","fxFlex.gt-md","25","fxLayoutAlign","start end"],["color","primary","tabindex","1","name","lookupField",3,"ngModel","ngModelChange","change"],["class","mr-4",3,"value","checked",4,"ngFor","ngForOf"],["fxFlex","65","fxFlex.gt-md","75","fxLayoutAlign","start end",3,"ngClass"],["matInput","","name","lookupKey","tabindex","2","required","",3,"placeholder","ngModel","change","ngModelChange"],["key",""],[4,"ngIf"],["fxLayout","row",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","3","type","button",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","4","type","submit",3,"click"],["fxFlex","100","fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutAlign.gt-sm","space-between center","fxLayoutAlign","start stretch","class","w-100 mt-2",4,"ngIf"],["errorBlock",""],[1,"mr-4",3,"value","checked"],["fxFlex","100","fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutAlign.gt-sm","space-between center","fxLayoutAlign","start stretch",1,"w-100","mt-2"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start center"],[1,"page-title","font-bold-500"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start center",3,"ngSwitch"],["fxFlex","100",4,"ngSwitchCase"],["fxFlex","100",4,"ngSwitchDefault"],["fxFlex","100"],[4,"ngIf","ngIfElse"],[3,"lookupResult"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"fa-icon",2),t.TgZ(3,"span",3),t._uU(4,"Graph Lookups"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"mat-card",5),t.TgZ(7,"mat-card-content",6),t.TgZ(8,"form",7,8),t.TgZ(10,"div",9),t.TgZ(11,"mat-radio-group",10),t.NdJ("ngModelChange",function(l){return i.selectedFieldId=l})("change",function(l){return i.onSelectChange(l)}),t.YNc(12,qo,2,3,"mat-radio-button",11),t.qZA(),t.qZA(),t.TgZ(13,"mat-form-field",12),t.TgZ(14,"input",13,14),t.NdJ("change",function(){return i.clearLookupValue()})("ngModelChange",function(l){return i.lookupKey=l}),t.qZA(),t.YNc(16,Fo,2,1,"mat-error",15),t.qZA(),t.TgZ(17,"div",16),t.TgZ(18,"button",17),t.NdJ("click",function(){return i.resetData()}),t._uU(19,"Clear"),t.qZA(),t.TgZ(20,"button",18),t.NdJ("click",function(){return i.onLookup()}),t._uU(21,"Lookup"),t.qZA(),t.qZA(),t.qZA(),t.YNc(22,Io,8,4,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,Mo,2,0,"ng-template",null,20,t.W1O)),2&e&&(t.xp6(2),t.Q6J("icon",i.faSearch),t.xp6(9),t.Q6J("ngModel",i.selectedFieldId),t.xp6(1),t.Q6J("ngForOf",i.lookupFields),t.xp6(1),t.Q6J("ngClass",t.VKq(8,Eo,i.screenSize===i.screenSizeEnum.XS||i.screenSize===i.screenSizeEnum.SM)),t.xp6(1),t.Q6J("placeholder",(null==i.lookupFields[i.selectedFieldId]?null:i.lookupFields[i.selectedFieldId].placeholder)||"Lookup Key")("ngModel",i.lookupKey),t.xp6(2),t.Q6J("ngIf",!i.lookupKey),t.xp6(6),t.Q6J("ngIf",i.flgSetLookupValue))},directives:[p.xw,p.Wh,k.BN,p.yH,Z.a8,Z.dn,c._Y,c.JL,c.F,lt.VQ,c.JJ,c.On,u.sg,g.KE,u.mk,F.oO,M.Nt,c.Fj,c.Q7,u.O5,O.lW,lt.U0,g.TO,u.RF,u.n9,u.ED,To,So],styles:[".tree-invisible[_ngcontent-%COMP%]{display:none}.lookup-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .lookup-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.pl-3[_ngcontent-%COMP%]{padding-left:3rem}"]}),n})();var it=(()=>{return(n=it||(it={})).KB="KB",n.KW="KW",it;var n})();function Do(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"h4",5),t._uU(4,"Opening"),t.qZA(),t.TgZ(5,"div",6),t._uU(6),t.ALo(7,"number"),t.qZA(),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"h4",5),t._uU(10,"Mutual Close"),t.qZA(),t.TgZ(11,"div",6),t._uU(12),t.ALo(13,"number"),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"h4",5),t._uU(16,"Unilateral Close"),t.qZA(),t.TgZ(17,"div",6),t._uU(18),t.ALo(19,"number"),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t.TgZ(21,"h4",5),t._uU(22,"Delayed To Us"),t.qZA(),t.TgZ(23,"div",6),t._uU(24),t.ALo(25,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",3),t.TgZ(27,"div",10),t.TgZ(28,"h4",5),t._uU(29,"Minimum Acceptable"),t.qZA(),t.TgZ(30,"div",6),t._uU(31),t.ALo(32,"number"),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"h4",5),t._uU(35,"Maximum Acceptable"),t.qZA(),t.TgZ(36,"div",6),t._uU(37),t.ALo(38,"number"),t.qZA(),t.qZA(),t.TgZ(39,"div",12),t.TgZ(40,"h4",5),t._uU(41,"HTLC Resolution"),t.qZA(),t.TgZ(42,"div",6),t._uU(43),t.ALo(44,"number"),t.qZA(),t.qZA(),t.TgZ(45,"div",13),t.TgZ(46,"h4",5),t._uU(47,"Penalty"),t.qZA(),t.TgZ(48,"div",6),t._uU(49),t.ALo(50,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,8,null==e.perkbw?null:e.perkbw.opening)),t.xp6(6),t.Oqu(t.lcZ(13,10,null==e.perkbw?null:e.perkbw.mutual_close)),t.xp6(6),t.Oqu(t.lcZ(19,12,null==e.perkbw?null:e.perkbw.unilateral_close)),t.xp6(6),t.Oqu(t.lcZ(25,14,null==e.perkbw?null:e.perkbw.delayed_to_us)),t.xp6(7),t.Oqu(t.lcZ(32,16,null==e.perkbw?null:e.perkbw.min_acceptable)),t.xp6(6),t.Oqu(t.lcZ(38,18,null==e.perkbw?null:e.perkbw.max_acceptable)),t.xp6(6),t.Oqu(t.lcZ(44,20,null==e.perkbw?null:e.perkbw.htlc_resolution)),t.xp6(6),t.Oqu(t.lcZ(50,22,null==e.perkbw?null:e.perkbw.penalty))}}function Jo(n,a){if(1&n&&(t.TgZ(0,"div",14),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let Qo=(()=>{class n{constructor(){this.perkbw={}}ngAfterContentChecked(){this.feeRateStyle===it.KB?this.perkbw=this.feeRates.perkb:this.feeRateStyle===it.KW&&(this.perkbw=this.feeRates.perkw)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-fee-rates"]],inputs:{feeRateStyle:"feeRateStyle",feeRates:"feeRates",errorMessage:"errorMessage"},decls:3,vars:2,consts:[["fxLayout","row","fxFlex","100","fxLayoutAlign","stretch","class","h-100",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","row","fxFlex","100","fxLayoutAlign","stretch",1,"h-100"],["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["matTooltip","Default feerate for fundchannel and withdraw","matTooltipPosition","below"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["matTooltip","Feerate to aim for in cooperative shutdown. Note that since mutual close is a negotiation, the actual feerate used in mutual close will be somewhere between this and the corresponding mutual close feerate of the peer","matTooltipPosition","below"],["matTooltip","Feerate for commitment_transaction in a live channel which we originally funded","matTooltipPosition","below"],["matTooltip","Feerate for returning unilateral close funds to our wallet","matTooltipPosition","below"],["matTooltip","The smallest feerate that you can use, usually the minimum relayed feerate of the backend","matTooltipPosition","below"],["matTooltip","The largest feerate we will accept from remote negotiations. If a peer attempts to set the feerate higher than this we will unilaterally close the channel (or simply forget it if it's not open yet)","matTooltipPosition","below"],["matTooltip","Feerate for returning unilateral close HTLC outputs to our wallet","matTooltipPosition","below"],["matTooltip","Feerate to start at when penalizing a cheat attempt","matTooltipPosition","below"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,Do,51,24,"div",0),t.YNc(1,Jo,3,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.yH,p.Wh,Q.gM],pipes:[u.JJ],styles:[".fee-rate-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:44px}"]}),n})();function Yo(n,a){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"h4",5),t._uU(4,"Opening Channel"),t.qZA(),t.TgZ(5,"div",6),t._uU(6),t.ALo(7,"number"),t.qZA(),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"h4",5),t._uU(10,"Mutual Close"),t.qZA(),t.TgZ(11,"div",6),t._uU(12),t.ALo(13,"number"),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"h4",5),t._uU(16,"Unilateral Close"),t.qZA(),t.TgZ(17,"div",6),t._uU(18),t.ALo(19,"number"),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t._UZ(21,"h4",5),t._UZ(22,"div",6),t.qZA(),t.qZA(),t.TgZ(23,"div",3),t.TgZ(24,"div",10),t.TgZ(25,"h4",5),t._uU(26,"HTLC Timeout"),t.qZA(),t.TgZ(27,"div",6),t._uU(28),t.ALo(29,"number"),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"h4",5),t._uU(32,"HTLC Success"),t.qZA(),t.TgZ(33,"div",6),t._uU(34),t.ALo(35,"number"),t.qZA(),t.qZA(),t.TgZ(36,"div",9),t._UZ(37,"h4",5),t._UZ(38,"div",6),t.qZA(),t.TgZ(39,"div",9),t._UZ(40,"h4",5),t._UZ(41,"div",6),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,5,null==e.feeRates||null==e.feeRates.onchain_fee_estimates?null:e.feeRates.onchain_fee_estimates.opening_channel_satoshis)),t.xp6(6),t.Oqu(t.lcZ(13,7,null==e.feeRates||null==e.feeRates.onchain_fee_estimates?null:e.feeRates.onchain_fee_estimates.mutual_close_satoshis)),t.xp6(6),t.Oqu(t.lcZ(19,9,null==e.feeRates||null==e.feeRates.onchain_fee_estimates?null:e.feeRates.onchain_fee_estimates.unilateral_close_satoshis)),t.xp6(10),t.Oqu(t.lcZ(29,11,null==e.feeRates||null==e.feeRates.onchain_fee_estimates?null:e.feeRates.onchain_fee_estimates.htlc_timeout_satoshis)),t.xp6(6),t.Oqu(t.lcZ(35,13,null==e.feeRates||null==e.feeRates.onchain_fee_estimates?null:e.feeRates.onchain_fee_estimates.htlc_success_satoshis))}}function Bo(n,a){if(1&n&&(t.TgZ(0,"div",12),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let Ho=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-onchain-fee-estimates"]],inputs:{feeRates:"feeRates",errorMessage:"errorMessage"},decls:3,vars:2,consts:[["fxLayout","row","fxFlex","100","fxLayoutAlign","stretch","class","h-100",4,"ngIf","ngIfElse"],["errorBlock",""],["fxLayout","row","fxFlex","100","fxLayoutAlign","stretch",1,"h-100"],["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["matTooltip","Estimated cost of typical channel open","matTooltipPosition","below"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["matTooltip","Estimated cost of typical channel close","matTooltipPosition","below"],["matTooltip","Estimated cost of typical unilateral close (without HTLCs)","matTooltipPosition","below"],["fxFlex","12"],["matTooltip","Estimated cost of typical HTLC timeout transaction","matTooltipPosition","below"],["matTooltip","Estimated cost of typical HTLC fulfillment transaction","matTooltipPosition","below"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between",1,"p-2"]],template:function(e,i){if(1&e&&(t.YNc(0,Yo,42,15,"div",0),t.YNc(1,Bo,3,1,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",""===(null==i.errorMessage?null:i.errorMessage.trim()))("ngIfElse",o)}},directives:[u.O5,p.xw,p.yH,p.Wh,Q.gM],pipes:[u.JJ],styles:[".fee-rate-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:44px}"]}),n})();function Vo(n,a){1&n&&t._UZ(0,"mat-progress-bar",19)}function zo(n,a){if(1&n&&t._UZ(0,"rtl-cl-node-info",20),2&n){const e=t.oxw(3);t.Q6J("information",e.information)("showColorFieldSeparately",!1)}}function Xo(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-status-info",21),2&n){const e=t.oxw(3);t.Q6J("channelsStatus",e.channelsStatus)("errorMessage",e.errorMessages[0]+" "+e.errorMessages[2])}}function Go(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-info",22),2&n){const e=t.oxw(3);t.Q6J("fees",e.fees)("errorMessage",e.errorMessages[1]+" "+e.errorMessages[3]+" "+e.errorMessages[4])}}function Wo(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-rates",23),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKB)("feeRateStyle","KB")("errorMessage",e.errorMessages[5])}}function Ko(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-rates",23),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKW)("feeRateStyle","KW")("errorMessage",e.errorMessages[6])}}function $o(n,a){if(1&n&&t._UZ(0,"rtl-cl-onchain-fee-estimates",24),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKW)("errorMessage",e.errorMessages[5])}}const wt=function(n){return{"dashboard-card-content":!0,"error-border":n}};function jo(n,a){if(1&n&&(t.TgZ(0,"mat-grid-tile",4),t.TgZ(1,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"div",7),t._UZ(4,"fa-icon",8),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",9),t.TgZ(8,"mat-card",10),t.TgZ(9,"mat-card-content",11),t.YNc(10,Vo,1,0,"mat-progress-bar",12),t.TgZ(11,"div",13),t.YNc(12,zo,1,2,"rtl-cl-node-info",14),t.YNc(13,Xo,1,2,"rtl-cl-channel-status-info",15),t.YNc(14,Go,1,2,"rtl-cl-fee-info",16),t.YNc(15,Wo,1,3,"rtl-cl-fee-rates",17),t.YNc(16,Ko,1,3,"rtl-cl-fee-rates",17),t.YNc(17,$o,1,2,"rtl-cl-onchain-fee-estimates",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("colspan",e.cols)("rowspan",e.rows),t.xp6(4),t.Q6J("icon",e.icon),t.xp6(2),t.Oqu(e.title),t.xp6(3),t.Q6J("ngClass",t.VKq(13,wt,"node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusChannels.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.ERROR)||"feeRatesKB"===e.id&&i.apiCallStatusPerKB.status===i.apiCallStatusEnum.ERROR||"feeRatesKW"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.ERROR||"onChainFeeEstimates"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.ERROR)),t.xp6(1),t.Q6J("ngIf","node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusChannels.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.INITIATED)||"feeRatesKB"===e.id&&i.apiCallStatusPerKB.status===i.apiCallStatusEnum.INITIATED||"feeRatesKW"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.INITIATED||"onChainFeeEstimates"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngSwitch",e.id),t.xp6(1),t.Q6J("ngSwitchCase","node"),t.xp6(1),t.Q6J("ngSwitchCase","status"),t.xp6(1),t.Q6J("ngSwitchCase","fee"),t.xp6(1),t.Q6J("ngSwitchCase","feeRatesKB"),t.xp6(1),t.Q6J("ngSwitchCase","feeRatesKW"),t.xp6(1),t.Q6J("ngSwitchCase","onChainFeeEstimates")}}function ts(n,a){if(1&n&&(t.TgZ(0,"mat-grid-list",2),t.YNc(1,jo,18,15,"mat-grid-tile",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.nodeCardsOperator)}}function es(n,a){1&n&&t._UZ(0,"mat-progress-bar",19)}function ns(n,a){if(1&n&&t._UZ(0,"rtl-cl-node-info",20),2&n){const e=t.oxw(3);t.Q6J("information",e.information)("showColorFieldSeparately",!1)}}function is(n,a){if(1&n&&t._UZ(0,"rtl-cl-channel-status-info",21),2&n){const e=t.oxw(3);t.Q6J("channelsStatus",e.channelsStatus)("errorMessage",e.errorMessages[0]+" "+e.errorMessages[2])}}function as(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-info",22),2&n){const e=t.oxw(3);t.Q6J("fees",e.fees)("errorMessage",e.errorMessages[1]+" "+e.errorMessages[3]+" "+e.errorMessages[4])}}function os(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-rates",23),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKB)("feeRateStyle","KB")("errorMessage",e.errorMessages[5])}}function ss(n,a){if(1&n&&t._UZ(0,"rtl-cl-fee-rates",23),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKW)("feeRateStyle","KW")("errorMessage",e.errorMessages[5])}}function ls(n,a){if(1&n&&t._UZ(0,"rtl-cl-onchain-fee-estimates",24),2&n){const e=t.oxw(3);t.Q6J("feeRates",e.feeRatesPerKW)("errorMessage",e.errorMessages[5])}}function rs(n,a){if(1&n&&(t.TgZ(0,"mat-grid-tile",4),t.TgZ(1,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"div",25),t._UZ(4,"fa-icon",8),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",9),t.TgZ(8,"mat-card",10),t.TgZ(9,"mat-card-content",11),t.YNc(10,es,1,0,"mat-progress-bar",12),t.TgZ(11,"div",13),t.YNc(12,ns,1,2,"rtl-cl-node-info",14),t.YNc(13,is,1,2,"rtl-cl-channel-status-info",15),t.YNc(14,as,1,2,"rtl-cl-fee-info",16),t.YNc(15,os,1,3,"rtl-cl-fee-rates",17),t.YNc(16,ss,1,3,"rtl-cl-fee-rates",17),t.YNc(17,ls,1,2,"rtl-cl-onchain-fee-estimates",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("colspan",e.cols)("rowspan",e.rows),t.xp6(4),t.Q6J("icon",e.icon),t.xp6(2),t.Oqu(e.title),t.xp6(3),t.Q6J("ngClass",t.VKq(13,wt,"node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.ERROR)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusChannels.status===i.apiCallStatusEnum.ERROR||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.ERROR)||"feeRatesKB"===e.id&&i.apiCallStatusPerKB.status===i.apiCallStatusEnum.ERROR||"feeRatesKW"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.ERROR||"onChainFeeEstimates"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.ERROR)),t.xp6(1),t.Q6J("ngIf","node"===e.id&&i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||"status"===e.id&&(i.apiCallStatusNodeInfo.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusLRBal.status===i.apiCallStatusEnum.INITIATED)||"fee"===e.id&&(i.apiCallStatusFees.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusChannels.status===i.apiCallStatusEnum.INITIATED||i.apiCallStatusFHistory.status===i.apiCallStatusEnum.INITIATED)||"feeRatesKB"===e.id&&i.apiCallStatusPerKB.status===i.apiCallStatusEnum.INITIATED||"feeRatesKW"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.INITIATED||"onChainFeeEstimates"===e.id&&i.apiCallStatusPerKW.status===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngSwitch",e.id),t.xp6(1),t.Q6J("ngSwitchCase","node"),t.xp6(1),t.Q6J("ngSwitchCase","status"),t.xp6(1),t.Q6J("ngSwitchCase","fee"),t.xp6(1),t.Q6J("ngSwitchCase","feeRatesKB"),t.xp6(1),t.Q6J("ngSwitchCase","feeRatesKW"),t.xp6(1),t.Q6J("ngSwitchCase","onChainFeeEstimates")}}function cs(n,a){if(1&n&&(t.TgZ(0,"mat-grid-list",2),t.YNc(1,rs,18,15,"mat-grid-tile",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.nodeCardsMerchant)}}let us=(()=>{class n{constructor(e,i,o){this.logger=e,this.commonService=i,this.store=o,this.faBolt=x.BDt,this.faServer=x.xf3,this.faNetworkWired=x.kXW,this.faLink=x.nNP,this.selNode={},this.information={},this.channelsStatus={active:{},pending:{},inactive:{}},this.feeRatesPerKB={},this.feeRatesPerKW={},this.nodeCardsOperator=[],this.nodeCardsMerchant=[],this.screenSize="",this.screenSizeEnum=s.cu,this.userPersonaEnum=s.ol,this.errorMessages=["","","","","","",""],this.apiCallStatusNodeInfo=null,this.apiCallStatusLRBal=null,this.apiCallStatusChannels=null,this.apiCallStatusFees=null,this.apiCallStatusFHistory=null,this.apiCallStatusPerKB=null,this.apiCallStatusPerKW=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.nodeCardsMerchant=[{id:"node",icon:this.faServer,title:"Node Information",cols:6,rows:3},{id:"status",icon:this.faNetworkWired,title:"Channels",cols:6,rows:3},{id:"fee",icon:this.faBolt,title:"Routing Fee",cols:6,rows:1},{id:"feeRatesKB",icon:this.faServer,title:"Fee Rate Per KB",cols:4,rows:4},{id:"feeRatesKW",icon:this.faNetworkWired,title:"Fee Rate Per KW",cols:4,rows:4},{id:"onChainFeeEstimates",icon:this.faLink,title:"Onchain Fee Estimates (Sats)",cols:4,rows:4}],this.nodeCardsOperator=[{id:"feeRatesKB",icon:this.faServer,title:"Fee Rate Per KB",cols:4,rows:4},{id:"feeRatesKW",icon:this.faNetworkWired,title:"Fee Rate Per KW",cols:4,rows:4},{id:"onChainFeeEstimates",icon:this.faLink,title:"Onchain Fee Estimates (Sats)",cols:4,rows:4}]):(this.nodeCardsMerchant=[{id:"node",icon:this.faServer,title:"Node Information",cols:2,rows:3},{id:"status",icon:this.faNetworkWired,title:"Channels",cols:2,rows:3},{id:"fee",icon:this.faBolt,title:"Routing Fee",cols:2,rows:3},{id:"feeRatesKB",icon:this.faServer,title:"Fee Rate Per KB",cols:2,rows:4},{id:"feeRatesKW",icon:this.faNetworkWired,title:"Fee Rate Per KW",cols:2,rows:4},{id:"onChainFeeEstimates",icon:this.faLink,title:"Onchain Fee Estimates (Sats)",cols:2,rows:4}],this.nodeCardsOperator=[{id:"feeRatesKB",icon:this.faServer,title:"Fee Rate Per KB",cols:2,rows:4},{id:"feeRatesKW",icon:this.faNetworkWired,title:"Fee Rate Per KW",cols:2,rows:4},{id:"onChainFeeEstimates",icon:this.faLink,title:"Onchain Fee Estimates (Sats)",cols:2,rows:4}])}ngOnInit(){this.store.select(f.Hz).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.errorMessages[0]="",this.apiCallStatusNodeInfo=e.apisCallStatus[0],this.apiCallStatusNodeInfo.status===s.Bn.ERROR&&(this.errorMessages[0]="object"==typeof this.apiCallStatusNodeInfo.message?JSON.stringify(this.apiCallStatusNodeInfo.message):this.apiCallStatusNodeInfo.message),this.selNode=e.nodeSettings,this.information=e.information,this.logger.info(e)}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[1]),(0,at.M)(this.store.select(f.Wj))).subscribe(([e,i])=>{this.errorMessages[2]="",this.errorMessages[3]="",this.apiCallStatusLRBal=e.apiCallStatus,this.apiCallStatusChannels=i.apiCallStatus,this.apiCallStatusLRBal.status===s.Bn.ERROR&&(this.errorMessages[2]="object"==typeof this.apiCallStatusLRBal.message?JSON.stringify(this.apiCallStatusLRBal.message):this.apiCallStatusLRBal.message),this.apiCallStatusChannels.status===s.Bn.ERROR&&(this.errorMessages[3]="object"==typeof this.apiCallStatusChannels.message?JSON.stringify(this.apiCallStatusChannels.message):this.apiCallStatusChannels.message),this.channelsStatus.active.channels=e.activeChannels.length||0,this.channelsStatus.pending.channels=e.pendingChannels.length||0,this.channelsStatus.inactive.channels=e.inactiveChannels.length||0,this.channelsStatus.active.capacity=i.localRemoteBalance.localBalance||0,this.channelsStatus.pending.capacity=i.localRemoteBalance.pendingBalance||0,this.channelsStatus.inactive.capacity=i.localRemoteBalance.inactiveBalance||0}),this.store.select(f.JG).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.errorMessages[1]="",this.apiCallStatusFees=e.apiCallStatus,this.apiCallStatusFees.status===s.Bn.ERROR&&(this.errorMessages[1]="object"==typeof this.apiCallStatusFees.message?JSON.stringify(this.apiCallStatusFees.message):this.apiCallStatusFees.message),this.fees=e.fees}),this.store.select(f.Bo).pipe((0,_.R)(this.unSubs[3])).subscribe(e=>{this.errorMessages[4]="",this.apiCallStatusFHistory=e.apiCallStatus,this.apiCallStatusFHistory.status===s.Bn.ERROR&&(this.errorMessages[4]="object"==typeof this.apiCallStatusFHistory.message?JSON.stringify(this.apiCallStatusFHistory.message):this.apiCallStatusFHistory.message),e.forwardingHistory&&e.forwardingHistory.length&&(this.fees.totalTxCount=e.forwardingHistory.length)}),this.store.select(f.zm).pipe((0,_.R)(this.unSubs[4])).subscribe(e=>{this.errorMessages[5]="",this.apiCallStatusPerKB=e.apiCallStatus,this.apiCallStatusPerKB.status===s.Bn.ERROR&&(this.errorMessages[5]="object"==typeof this.apiCallStatusPerKB.message?JSON.stringify(this.apiCallStatusPerKB.message):this.apiCallStatusPerKB.message),this.feeRatesPerKB=e.feeRatesPerKB}),this.store.select(f.hx).pipe((0,_.R)(this.unSubs[5])).subscribe(e=>{this.errorMessages[6]="",this.apiCallStatusPerKW=e.apiCallStatus,this.apiCallStatusPerKW.status===s.Bn.ERROR&&(this.errorMessages[6]="object"==typeof this.apiCallStatusPerKW.message?JSON.stringify(this.apiCallStatusPerKW.message):this.apiCallStatusPerKW.message),this.feeRatesPerKW=e.feeRatesPerKW})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-network-info"]],decls:3,vars:2,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch",1,"mb-4"],["cols","6","rowHeight","100px",4,"ngIf"],["cols","6","rowHeight","100px"],["class","node-grid-tile",3,"colspan","rowspan",4,"ngFor","ngForOf"],[1,"node-grid-tile",3,"colspan","rowspan"],["fxLayout","column","fxLayoutAlign","stretch start","fxFlex","100",1,"h-100"],["fxLayout","row","fxLayoutAlign","start start",1,"w-100"],["fxLayout","row","fxLayoutAlign","start start",1,"page-title-container","pl-2"],[1,"mr-1",3,"icon"],["fxLayout","column","fxLayoutAlign","stretch center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","center stretch",1,"w-100","h-93"],["fxLayout","row","fxFlex","95","fxLayoutAlign","start stretch",1,"dashboard-card","w-96","h-93"],["fxLayout","column","fxFlex","100",3,"ngClass"],["mode","indeterminate",4,"ngIf"],["fxLayout","column","fxFlex","100",3,"ngSwitch"],["fxFlex","100",3,"information","showColorFieldSeparately",4,"ngSwitchCase"],["fxFlex","100",3,"channelsStatus","errorMessage",4,"ngSwitchCase"],["fxFlex","100",3,"fees","errorMessage",4,"ngSwitchCase"],["class","h-100",3,"feeRates","feeRateStyle","errorMessage",4,"ngSwitchCase"],["class","h-100",3,"feeRates","errorMessage",4,"ngSwitchCase"],["mode","indeterminate"],["fxFlex","100",3,"information","showColorFieldSeparately"],["fxFlex","100",3,"channelsStatus","errorMessage"],["fxFlex","100",3,"fees","errorMessage"],[1,"h-100",3,"feeRates","feeRateStyle","errorMessage"],[1,"h-100",3,"feeRates","errorMessage"],["fxLayout","row","fxLayoutAlign","start start",1,"page-title-container","pl-15px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ts,2,1,"mat-grid-list",1),t.YNc(2,cs,2,1,"mat-grid-list",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.selNode.userPersona===i.userPersonaEnum.OPERATOR),t.xp6(1),t.Q6J("ngIf",i.selNode.userPersona===i.userPersonaEnum.MERCHANT))},directives:[p.xw,p.Wh,u.O5,ot.Il,u.sg,ot.DX,p.yH,k.BN,Z.a8,Z.dn,u.mk,F.oO,u.RF,u.n9,P.pW,yt,Zt,Tt,Qo,Ho],styles:[""]}),n})();function ps(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeLink=l.link}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.s9C("routerLink",e.link),t.Q6J("active",i.activeLink===e.link),t.xp6(1),t.Oqu(e.name)}}let ms=(()=>{class n{constructor(e){this.router=e,this.faUserCheck=x.hkK,this.links=[{link:"sign",name:"Sign"},{link:"verify",name:"Verify"}],this.activeLink=this.links[0].link,this.unSubs=[new d.x,new d.x]}ngOnInit(){const e=this.links.find(i=>this.router.url.includes(i.link));this.activeLink=e?e.link:this.links[0].link,this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(i=>i instanceof C.Av)).subscribe(i=>{const o=this.links.find(l=>i.urlAfterRedirects.includes(l.link));this.activeLink=o?o.link:this.links[0].link})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-sign-verify-message"]],decls:11,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x"],["fxLayout","column"],["mat-tab-nav-bar",""],["role","tab","mat-tab-link","","class","mat-tab-label",3,"active","routerLink","click",4,"ngFor","ngForOf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"mat-tab-body-wrapper"],["role","tab","mat-tab-link","",1,"mat-tab-label",3,"active","routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"fa-icon",1),t.TgZ(2,"span",2),t._uU(3,"Sign/Verify Message"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-card"),t.TgZ(6,"mat-card-content",4),t.TgZ(7,"nav",5),t.YNc(8,ps,2,3,"div",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"router-outlet"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",i.faUserCheck),t.xp6(7),t.Q6J("ngForOf",i.links))},directives:[p.xw,p.Wh,k.BN,Z.a8,Z.dn,N.BU,u.sg,p.yH,C.lC,N.Nj,C.rH],styles:[""]}),n})();var ds=h(4240);function _s(n,a){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.addressTp," ")}}let hs=(()=>{class n{constructor(e,i){this.store=e,this.clEffects=i,this.addressTypes=s._t,this.selectedAddressType=s._t[0],this.newAddress=""}onGenerateAddress(){this.store.dispatch((0,y._E)({payload:this.selectedAddressType})),this.clEffects.setNewAddressCL.pipe((0,z.q)(1)).subscribe(e=>{this.newAddress=e,this.store.dispatch((0,L.qR)({payload:{data:{address:this.newAddress,addressType:this.selectedAddressType.addressTp,component:ds.n}}}))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh),t.Y36(et.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-on-chain-receive"]],decls:8,vars:2,consts:[["fxLayout","column",1,"padding-gap-x"],["fxLayout","row","fxLayoutAlign","space-between end","fxLayoutAlign.gt-sm","start end"],["fxFlex","48","fxFlex.gt-md","25","fxLayoutAlign","start end",1,"mr-2"],["placeholder","Address Type","name","address_type","tabindex","1",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-2"],["mat-flat-button","","color","primary","tabindex","2",1,"top-minus-15px",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-select",3),t.NdJ("ngModelChange",function(l){return i.selectedAddressType=l}),t.YNc(4,_s,2,2,"mat-option",4),t.qZA(),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"button",6),t.NdJ("click",function(){return i.onGenerateAddress()}),t._uU(7,"Generate Address"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngModel",i.selectedAddressType),t.xp6(1),t.Q6J("ngForOf",i.addressTypes))},directives:[p.xw,p.Wh,g.KE,p.yH,U.gD,c.JJ,c.On,u.sg,O.lW,B.ey],styles:[""]}),n})(),qt=(()=>{class n{constructor(e,i){this.store=e,this.activatedRoute=i,this.sweepAll=!1,this.unSubs=[new d.x,new d.x]}ngOnInit(){this.activatedRoute.data.pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.sweepAll=e.sweepAll})}openSendFundsModal(){this.store.dispatch((0,L.qR)({payload:{data:{sweepAll:this.sweepAll,component:St}}}))}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh),t.Y36(C.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-on-chain-send"]],decls:4,vars:1,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap-x"],["fxLayout","row"],["mat-flat-button","","color","primary","type","button","tabindex","1",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.openSendFundsModal()}),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(i.sweepAll?"Sweep All":"Send Funds"))},directives:[p.xw,p.yH,p.Wh,O.lW],styles:[""]}),n})();var fs=h(579),Ft=h(2201),gs=h(4085),Rt=h(9851);const Cs=["form"];function xs(n,a){if(1&n&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.alias?e.alias:e.id?e.id:"")}}function ys(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Peer alias is required."),t.qZA())}function Ts(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Peer not found in the list."),t.qZA())}function Zs(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",1),t.TgZ(1,"input",39),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectedPeerChanged()}),t.qZA(),t.TgZ(2,"mat-autocomplete",40,41),t.NdJ("optionSelected",function(){return t.CHM(e),t.oxw().onSelectedPeerChanged()}),t.YNc(4,xs,2,2,"mat-option",26),t.ALo(5,"async"),t.qZA(),t.YNc(6,ys,2,0,"mat-error",17),t.YNc(7,Ts,2,0,"mat-error",17),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("formControl",i.selectedPeer)("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,6,i.filteredPeers)),t.xp6(2),t.Q6J("ngIf",null==i.selectedPeer.errors?null:i.selectedPeer.errors.required),t.xp6(1),t.Q6J("ngIf",null==i.selectedPeer.errors?null:i.selectedPeer.errors.notfound)}}function As(n,a){1&n&&t.GkF(0)}function vs(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Amount is required."),t.qZA())}function Ls(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Amount must be less than or equal to ",e.totalBalance,".")}}function bs(n,a){if(1&n&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.feeRateId),t.xp6(1),t.hij(" ",e.feeRateType," ")}}function Ss(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Fee Rate is required."),t.qZA())}function ws(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",43),t.TgZ(1,"input",44,45),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().customFeeRate=o}),t.qZA(),t.YNc(3,Ss,2,0,"mat-error",17),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.customFeeRate)("step",.1)("min",0)("required","customperkb"===e.selFeeRate&&!e.flgMinConf),t.xp6(2),t.Q6J("ngIf","customperkb"===e.selFeeRate&&!e.flgMinConf&&!e.customFeeRate)}}function qs(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Min Confirmation Blocks is required."),t.qZA())}function Fs(n,a){if(1&n&&(t.TgZ(0,"mat-option",42),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",t.lcZ(2,2,e.value)," Sats")}}function Rs(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"mat-form-field",46),t.TgZ(2,"mat-select",47),t.NdJ("selectionChange",function(o){return t.CHM(e),t.oxw().onUTXOSelectionChange(o)})("valueChange",function(o){return t.CHM(e),t.oxw().selUTXOs=o}),t.TgZ(3,"mat-select-trigger"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,Fs,3,4,"mat-option",26),t.qZA(),t.qZA(),t.TgZ(7,"mat-slide-toggle",48),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().flgUseAllBalance=o})("change",function(){return t.CHM(e),t.oxw().onUTXOAllBalanceChange()}),t._uU(8," Use selected UTXOs balance "),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("value",e.selUTXOs),t.xp6(2),t.AsE("",t.lcZ(5,6,e.totalSelectedUTXOAmount)," Sats (",e.selUTXOs.length>1?e.selUTXOs.length+" UTXOs":"1 UTXO",")"),t.xp6(2),t.Q6J("ngForOf",e.utxos),t.xp6(1),t.Q6J("ngModel",e.flgUseAllBalance)("disabled",e.selUTXOs.length<1)}}function Os(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.channelConnectionError)}}function Us(n,a){if(1&n&&(t.TgZ(0,"div",49),t._UZ(1,"fa-icon",50),t.YNc(2,Os,2,1,"span",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(1),t.Q6J("ngIf",""!==e.channelConnectionError)}}function ks(n,a){if(1&n&&(t.TgZ(0,"mat-expansion-panel",52),t.TgZ(1,"mat-expansion-panel-header"),t.TgZ(2,"mat-panel-title"),t.TgZ(3,"span"),t._uU(4,"Peer: \xa0"),t.qZA(),t.TgZ(5,"strong",53),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",9),t.TgZ(8,"div",0),t.TgZ(9,"div",1),t.TgZ(10,"h4",54),t._uU(11,"Pubkey"),t.qZA(),t.TgZ(12,"span",55),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t._UZ(14,"mat-divider",56),t.TgZ(15,"div",0),t.TgZ(16,"div",57),t.TgZ(17,"h4",54),t._uU(18,"Address"),t.qZA(),t.TgZ(19,"span",58),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"div",57),t.TgZ(22,"h4",54),t._uU(23,"Connected"),t.qZA(),t.TgZ(24,"span",58),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(6),t.Oqu((null==e.peer?null:e.peer.alias)||(null==e.peer?null:e.peer.id)),t.xp6(7),t.Oqu(e.peer.id),t.xp6(7),t.Oqu(null==e.peer?null:e.peer.netaddr),t.xp6(5),t.Oqu(e.peer.connected?"True":"False")}}function Ns(n,a){if(1&n&&t.YNc(0,ks,26,4,"mat-expansion-panel",51),2&n){const e=t.oxw();t.Q6J("ngIf",e.peer)}}const Is=function(n,a){return{"mr-6":n,"mr-2":a}};let Ot=(()=>{class n{constructor(e,i,o,l,m,v){this.dialogRef=e,this.data=i,this.store=o,this.actions=l,this.decimalPipe=m,this.commonService=v,this.selectedPeer=new c.NI,this.faExclamationTriangle=x.eHv,this.isCompatibleVersion=!1,this.utxos=[],this.selUTXOs=[],this.flgUseAllBalance=!1,this.totalSelectedUTXOAmount=0,this.channelConnectionError="",this.advancedTitle="Advanced Options",this.totalBalance=0,this.fundingAmount=null,this.selectedPubkey="",this.isPrivate=!1,this.feeRateTypes=s.vn,this.selFeeRate="",this.customFeeRate=null,this.flgMinConf=!1,this.minConfValue=null,this.screenSize="",this.screenSizeEnum=s.cu,this.unSubs=[new d.x,new d.x],this.screenSize=this.commonService.getScreenSize()}ngOnInit(){this.isCompatibleVersion=this.data.message.isCompatibleVersion,this.information=this.data.message.information,this.totalBalance=this.data.message.balance,this.utxos=this.data.message.utxos,this.alertTitle=this.data.alertTitle,this.peer=this.data.message.peer||null,this.peers=this.data.message.peers||[],this.actions.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(o=>o.type===s.sW.UPDATE_API_CALL_STATUS_CL||o.type===s.sW.FETCH_CHANNELS_CL)).subscribe(o=>{o.type===s.sW.UPDATE_API_CALL_STATUS_CL&&o.payload.status===s.Bn.ERROR&&"SaveNewChannel"===o.payload.action&&(this.channelConnectionError=o.payload.message),o.type===s.sW.FETCH_CHANNELS_CL&&this.dialogRef.close()});let e="",i="";this.sortedPeers=this.peers.sort((o,l)=>(e=o.alias?o.alias.toLowerCase():o.id?o.id.toLowerCase():"",i=l.alias?l.alias.toLowerCase():o.id.toLowerCase(),e<i?-1:e>i?1:0)),this.filteredPeers=this.selectedPeer.valueChanges.pipe((0,_.R)(this.unSubs[1]),(0,fs.O)(""),(0,Ft.U)(o=>"string"==typeof o?o:o.alias?o.alias:o.id),(0,Ft.U)(o=>o?this.filterPeers(o):this.sortedPeers.slice()))}filterPeers(e){return this.sortedPeers.filter(i=>0===i.alias.toLowerCase().indexOf(e?e.toLowerCase():""))}displayFn(e){return e&&e.alias?e.alias:e&&e.id?e.id:""}onSelectedPeerChanged(){if(this.channelConnectionError="",this.selectedPubkey=this.selectedPeer.value&&this.selectedPeer.value.id?this.selectedPeer.value.id:null,"string"==typeof this.selectedPeer.value){const e=this.peers.filter(i=>i.alias.length===this.selectedPeer.value.length&&0===i.alias.toLowerCase().indexOf(this.selectedPeer.value?this.selectedPeer.value.toLowerCase():""));1===e.length&&e[0].id&&(this.selectedPubkey=e[0].id)}this.selectedPeer.setErrors(this.selectedPeer.value&&!this.selectedPubkey?{notfound:!0}:null)}onClose(){this.dialogRef.close(!1)}resetData(){this.flgMinConf=!1,this.selFeeRate="",this.minConfValue=null,this.selectedPeer.setValue(""),this.fundingAmount=null,this.isPrivate=!1,this.channelConnectionError="",this.advancedTitle="Advanced Options",this.form.resetForm()}onAdvancedPanelToggle(e){e&&(this.flgMinConf||this.selFeeRate||this.selUTXOs.length&&0!==this.selUTXOs.length)?(this.advancedTitle="Advanced Options",this.flgMinConf&&(this.advancedTitle=this.advancedTitle+" | Min Confirmation Blocks: "+this.minConfValue),this.selFeeRate&&(this.advancedTitle=this.advancedTitle+" | Fee Rate: "+(this.customFeeRate?this.customFeeRate+" (Sats/vB)":this.feeRateTypes.find(i=>i.feeRateId===this.selFeeRate).feeRateType)),this.selUTXOs.length&&this.selUTXOs.length>0&&(this.advancedTitle=this.advancedTitle+" | Total Selected: "+this.selUTXOs.length+" | Selected UTXOs: "+this.decimalPipe.transform(this.totalSelectedUTXOAmount)+" Sats")):this.advancedTitle="Advanced Options"}onUTXOSelectionChange(e){const i={value:0};this.selUTXOs.length&&this.selUTXOs.length>0?(this.totalSelectedUTXOAmount=this.selUTXOs.reduce((o,l)=>(i.value=o.value+l.value,i)).value,this.flgUseAllBalance&&this.onUTXOAllBalanceChange()):(this.totalSelectedUTXOAmount=0,this.fundingAmount=null,this.flgUseAllBalance=!1)}onUTXOAllBalanceChange(){this.fundingAmount=this.flgUseAllBalance?this.totalSelectedUTXOAmount:null}onOpenChannel(){if(!this.peer&&!this.selectedPubkey||!this.fundingAmount||this.totalBalance-this.fundingAmount<0||this.flgMinConf&&!this.minConfValue||"customperkb"===this.selFeeRate&&!this.flgMinConf&&!this.customFeeRate)return!0;const e={peerId:this.peer&&this.peer.id?this.peer.id:this.selectedPubkey,satoshis:this.flgUseAllBalance?"all":this.fundingAmount.toString(),announce:!this.isPrivate,minconf:this.flgMinConf?this.minConfValue:null};e.feeRate="customperkb"===this.selFeeRate&&!this.flgMinConf&&this.customFeeRate?1e3*this.customFeeRate+"perkb":this.selFeeRate,this.selUTXOs.length&&this.selUTXOs.length>0&&(e.utxos=[],this.selUTXOs.forEach(i=>e.utxos.push(i.txid+":"+i.output))),this.store.dispatch((0,y.YX)({payload:e}))}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(D.WI),t.Y36(b.yh),t.Y36(H.eX),t.Y36(u.JJ),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-open-channel"]],viewQuery:function(e,i){if(1&e&&t.Gf(Cs,7),2&e){let o;t.iGM(o=t.CRH())&&(i.form=o.first)}},decls:56,vars:34,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","8","fxFlex","5","fxLayoutAlign","center","mat-button","",1,"btn-close-x","p-0",3,"click"],[1,"padding-gap-x-large"],["fxLayout","column",3,"submit","reset"],["form","ngForm"],["fxLayout","column"],["fxFlex","100",4,"ngIf"],[4,"ngTemplateOutlet"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between center"],["fxFlex","70","fxLayoutAlign","start end"],["matInput","","placeholder","Amount","type","number","tabindex","1","required","","name","amount",3,"ngModel","step","min","max","disabled","ngModelChange"],["amount","ngModel"],["matSuffix",""],[4,"ngIf"],["fxFlex","25","fxLayoutAlign","start center"],["tabindex","2","color","primary","name","isPrivate",3,"ngModel","ngModelChange"],["expanded","false",1,"flat-expansion-panel","mt-2",3,"closed","opened"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayoutAlign.gt-sm","space-between center","fxLayout.gt-sm","row wrap"],["fxFlex","48","fxLayoutAlign","space-between end"],["fxLayoutAlign","start center",3,"fxFlex"],["tabindex","4","placeholder","Fee Rate",3,"value","disabled","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","48","fxLayoutAlign","end center",4,"ngIf"],["fxFlex","48","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","2","tabindex","5","color","primary","name","flgMinConf","fxLayoutAlign","stretch start",3,"ngModel","ngClass","ngModelChange","change"],["fxFlex","98"],["matInput","","placeholder","Min Confirmation Blocks","type","number","name","blocks","tabindex","8",3,"ngModel","step","min","required","disabled","ngModelChange"],["blocks","ngModel"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayoutAlign.gt-sm","space-between center","fxLayout.gt-sm","row wrap",4,"ngIf"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","7","type","reset",1,"mr-1"],["autoFocus","","mat-flat-button","","color","primary","type","submit","tabindex","9"],["peerDetailsExpansionBlock",""],["type","text","placeholder","Peer Alias","aria-label","Peers","matInput","","tabindex","1","required","",3,"formControl","matAutocomplete","change"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value"],["fxFlex","48","fxLayoutAlign","end center"],["matInput","","placeholder","Fee Rate (Sats/vB)","type","number","name","custFeeRate","tabindex","4",3,"ngModel","step","min","required","ngModelChange"],["custFeeRate","ngModel"],["fxFlex","48","fxLayoutAlign","start end"],["tabindex","6","placeholder","Coin Selection","multiple","",3,"value","selectionChange","valueChange"],["fxFlex","48","tabindex","7","color","primary","name","flgUseAllBalance","matTooltip","Use selected UTXOs balance as the amount to be sent. Final amount sent will be less the mining fee.","matTooltipPosition","above",3,"ngModel","disabled","ngModelChange","change"],["fxFlex","100",1,"alert","alert-danger","mt-1"],[1,"mr-1","alert-icon",3,"icon"],["class","flat-expansion-panel my-1","expanded","false",4,"ngIf"],["expanded","false",1,"flat-expansion-panel","my-1"],[1,"font-weight-900"],["fxLayoutAlign","start",1,"font-bold-500"],[1,"foreground-secondary-text"],[1,"w-100","my-1"],["fxFlex","50"],[1,"overflow-wrap","foreground-secondary-text"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.onClose()}),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.TgZ(9,"form",7,8),t.NdJ("submit",function(){return i.onOpenChannel()})("reset",function(){return i.resetData()}),t.TgZ(11,"div",9),t.YNc(12,Zs,8,8,"mat-form-field",10),t.qZA(),t.YNc(13,As,1,0,"ng-container",11),t.TgZ(14,"div",9),t.TgZ(15,"div",12),t.TgZ(16,"mat-form-field",13),t.TgZ(17,"input",14,15),t.NdJ("ngModelChange",function(l){return i.fundingAmount=l}),t.qZA(),t.TgZ(19,"mat-hint"),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"span",16),t._uU(23," Sats "),t.qZA(),t.YNc(24,vs,2,0,"mat-error",17),t.YNc(25,Ls,2,1,"mat-error",17),t.qZA(),t.TgZ(26,"div",18),t.TgZ(27,"mat-slide-toggle",19),t.NdJ("ngModelChange",function(l){return i.isPrivate=l}),t._uU(28,"Private Channel"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"mat-expansion-panel",20),t.NdJ("closed",function(){return i.onAdvancedPanelToggle(!0)})("opened",function(){return i.onAdvancedPanelToggle(!1)}),t.TgZ(30,"mat-expansion-panel-header"),t.TgZ(31,"mat-panel-title"),t.TgZ(32,"span"),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",21),t.TgZ(35,"div",22),t.TgZ(36,"div",23),t.TgZ(37,"mat-form-field",24),t.TgZ(38,"mat-select",25),t.NdJ("valueChange",function(l){return i.selFeeRate=l})("selectionChange",function(){return i.customFeeRate=null}),t.YNc(39,bs,2,2,"mat-option",26),t.qZA(),t.qZA(),t.YNc(40,ws,4,5,"mat-form-field",27),t.qZA(),t.TgZ(41,"div",28),t.TgZ(42,"mat-checkbox",29),t.NdJ("ngModelChange",function(l){return i.flgMinConf=l})("change",function(){return i.flgMinConf?i.selFeeRate=null:i.minConfValue=null}),t.qZA(),t.TgZ(43,"mat-form-field",30),t.TgZ(44,"input",31,32),t.NdJ("ngModelChange",function(l){return i.minConfValue=l}),t.qZA(),t.YNc(46,qs,2,0,"mat-error",17),t.qZA(),t.qZA(),t.qZA(),t.YNc(47,Rs,9,8,"div",33),t.qZA(),t.qZA(),t.qZA(),t.YNc(48,Us,3,2,"div",34),t.TgZ(49,"div",35),t.TgZ(50,"button",36),t._uU(51,"Clear Fields"),t.qZA(),t.TgZ(52,"button",37),t._uU(53,"Open Channel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(54,Ns,1,1,"ng-template",null,38,t.W1O)),2&e){const o=t.MAs(18),l=t.MAs(55);t.xp6(5),t.Oqu(i.alertTitle),t.xp6(7),t.Q6J("ngIf",!i.peer&&i.peers&&i.peers.length>0),t.xp6(1),t.Q6J("ngTemplateOutlet",l),t.xp6(4),t.Q6J("ngModel",i.fundingAmount)("step",1e3)("min",1)("max",i.totalBalance)("disabled",i.flgUseAllBalance),t.xp6(3),t.AsE("Remaining Bal: ",t.lcZ(21,29,i.totalBalance-(i.fundingAmount?i.fundingAmount:0)),"",i.flgUseAllBalance?". Amount replaced by UTXO balance":"",""),t.xp6(4),t.Q6J("ngIf",(null==o.errors?null:o.errors.required)||!i.fundingAmount),t.xp6(1),t.Q6J("ngIf",null==o.errors?null:o.errors.max),t.xp6(2),t.Q6J("ngModel",i.isPrivate),t.xp6(6),t.Oqu(i.advancedTitle),t.xp6(4),t.Q6J("fxFlex","customperkb"!==i.selFeeRate||i.flgMinConf?"100":"48"),t.xp6(1),t.Q6J("value",i.selFeeRate)("disabled",i.flgMinConf),t.xp6(1),t.Q6J("ngForOf",i.feeRateTypes),t.xp6(1),t.Q6J("ngIf","customperkb"===i.selFeeRate&&!i.flgMinConf),t.xp6(2),t.Q6J("ngModel",i.flgMinConf)("ngClass",t.WLB(31,Is,i.screenSize===i.screenSizeEnum.XS||i.screenSize===i.screenSizeEnum.SM,i.screenSize===i.screenSizeEnum.MD||i.screenSize===i.screenSizeEnum.LG||i.screenSize===i.screenSizeEnum.XL)),t.xp6(2),t.Q6J("ngModel",i.minConfValue)("step",1)("min",0)("required",i.flgMinConf)("disabled",!i.flgMinConf),t.xp6(2),t.Q6J("ngIf",i.flgMinConf&&!i.minConfValue),t.xp6(1),t.Q6J("ngIf",i.isCompatibleVersion),t.xp6(1),t.Q6J("ngIf",""!==i.channelConnectionError)}},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,Z.dn,c._Y,c.JL,c.F,u.O5,u.tP,g.KE,M.Nt,c.wV,c.qQ,c.Fd,c.Fj,G.q,gs.F,c.Q7,c.JJ,c.On,g.bx,g.R9,st.Rr,tt.ib,tt.yz,tt.yK,U.gD,u.sg,rt.oG,u.mk,F.oO,V.h,Rt.ZL,c.oH,Rt.XC,B.ey,g.TO,U.$L,Q.gM,k.BN,X.d],pipes:[u.JJ,u.Ov],styles:[".open-inputs-box[_ngcontent-%COMP%]{padding:1.2rem 2.4rem .8rem!important}"]}),n})();function Ms(n,a){if(1&n&&(t.TgZ(0,"span",7),t._uU(1,"Open"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.openChannels)}}function Es(n,a){if(1&n&&(t.TgZ(0,"span",7),t._uU(1,"Pending/Inactive"),t.qZA()),2&n){const e=t.oxw();t.s9C("matBadge",e.pendingChannels)}}let Ps=(()=>{class n{constructor(e,i,o,l){this.logger=e,this.store=i,this.commonService=o,this.router=l,this.openChannels=0,this.pendingChannels=0,this.selNode={},this.information={},this.peers=[],this.utxos=[],this.totalBalance=0,this.links=[{link:"open",name:"Open"},{link:"pending",name:"Pending/Inactive"}],this.activeLink=0,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x]}ngOnInit(){this.activeLink=this.links.findIndex(e=>e.link===this.router.url.substring(this.router.url.lastIndexOf("/")+1)),this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(e=>e instanceof C.Av)).subscribe(e=>{this.activeLink=this.links.findIndex(i=>i.link===e.urlAfterRedirects.substring(e.urlAfterRedirects.lastIndexOf("/")+1))}),this.store.select(f.OL).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.selNode=e.nodeSettings,this.information=e.information,this.totalBalance=e.balance.totalBalance,this.logger.info(e)}),this.store.select(f.Wi).pipe((0,_.R)(this.unSubs[2])).subscribe(e=>{this.peers=e.peers}),this.store.select(f.T4).pipe((0,_.R)(this.unSubs[3])).subscribe(e=>{this.utxos=this.commonService.sortAscByKey(e.utxos.filter(i=>"confirmed"===i.status),"value")}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[4])).subscribe(e=>{this.openChannels=e.activeChannels.length||0,this.pendingChannels=e.pendingChannels.length+e.inactiveChannels.length||0,this.logger.info(e)})}onOpenChannel(){const e={peers:this.peers,information:this.information,balance:this.totalBalance,utxos:this.utxos,isCompatibleVersion:this.commonService.isVersionCompatible(this.information.version,"0.9.0")&&this.commonService.isVersionCompatible(this.information.api_version,"0.4.0")};this.store.dispatch((0,L.qR)({payload:{data:{alertTitle:"Open Channel",message:e,component:Ot}}}))}onSelectedTabChange(e){this.router.navigateByUrl("/cl/connections/channels/"+this.links[e.index].link)}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(R.v),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channels-tables"]],decls:12,vars:1,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayout","row"],["mat-flat-button","","color","primary","type","submit","tabindex","1",3,"click"],["fxLayout","column","fxFlex","100",1,"my-2","bordered-box"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],["mat-tab-label",""],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap-x-large"],["matBadgeOverlap","false",1,"tab-badge",3,"matBadge"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.onOpenChannel()}),t._uU(3,"Open Channel"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-tab-group",4),t.NdJ("selectedIndexChange",function(l){return i.activeLink=l})("selectedTabChange",function(l){return i.onSelectedTabChange(l)}),t.TgZ(6,"mat-tab"),t.YNc(7,Ms,2,1,"ng-template",5),t.qZA(),t.TgZ(8,"mat-tab"),t.YNc(9,Es,2,1,"ng-template",5),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"router-outlet"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("selectedIndex",i.activeLink))},directives:[p.xw,p.yH,p.Wh,O.lW,N.SP,N.uX,N.uD,C.lC,_t.k],styles:[""]}),n})();function Ds(n,a){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",9),t.TgZ(2,"div",1),t.TgZ(3,"h4",11),t._uU(4,"Funding Transaction Id"),t.qZA(),t.TgZ(5,"span",12),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t._UZ(7,"mat-divider",13),t.qZA()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(e.channel.funding_txid),t.xp6(1),t.Q6J("inset",!0)}}function Js(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Show Advanced"),t.qZA())}function Qs(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Hide Advanced"),t.qZA())}function Ys(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("copied",function(o){return t.CHM(e),t.oxw().onCopyChanID(o)}),t._uU(1,"Copy Short Channel ID"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("payload",e.channel.short_channel_id)}}function Bs(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClose()}),t._uU(1,"OK"),t.qZA()}}const Hs=function(n){return{"xs-scroll-y":n}},Vs=function(n,a){return{"mt-2":n,"mt-1":a}};let Ut=(()=>{class n{constructor(e,i,o,l,m){this.dialogRef=e,this.data=i,this.logger=o,this.commonService=l,this.snackBar=m,this.faReceipt=x.dLy,this.showAdvanced=!1,this.showCopy=!0,this.showCopyField=null,this.screenSize="",this.screenSizeEnum=s.cu}ngOnInit(){this.channel=this.data.channel,this.showCopy=this.data.showCopy,this.screenSize=this.commonService.getScreenSize()}onClose(){this.dialogRef.close(!1)}onShowAdvanced(){this.showAdvanced=!this.showAdvanced}onCopyChanID(e){this.snackBar.open("Short channel ID "+e+" copied."),this.logger.info("Copied Text: "+e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(D.WI),t.Y36(q.mQ),t.Y36(R.v),t.Y36(j.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-information"]],decls:94,vars:40,consts:[["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","space-between stretch"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["tabindex","3","fxFlex","5","fxLayoutAlign","center","mat-button","",1,"btn-close-x","p-0",3,"click"],[1,"padding-gap-x-large",3,"ngClass"],["fxLayout","column"],["fxLayout","row"],["fxFlex","50"],["fxLayoutAlign","start",1,"font-bold-500"],[1,"foreground-secondary-text"],[1,"my-1",3,"inset"],["fxFlex","25"],[1,"overflow-wrap","foreground-secondary-text"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxFlex","100",3,"ngClass"],["mat-stroked-button","","color","primary","type","reset","tabindex","1",1,"mr-1",3,"click"],[4,"ngIf","ngIfElse"],["hideAdvancedText",""],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","submit","rtlClipboard","",3,"payload","copied",4,"ngIf"],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","button",3,"click",4,"ngIf"],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","submit","rtlClipboard","",3,"payload","copied"],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","button",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t._UZ(4,"fa-icon",4),t.TgZ(5,"span",5),t._uU(6,"Channel Information"),t.qZA(),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.onClose()}),t._uU(8,"X"),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-content",7),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"h4",11),t._uU(14,"Short Channel ID"),t.qZA(),t.TgZ(15,"span",12),t._uU(16),t.qZA(),t.qZA(),t.TgZ(17,"div",10),t.TgZ(18,"h4",11),t._uU(19,"Peer Alias"),t.qZA(),t.TgZ(20,"span",12),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t._UZ(22,"mat-divider",13),t.TgZ(23,"div",9),t.TgZ(24,"div",1),t.TgZ(25,"h4",11),t._uU(26,"Channel ID"),t.qZA(),t.TgZ(27,"span",12),t._uU(28),t.qZA(),t.qZA(),t.qZA(),t._UZ(29,"mat-divider",13),t.TgZ(30,"div",9),t.TgZ(31,"div",1),t.TgZ(32,"h4",11),t._uU(33,"Peer Public Key"),t.qZA(),t.TgZ(34,"span",12),t._uU(35),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"mat-divider",13),t.TgZ(37,"div",9),t.TgZ(38,"div",14),t.TgZ(39,"h4",11),t._uU(40,"mSatoshi to Us"),t.qZA(),t.TgZ(41,"span",15),t._uU(42),t.ALo(43,"number"),t.qZA(),t.qZA(),t.TgZ(44,"div",14),t.TgZ(45,"h4",11),t._uU(46,"Spendable (mSats)"),t.qZA(),t.TgZ(47,"span",15),t._uU(48),t.ALo(49,"number"),t.qZA(),t.qZA(),t.TgZ(50,"div",14),t.TgZ(51,"h4",11),t._uU(52,"Total (mSats)"),t.qZA(),t.TgZ(53,"span",15),t._uU(54),t.ALo(55,"number"),t.qZA(),t.qZA(),t.TgZ(56,"div",14),t.TgZ(57,"h4",11),t._uU(58,"State"),t.qZA(),t.TgZ(59,"span",15),t._uU(60),t.qZA(),t.qZA(),t.qZA(),t._UZ(61,"mat-divider",13),t.TgZ(62,"div",9),t.TgZ(63,"div",14),t.TgZ(64,"h4",11),t._uU(65,"Our Reserve (Sats)"),t.qZA(),t.TgZ(66,"span",15),t._uU(67),t.ALo(68,"number"),t.qZA(),t.qZA(),t.TgZ(69,"div",14),t.TgZ(70,"h4",11),t._uU(71,"Their Reserve (Sats)"),t.qZA(),t.TgZ(72,"span",15),t._uU(73),t.ALo(74,"number"),t.qZA(),t.qZA(),t.TgZ(75,"div",14),t.TgZ(76,"h4",11),t._uU(77,"Connected"),t.qZA(),t.TgZ(78,"span",15),t._uU(79),t.qZA(),t.qZA(),t.TgZ(80,"div",14),t.TgZ(81,"h4",11),t._uU(82,"Private"),t.qZA(),t.TgZ(83,"span",15),t._uU(84),t.qZA(),t.qZA(),t.qZA(),t._UZ(85,"mat-divider",13),t.YNc(86,Ds,8,2,"div",16),t.TgZ(87,"div",17),t.TgZ(88,"button",18),t.NdJ("click",function(){return i.onShowAdvanced()}),t.YNc(89,Js,2,0,"p",19),t.YNc(90,Qs,2,0,"ng-template",null,20,t.W1O),t.qZA(),t.YNc(92,Ys,2,1,"button",21),t.YNc(93,Bs,2,0,"button",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(91);t.xp6(4),t.Q6J("icon",i.faReceipt),t.xp6(5),t.Q6J("ngClass",t.VKq(35,Hs,i.screenSize===i.screenSizeEnum.XS)),t.xp6(7),t.Oqu(i.channel.short_channel_id),t.xp6(5),t.Oqu(i.channel.alias),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(i.channel.channel_id),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(i.channel.id),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(t.lcZ(43,25,i.channel.msatoshi_to_us)),t.xp6(6),t.Oqu(t.lcZ(49,27,i.channel.spendable_msatoshi)),t.xp6(6),t.Oqu(t.lcZ(55,29,i.channel.msatoshi_total)),t.xp6(6),t.Oqu(i.channel.state),t.xp6(1),t.Q6J("inset",!0),t.xp6(6),t.Oqu(t.lcZ(68,31,i.channel.our_channel_reserve_satoshis)),t.xp6(6),t.Oqu(t.lcZ(74,33,i.channel.their_channel_reserve_satoshis)),t.xp6(6),t.Oqu(i.channel.connected?"Yes":"No"),t.xp6(5),t.Oqu(i.channel.private?"Yes":"No"),t.xp6(1),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngIf",i.showAdvanced),t.xp6(1),t.Q6J("ngClass",t.WLB(37,Vs,!i.showAdvanced,i.showAdvanced)),t.xp6(2),t.Q6J("ngIf",!i.showAdvanced)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",i.showCopy),t.xp6(1),t.Q6J("ngIf",!i.showCopy)}},directives:[p.xw,p.Wh,p.yH,Z.dk,k.BN,O.lW,Z.dn,u.mk,F.oO,X.d,u.O5,V.h,nt.y],pipes:[u.JJ],styles:[""]}),n})();function zs(n,a){1&n&&t._UZ(0,"mat-progress-bar",33)}function Xs(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Short Channel ID "),t.qZA())}function Gs(n,a){if(1&n&&(t.TgZ(0,"span",40),t._UZ(1,"fa-icon",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faEyeSlash)}}function Ws(n,a){if(1&n&&(t.TgZ(0,"span",42),t._UZ(1,"fa-icon",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("icon",e.faEye)}}const kt=function(n){return{"max-width":n}};function Ks(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"div",36),t.YNc(2,Gs,2,1,"span",37),t.YNc(3,Ws,2,1,"span",38),t.TgZ(4,"span",39),t._uU(5),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(4,kt,i.screenSize===i.screenSizeEnum.XS?"12rem":"22rem")),t.xp6(1),t.Q6J("ngIf",e.private),t.xp6(1),t.Q6J("ngIf",!e.private),t.xp6(2),t.Oqu(null==e?null:e.short_channel_id)}}function $s(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Alias "),t.qZA())}function js(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"div",36),t.TgZ(2,"span",39),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(2,kt,i.screenSize===i.screenSizeEnum.XS?"12rem":"22rem")),t.xp6(2),t.Oqu(null==e?null:e.alias)}}function tl(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Connected "),t.qZA())}function el(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null!=e&&e.connected?"Connected":"Disconnected"," ")}}function nl(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Private "),t.qZA())}function il(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null!=e&&e.private?"Private":"Public"," ")}}function al(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," State "),t.qZA())}function ol(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.state,"")}}function sl(n,a){1&n&&(t.TgZ(0,"th",43),t._uU(1," Local Balance (Sats) "),t.qZA())}function ll(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",44),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,(null==e?null:e.msatoshi_to_us)/1e3,(null==e?null:e.msatoshi_to_us)<1e3?"1.0-4":"1.0-0")," ")}}function rl(n,a){1&n&&(t.TgZ(0,"th",43),t._uU(1," Remote Balance (Sats) "),t.qZA())}function cl(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",44),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,(null==e?null:e.msatoshi_to_them)/1e3,(null==e?null:e.msatoshi_to_them)<1e3?"1.0-4":"1.0-0")," ")}}function ul(n,a){1&n&&(t.TgZ(0,"th",43),t._uU(1," Total mSatoshis "),t.qZA())}function pl(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",44),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.msatoshi_total)," ")}}function ml(n,a){1&n&&(t.TgZ(0,"th",43),t._uU(1," Spendable Satoshi "),t.qZA())}function dl(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",44),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.spendable_msatoshi)," ")}}function _l(n,a){1&n&&(t.TgZ(0,"th",45),t._uU(1,"Balance Score "),t.qZA())}function hl(n,a){if(1&n&&(t.TgZ(0,"td",46),t.TgZ(1,"div",47),t.TgZ(2,"mat-hint",48),t._uU(3),t.ALo(4,"number"),t.qZA(),t.qZA(),t._UZ(5,"mat-progress-bar",49),t.qZA()),2&n){const e=a.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,e.balancedness||0)),t.xp6(2),t.s9C("value",e.msatoshi_to_us&&e.msatoshi_to_us>0?+e.msatoshi_to_us/(+e.msatoshi_to_us+ +e.msatoshi_to_them)*100:0)}}function fl(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",50),t.TgZ(1,"div",51),t.TgZ(2,"mat-select",52),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().onChannelUpdate("all")}),t._uU(5,"Update Fee Policy"),t.qZA(),t.TgZ(6,"mat-option",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDownloadCSV()}),t._uU(7,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function gl(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",54),t.TgZ(1,"div",55),t.TgZ(2,"mat-select",56),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",53),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw().onChannelClick(m,o)}),t._uU(5,"View Info"),t.qZA(),t.TgZ(6,"mat-option",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().onViewRemotePolicy(l)}),t._uU(7,"View Remote Fee"),t.qZA(),t.TgZ(8,"mat-option",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().onChannelUpdate(l)}),t._uU(9,"Update Fee Policy"),t.qZA(),t.TgZ(10,"mat-option",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().onChannelClose(l)}),t._uU(11,"Close Channel"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Cl(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No peers connected. Add a peer in order to open a channel."),t.qZA())}function xl(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No channel available."),t.qZA())}function yl(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting channels..."),t.qZA())}function Tl(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorMessage)}}function Zl(n,a){if(1&n&&(t.TgZ(0,"td",57),t.YNc(1,Cl,2,0,"p",58),t.YNc(2,xl,2,0,"p",58),t.YNc(3,yl,2,0,"p",58),t.YNc(4,Tl,2,1,"p",58),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.numPeers<1&&(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",e.numPeers>0&&(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.ERROR)}}const Al=function(n){return{"display-none":n}};function vl(n,a){if(1&n&&t._UZ(0,"tr",59),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,Al,e.numPeers>0&&(null==e.channels?null:e.channels.data)&&(null==e.channels||null==e.channels.data?null:e.channels.data.length)>0))}}function Ll(n,a){1&n&&t._UZ(0,"tr",60)}function bl(n,a){1&n&&t._UZ(0,"tr",61)}const Sl=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},wl=function(){return["no_peer"]};let ql=(()=>{class n{constructor(e,i,o,l,m){this.logger=e,this.store=i,this.rtlEffects=o,this.clEffects=l,this.commonService=m,this.faEye=x.Mdf,this.faEyeSlash=x.Aq,this.totalBalance=0,this.displayedColumns=[],this.channelsData=[],this.myChanPolicy={},this.information={},this.numPeers=-1,this.feeRateTypes=s.vn,this.selFilter="",this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["alias","msatoshi_to_us","msatoshi_to_them","actions"]):this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["short_channel_id","alias","msatoshi_to_us","msatoshi_to_them","actions"]):(this.flgSticky=!0,this.displayedColumns=["short_channel_id","alias","msatoshi_to_us","msatoshi_to_them","balancedness","actions"])}ngOnInit(){this.store.select(f.jK).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.information=e.information,this.numPeers=e.numPeers,this.totalBalance=e.balance.totalBalance,this.logger.info(e)}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.channelsData=e.activeChannels,this.channelsData.length>0&&this.loadChannelsTable(this.channelsData),this.logger.info(e)})}ngAfterViewInit(){this.channelsData.length>0&&this.loadChannelsTable(this.channelsData)}onViewRemotePolicy(e){this.store.dispatch((0,y.$A)({payload:{uiMessage:s.m6.GET_REMOTE_POLICY,shortChannelID:e.short_channel_id,showError:!0}})),this.clEffects.setLookupCL.pipe((0,z.q)(1)).subscribe(i=>{if(0===i.length)return!1;let o={};o=i[0].source!==this.information.id?i[0]:i[1],this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Remote Channel Policy",titleMessage:"Remote policy for Channel: "+(e.alias||e.short_channel_id?e.alias&&e.short_channel_id?e.alias+" ("+e.short_channel_id+")":e.alias?e.alias:e.short_channel_id:e.channel_id),message:[[{key:"base_fee_millisatoshi",value:o.base_fee_millisatoshi,title:"Base Fees (mSats)",width:34,type:s.Gi.NUMBER},{key:"fee_per_millionth",value:o.fee_per_millionth,title:"Fee/Millionth",width:33,type:s.Gi.NUMBER},{key:"delay",value:o.delay,title:"Delay",width:33,type:s.Gi.NUMBER}]]}}}))})}onChannelUpdate(e){"all"!==e&&"ONCHAIN"===e.state||("all"===e?(this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Update Fee Policy",noBtnText:"Cancel",yesBtnText:"Update All",message:[],titleMessage:"Update fee policy for all channels",flgShowInput:!0,getInputs:[{placeholder:"Base Fee (mSats)",inputType:"number",inputValue:1e3,width:48},{placeholder:"Fee Rate (mili mSats)",inputType:"number",inputValue:1,min:1,width:48,hintFunction:this.percentHintFunction}]}}})),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[1])).subscribe(o=>{o&&this.store.dispatch((0,y.pW)({payload:{baseFeeMsat:o[0].inputValue,feeRate:o[1].inputValue,channelId:"all"}}))})):(this.myChanPolicy={fee_base_msat:0,fee_rate_milli_msat:0},this.store.dispatch((0,y.$A)({payload:{uiMessage:s.m6.GET_CHAN_POLICY,shortChannelID:e.short_channel_id,showError:!1}})),this.clEffects.setLookupCL.pipe((0,z.q)(1)).subscribe(i=>{this.myChanPolicy=i.length>0&&i[0].source===this.information.id?{fee_base_msat:i[0].base_fee_millisatoshi,fee_rate_milli_msat:i[0].fee_per_millionth}:i.length>1&&i[1].source===this.information.id?{fee_base_msat:i[1].base_fee_millisatoshi,fee_rate_milli_msat:i[1].fee_per_millionth}:{fee_base_msat:0,fee_rate_milli_msat:0},this.logger.info(this.myChanPolicy),this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Update Fee Policy",noBtnText:"Cancel",yesBtnText:"Update",message:[],titleMessage:"Update fee policy for Channel: "+(e.alias||e.short_channel_id?e.alias&&e.short_channel_id?e.alias+" ("+e.short_channel_id+")":e.alias?e.alias:e.short_channel_id:e.channel_id),flgShowInput:!0,getInputs:[{placeholder:"Base Fee (mSats)",inputType:"number",inputValue:""===this.myChanPolicy.fee_base_msat?0:this.myChanPolicy.fee_base_msat,width:48},{placeholder:"Fee Rate (mili mSats)",inputType:"number",inputValue:this.myChanPolicy.fee_rate_milli_msat,min:1,width:48,hintFunction:this.percentHintFunction}]}}}))}),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[2])).subscribe(i=>{i&&this.store.dispatch((0,y.pW)({payload:{baseFeeMsat:i[0].inputValue,feeRate:i[1].inputValue,channelId:e.channel_id}}))})),this.applyFilter())}percentHintFunction(e){return(e/1e4).toString()+"%"}onChannelClose(e){this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Close Channel",titleMessage:"Closing channel: "+(e.alias||e.short_channel_id?e.alias&&e.short_channel_id?e.alias+" ("+e.short_channel_id+")":e.alias?e.alias:e.short_channel_id:e.channel_id),noBtnText:"Cancel",yesBtnText:"Close Channel"}}})),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[3])).subscribe(i=>{i&&this.store.dispatch((0,y.BL)({payload:{id:e.id,channelId:e.channel_id,force:!1}}))})}applyFilter(){this.channels.filter=this.selFilter.trim().toLowerCase()}onChannelClick(e,i){this.store.dispatch((0,L.qR)({payload:{data:{channel:e,showCopy:!0,component:Ut}}}))}loadChannelsTable(e){e.sort((i,o)=>i.active===o.active?0:o.active?1:-1),this.channels=new r.by([...e]),this.channels.filterPredicate=(i,o)=>((i.connected?"connected":"disconnected")+(i.channel_id?i.channel_id.toLowerCase():"")+(i.short_channel_id?i.short_channel_id.toLowerCase():"")+(i.id?i.id.toLowerCase():"")+(i.alias?i.alias.toLowerCase():"")+(i.private?"private":"public")+(i.state?i.state.toLowerCase():"")+(i.funding_txid?i.funding_txid.toLowerCase():"")+(i.msatoshi_to_us?i.msatoshi_to_us:"")+(i.msatoshi_total?i.msatoshi_total:"")+(i.their_channel_reserve_satoshis?i.their_channel_reserve_satoshis:"")+(i.our_channel_reserve_satoshis?i.our_channel_reserve_satoshis:"")+(i.spendable_msatoshi?i.spendable_msatoshi:"")).includes(o),this.channels.sort=this.sort,this.channels.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.channels.paginator=this.paginator,this.logger.info(this.channels)}onDownloadCSV(){this.channels.data&&this.channels.data.length>0&&this.commonService.downloadFile(this.channels.data,"Open-channels")}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(K.V),t.Y36(et.s),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-open-table"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Channels")}])],decls:48,vars:14,consts:[["fxLayout","column",1,"padding-gap"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","name","filter","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"table-container","w-100",3,"perfectScrollbar"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","short_channel_id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","connected"],["matColumnDef","private"],["matColumnDef","state"],["matColumnDef","msatoshi_to_us"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","msatoshi_to_them"],["matColumnDef","msatoshi_total"],["matColumnDef","spendable_msatoshi"],["matColumnDef","balancedness"],["mat-header-cell","","mat-sort-header","","class","pl-3",4,"matHeaderCellDef"],["mat-cell","","class","pl-3",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","pl-1",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center","class","pl-1",4,"matCellDef"],["matColumnDef","no_peer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"ellipsis-parent",3,"ngStyle"],["class","mr-1","matTooltip","Private","matTooltipPosition","right",4,"ngIf"],["class","mr-1","matTooltip","Public","matTooltipPosition","right",4,"ngIf"],[1,"ellipsis-child"],["matTooltip","Private","matTooltipPosition","right",1,"mr-1"],[3,"icon"],["matTooltip","Public","matTooltipPosition","right",1,"mr-1"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","","mat-sort-header","",1,"pl-3"],["mat-cell","",1,"pl-3"],["fxLayout","row"],["fxFlex","100","fxLayoutAlign","center center",1,"font-size-80"],["mode","determinate",3,"value"],["mat-header-cell","",1,"pl-1"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"pl-1"],["fxLayoutAlign","center center",1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","2",1,"mr-0"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"input",4),t.NdJ("keyup",function(){return i.applyFilter()})("ngModelChange",function(l){return i.selFilter=l}),t.qZA(),t.qZA(),t.qZA(),t.YNc(5,zs,1,0,"mat-progress-bar",5),t.TgZ(6,"div",6),t.TgZ(7,"table",7,8),t.ynx(9,9),t.YNc(10,Xs,2,0,"th",10),t.YNc(11,Ks,6,6,"td",11),t.BQk(),t.ynx(12,12),t.YNc(13,$s,2,0,"th",10),t.YNc(14,js,4,4,"td",11),t.BQk(),t.ynx(15,13),t.YNc(16,tl,2,0,"th",10),t.YNc(17,el,2,1,"td",11),t.BQk(),t.ynx(18,14),t.YNc(19,nl,2,0,"th",10),t.YNc(20,il,2,1,"td",11),t.BQk(),t.ynx(21,15),t.YNc(22,al,2,0,"th",10),t.YNc(23,ol,2,1,"td",11),t.BQk(),t.ynx(24,16),t.YNc(25,sl,2,0,"th",17),t.YNc(26,ll,4,4,"td",11),t.BQk(),t.ynx(27,18),t.YNc(28,rl,2,0,"th",17),t.YNc(29,cl,4,4,"td",11),t.BQk(),t.ynx(30,19),t.YNc(31,ul,2,0,"th",17),t.YNc(32,pl,4,3,"td",11),t.BQk(),t.ynx(33,20),t.YNc(34,ml,2,0,"th",17),t.YNc(35,dl,4,3,"td",11),t.BQk(),t.ynx(36,21),t.YNc(37,_l,2,0,"th",22),t.YNc(38,hl,6,4,"td",23),t.BQk(),t.ynx(39,24),t.YNc(40,fl,8,0,"th",25),t.YNc(41,gl,12,0,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,Zl,5,4,"td",28),t.BQk(),t.YNc(44,vl,1,3,"tr",29),t.YNc(45,Ll,1,0,"tr",30),t.YNc(46,bl,1,0,"tr",31),t.qZA(),t.qZA(),t._UZ(47,"mat-paginator",32),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngModel",i.selFilter),t.xp6(1),t.Q6J("ngIf",i.apiCallStatus.status===i.apiCallStatusEnum.INITIATED),t.xp6(2),t.Q6J("dataSource",i.channels)("ngClass",t.VKq(11,Sl,""!==i.errorMessage)),t.xp6(37),t.Q6J("matFooterRowDef",t.DdM(13,wl)),t.xp6(1),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",i.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions)("showFirstLastButtons",i.screenSize!==i.screenSizeEnum.XS))},directives:[p.xw,p.Wh,p.yH,g.KE,M.Nt,c.Fj,c.JJ,c.On,u.O5,Y.$V,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,u.PC,F.Zl,Q.gM,k.BN,g.bx,U.gD,U.$L,B.ey,r.yh,r.Q2,r.XQ,r.Gk],pipes:[u.JJ],styles:[".mat-column-short_channel_id[_ngcontent-%COMP%]{flex:0 0 15%;width:15%}.mat-column-short_channel_id[_ngcontent-%COMP%]   .ellipsis-parent[_ngcontent-%COMP%]{display:flex}.mat-column-alias[_ngcontent-%COMP%]{flex:0 0 20%;width:20%}.mat-column-alias[_ngcontent-%COMP%]   .ellipsis-parent[_ngcontent-%COMP%]{display:flex}.mat-column-balancedness[_ngcontent-%COMP%]{padding-left:3rem;flex:0 0 22%;width:22%}.mat-column-state[_ngcontent-%COMP%], .mat-column-msatoshi_to_us[_ngcontent-%COMP%], .mat-column-msatoshi_to_them[_ngcontent-%COMP%]{flex:1 1 15%;width:15%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (max-width: 37.5em){.mat-column-state[_ngcontent-%COMP%], .mat-column-msatoshi_to_us[_ngcontent-%COMP%], .mat-column-msatoshi_to_them[_ngcontent-%COMP%]{white-space:unset}}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}.mat-column-actions[_ngcontent-%COMP%]   .bordered-box.table-actions-select[_ngcontent-%COMP%]{flex:0 0 100%}@media only screen and (max-width: 37.5em){.mat-column-actions[_ngcontent-%COMP%]   .bordered-box.table-actions-select[_ngcontent-%COMP%]{flex:0 0 80%}}"]}),n})();const Fl=["outputIdx"];function Rl(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Output Index required."),t.qZA())}function Ol(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid index value."),t.qZA())}function Ul(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Fees is required."),t.qZA())}function kl(n,a){if(1&n&&(t.TgZ(0,"div",27),t._UZ(1,"fa-icon",13),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(2),t.Oqu(e.bumpFeeError)}}let Nl=(()=>{class n{constructor(e,i,o,l,m,v){this.actions=e,this.dialogRef=i,this.data=o,this.store=l,this.logger=m,this.snackBar=v,this.newAddress="",this.fees=null,this.outputIndex=null,this.faCopy=x.kZ_,this.faInfoCircle=x.sqG,this.faExclamationTriangle=x.eHv,this.bumpFeeError="",this.unSubs=[new d.x,new d.x]}set payReq(e){e&&(this.outputIdx=e)}ngOnInit(){this.bumpFeeChannel=this.data.channel}onBumpFee(){if(!this.outputIndex&&0!==this.outputIndex||!this.fees)return!0;this.bumpFeeError="",this.store.dispatch((0,y._E)({payload:s._t[0]})),this.actions.pipe((0,E.h)(e=>e.type===s.sW.SET_NEW_ADDRESS_CL),(0,z.q)(1)).subscribe(e=>{this.store.dispatch((0,y.Wi)({payload:{address:e.payload,satoshis:"all",feeRate:this.fees,utxos:[this.bumpFeeChannel.funding_txid+":"+this.outputIndex.toString()]}}))}),this.actions.pipe((0,E.h)(e=>e.type===s.sW.SET_CHANNEL_TRANSACTION_RES_CL),(0,z.q)(1)).subscribe(e=>{this.store.dispatch((0,L.jW)({payload:"Successfully bumped the fee. Use the block explorer to verify transaction."})),this.dialogRef.close()}),this.actions.pipe((0,E.h)(e=>e.type===s.sW.UPDATE_API_CALL_STATUS_CL),(0,_.R)(this.unSubs[0])).subscribe(e=>{e.payload.status===s.Bn.ERROR&&("SetChannelTransaction"===e.payload.action||"GenerateNewAddress"===e.payload.action)&&(this.logger.error(e.payload.message),this.bumpFeeError=e.payload.message)})}onCopyID(e){this.snackBar.open("Transaction ID copied.")}resetData(){this.bumpFeeError="",this.fees=null,this.outputIndex=null,this.outputIdx.control.setErrors(null)}onClose(){this.dialogRef.close(!1)}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H.eX),t.Y36(D.so),t.Y36(D.WI),t.Y36(b.yh),t.Y36(q.mQ),t.Y36(j.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-bump-fee"]],viewQuery:function(e,i){if(1&e&&t.Gf(Fl,5),2&e){let o;t.iGM(o=t.CRH())&&(i.payReq=o.first)}},decls:47,vars:15,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","8","fxFlex","5","fxLayoutAlign","center","mat-button","",1,"btn-close-x","p-0",3,"click"],[1,"padding-gap-x-large"],["fxLayout","column"],["fxLayout","column",1,"bordered-box","mb-1","p-2"],["fxLayoutAlign","start center",1,"pb-1","word-break"],["matSuffix","","rtlClipboard","","matTooltip","Copy transaction ID",1,"ml-1",3,"icon","payload","copied"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxFlex","100",1,"alert","alert-info"],[1,"mr-1","alert-icon",3,"icon"],["fxLayout","column","fxFlex","100"],[1,"pl-1"],["fxLayout","row","fxFlex","100","fxLayoutAlign","space-between center"],["fxFlex","49"],["autoFocus","","matInput","","placeholder","Output Index","type","number","tabindex","1","required","","name","outputIdx",3,"ngModel","step","min","ngModelChange"],["outputIdx","ngModel"],[4,"ngIf"],["matInput","","placeholder","Fees (Sats/vByte)","type","number","name","fees","required","","tabindex","4",3,"ngModel","step","min","ngModelChange"],["fee","ngModel"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-stroked-button","","color","primary","type","reset","tabindex","5","default","",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","type","submit","tabindex","6",3,"click"],["fxFlex","100",1,"alert","alert-danger","mt-1"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5,"Bump Fee"),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.onClose()}),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.TgZ(9,"form",7),t.TgZ(10,"div",8),t.TgZ(11,"p",9),t._uU(12),t.TgZ(13,"fa-icon",10),t.NdJ("copied",function(l){return i.onCopyID(l)}),t.qZA(),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"fa-icon",13),t.TgZ(17,"span",14),t._uU(18,"Bumping fee on pending open channels is an advanced feature, attempt it only if you are familiar with the functionality of Bitcoin transactions. "),t.TgZ(19,"div"),t._uU(20,"Before attempting fee bump ensure the following:"),t.qZA(),t.TgZ(21,"div",15),t._uU(22,"1: Use a Bitcoin block explorer to ensure that channel opening transaction is not confirmed."),t.qZA(),t.TgZ(23,"div",15),t._uU(24,"2: The channel opening transaction must have a sizable change output, which can be spent further. The fee cannot be bumped without the change output."),t.qZA(),t.TgZ(25,"div",15),t._uU(26,"3: Find the index value of the change output via a block explorer."),t.qZA(),t.TgZ(27,"div",15),t._uU(28,"4: Enter the index value of the change output in the form below and the desired fee rate."),t.qZA(),t.TgZ(29,"div",15),t._uU(30,"5: Upon successful fee bump, use your block explorer to track the child transaction in the mempool, which should be linked with the change output transaction."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"mat-form-field",17),t.TgZ(33,"input",18,19),t.NdJ("ngModelChange",function(l){return i.outputIndex=l}),t.qZA(),t.YNc(35,Rl,2,0,"mat-error",20),t.YNc(36,Ol,2,0,"mat-error",20),t.qZA(),t.TgZ(37,"mat-form-field",17),t.TgZ(38,"input",21,22),t.NdJ("ngModelChange",function(l){return i.fees=l}),t.qZA(),t.YNc(40,Ul,2,0,"mat-error",20),t.qZA(),t.qZA(),t.YNc(41,kl,4,2,"div",23),t.qZA(),t.qZA(),t.TgZ(42,"div",24),t.TgZ(43,"button",25),t.NdJ("click",function(){return i.resetData()}),t._uU(44,"Clear"),t.qZA(),t.TgZ(45,"button",26),t.NdJ("click",function(){return i.onBumpFee()}),t._uU(46),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(34);t.xp6(12),t.hij("Bump fee for transaction id: ",null==i.bumpFeeChannel?null:i.bumpFeeChannel.funding_txid," "),t.xp6(1),t.Q6J("icon",i.faCopy)("payload",null==i.bumpFeeChannel?null:i.bumpFeeChannel.funding_txid),t.xp6(3),t.Q6J("icon",i.faInfoCircle),t.xp6(17),t.Q6J("ngModel",i.outputIndex)("step",1)("min",0),t.xp6(2),t.Q6J("ngIf",null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.errors?null:o.errors.pendingChannelOutputIndex),t.xp6(2),t.Q6J("ngModel",i.fees)("step",1)("min",0),t.xp6(2),t.Q6J("ngIf",!i.fees),t.xp6(1),t.Q6J("ngIf",""!==i.bumpFeeError),t.xp6(5),t.Oqu(""!==i.bumpFeeError?"Retry Bump Fee":"Bump Fee")}},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,Z.dn,c._Y,c.JL,c.F,k.BN,g.R9,nt.y,Q.gM,g.KE,M.Nt,c.wV,c.qQ,c.Fj,G.q,V.h,c.Q7,c.JJ,c.On,u.O5,g.TO],styles:[""]}),n})();function Il(n,a){1&n&&t._UZ(0,"mat-progress-bar",30)}function Ml(n,a){1&n&&(t.TgZ(0,"th",31),t._uU(1," Short Channel ID "),t.qZA())}function El(n,a){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.short_channel_id,"")}}function Pl(n,a){1&n&&(t.TgZ(0,"th",31),t._uU(1," Alias "),t.qZA())}function Dl(n,a){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.alias)}}function Jl(n,a){1&n&&(t.TgZ(0,"th",31),t._uU(1," Connected "),t.qZA())}function Ql(n,a){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null!=e&&e.connected?"Connected":"Disconnected"," ")}}function Yl(n,a){1&n&&(t.TgZ(0,"th",31),t._uU(1," Private "),t.qZA())}function Bl(n,a){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null!=e&&e.private?"Private":"Public"," ")}}function Hl(n,a){1&n&&(t.TgZ(0,"th",31),t._uU(1," State "),t.qZA())}const Vl=function(n){return{"max-width":n}};function zl(n,a){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngStyle",t.VKq(2,Vl,i.screenSize===i.screenSizeEnum.XS?"10rem":"")),t.xp6(1),t.hij(" ",i.CLChannelPendingState[null==e?null:e.state]," ")}}function Xl(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," mSatoshi To Us "),t.qZA())}function Gl(n,a){if(1&n&&(t.TgZ(0,"td",32),t.TgZ(1,"span",35),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.msatoshi_to_us)," ")}}function Wl(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Total (Sats) "),t.qZA())}function Kl(n,a){if(1&n&&(t.TgZ(0,"td",32),t.TgZ(1,"span",35),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,(null==e?null:e.msatoshi_total)/1e3)," ")}}function $l(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1," Spendable Satoshi "),t.qZA())}function jl(n,a){if(1&n&&(t.TgZ(0,"td",32),t.TgZ(1,"span",35),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.spendable_msatoshi)," ")}}function tr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",36),t.TgZ(1,"div",37),t.TgZ(2,"mat-select",38),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function er(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onChannelClose(o)}),t._uU(1,"Close Channel"),t.qZA()}}function nr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onBumpFee(o)}),t._uU(1,"Bump Fee"),t.qZA()}}function ir(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",40),t.TgZ(1,"div",37),t.TgZ(2,"mat-select",41),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",39),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw().onChannelClick(m,o)}),t._uU(5,"View Info"),t.qZA(),t.YNc(6,er,2,0,"mat-option",42),t.YNc(7,nr,2,0,"mat-option",42),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.xp6(6),t.Q6J("ngIf",i.isCompatibleVersion&&("CHANNELD_SHUTTING_DOWN"===e.state||"CLOSINGD_SIGEXCHANGE"===e.state||!e.connected&&"CHANNELD_NORMAL"===e.state)),t.xp6(1),t.Q6J("ngIf","CHANNELD_AWAITING_LOCKIN"===e.state)}}function ar(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No peers connected. Add a peer in order to open a channel."),t.qZA())}function or(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No pending/inactive channel available."),t.qZA())}function sr(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting pending/inactive channels..."),t.qZA())}function lr(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorMessage)}}function rr(n,a){if(1&n&&(t.TgZ(0,"td",43),t.YNc(1,ar,2,0,"p",44),t.YNc(2,or,2,0,"p",44),t.YNc(3,sr,2,0,"p",44),t.YNc(4,lr,2,1,"p",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.numPeers<1&&(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",e.numPeers>0&&(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.channels&&e.channels.data)||(null==e.channels||null==e.channels.data?null:e.channels.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.ERROR)}}const cr=function(n){return{"display-none":n}};function ur(n,a){if(1&n&&t._UZ(0,"tr",45),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,cr,e.numPeers>0&&(null==e.channels?null:e.channels.data)&&(null==e.channels||null==e.channels.data?null:e.channels.data.length)>0))}}function pr(n,a){1&n&&t._UZ(0,"tr",46)}function mr(n,a){1&n&&t._UZ(0,"tr",47)}const dr=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},_r=function(){return["no_peer"]};let hr=(()=>{class n{constructor(e,i,o,l){this.logger=e,this.store=i,this.rtlEffects=o,this.commonService=l,this.isCompatibleVersion=!1,this.totalBalance=0,this.displayedColumns=[],this.channelsData=[],this.myChanPolicy={},this.information={},this.numPeers=-1,this.feeRateTypes=s.vn,this.selFilter="",this.flgSticky=!1,this.CLChannelPendingState=s.uX,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["alias","state","actions"]):this.screenSize===s.cu.SM?(this.flgSticky=!1,this.displayedColumns=["alias","connected","state","actions"]):this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["alias","connected","state","msatoshi_total","actions"]):(this.flgSticky=!0,this.displayedColumns=["alias","connected","state","msatoshi_total","actions"])}ngOnInit(){this.store.select(f.jK).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.information=e.information,this.information.api_version&&(this.isCompatibleVersion=this.commonService.isVersionCompatible(this.information.api_version,"0.4.2")),this.numPeers=e.numPeers,this.totalBalance=e.balance.totalBalance,this.logger.info(e)}),this.store.select(f.ZW).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.channelsData=[...e.pendingChannels,...e.inactiveChannels],this.channelsData=this.channelsData.sort((i,o)=>this.CLChannelPendingState[i.state]>=this.CLChannelPendingState[o.state]?1:-1),this.channelsData&&this.channelsData.length>0&&this.loadChannelsTable(this.channelsData),this.logger.info(e)})}ngAfterViewInit(){this.channelsData&&this.channelsData.length>0&&this.loadChannelsTable(this.channelsData)}applyFilter(){this.channels.filter=this.selFilter.trim().toLowerCase()}onBumpFee(e){this.store.dispatch((0,L.qR)({payload:{data:{channel:e,component:Nl}}}))}onChannelClick(e,i){this.store.dispatch((0,L.qR)({payload:{data:{channel:e,showCopy:!0,component:Ut}}}))}onChannelClose(e){this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Force Close Channel",titleMessage:"Force closing channel: "+(e.alias||e.short_channel_id?e.alias&&e.short_channel_id?e.alias+" ("+e.short_channel_id+")":e.alias?e.alias:e.short_channel_id:e.channel_id),noBtnText:"Cancel",yesBtnText:"Force Close"}}})),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[2])).subscribe(i=>{i&&this.store.dispatch((0,y.BL)({payload:{id:e.id,channelId:e.channel_id,force:!0}}))})}loadChannelsTable(e){e.sort((i,o)=>i.active===o.active?0:o.active?1:-1),this.channels=new r.by([...e]),this.channels.filterPredicate=(i,o)=>((i.connected?"connected":"disconnected")+(i.channel_id?i.channel_id.toLowerCase():"")+(i.short_channel_id?i.short_channel_id.toLowerCase():"")+(i.id?i.id.toLowerCase():"")+(i.alias?i.alias.toLowerCase():"")+(i.private?"private":"public")+(i.state&&this.CLChannelPendingState[i.state]?this.CLChannelPendingState[i.state].toLowerCase():"")+(i.funding_txid?i.funding_txid.toLowerCase():"")+(i.msatoshi_to_us?i.msatoshi_to_us:"")+(i.msatoshi_total?i.msatoshi_total:"")+(i.their_channel_reserve_satoshis?i.their_channel_reserve_satoshis:"")+(i.our_channel_reserve_satoshis?i.our_channel_reserve_satoshis:"")+(i.spendable_msatoshi?i.spendable_msatoshi:"")).includes(o),this.channels.sort=this.sort,this.channels.sortingDataAccessor=(i,o)=>"state"===o?this.CLChannelPendingState[i.state]:i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.channels.paginator=this.paginator,this.logger.info(this.channels)}onDownloadCSV(){this.channels.data&&this.channels.data.length>0&&this.commonService.downloadFile(this.channels.data,"Pending-inactive-channels")}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(K.V),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-channel-pending-table"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Channels")}])],decls:42,vars:14,consts:[["fxLayout","column",1,"padding-gap"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","name","filter","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["mode","indeterminate",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"table-container","w-100",3,"perfectScrollbar"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","short_channel_id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","connected"],["matColumnDef","private"],["matColumnDef","state"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","msatoshi_to_us"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","msatoshi_total"],["matColumnDef","spendable_msatoshi"],["matColumnDef","actions"],["mat-header-cell","","class","pr-3",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center","class","pr-3",4,"matCellDef"],["matColumnDef","no_peer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"ngStyle"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","",1,"pr-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"pr-3"],["placeholder","Actions","tabindex","4",1,"mr-0"],[3,"click",4,"ngIf"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"input",4),t.NdJ("keyup",function(){return i.applyFilter()})("ngModelChange",function(l){return i.selFilter=l}),t.qZA(),t.qZA(),t.qZA(),t.YNc(5,Il,1,0,"mat-progress-bar",5),t.TgZ(6,"div",6),t.TgZ(7,"table",7,8),t.ynx(9,9),t.YNc(10,Ml,2,0,"th",10),t.YNc(11,El,2,1,"td",11),t.BQk(),t.ynx(12,12),t.YNc(13,Pl,2,0,"th",10),t.YNc(14,Dl,2,1,"td",11),t.BQk(),t.ynx(15,13),t.YNc(16,Jl,2,0,"th",10),t.YNc(17,Ql,2,1,"td",11),t.BQk(),t.ynx(18,14),t.YNc(19,Yl,2,0,"th",10),t.YNc(20,Bl,2,1,"td",11),t.BQk(),t.ynx(21,15),t.YNc(22,Hl,2,0,"th",10),t.YNc(23,zl,2,4,"td",16),t.BQk(),t.ynx(24,17),t.YNc(25,Xl,2,0,"th",18),t.YNc(26,Gl,4,3,"td",11),t.BQk(),t.ynx(27,19),t.YNc(28,Wl,2,0,"th",18),t.YNc(29,Kl,4,3,"td",11),t.BQk(),t.ynx(30,20),t.YNc(31,$l,2,0,"th",18),t.YNc(32,jl,4,3,"td",11),t.BQk(),t.ynx(33,21),t.YNc(34,tr,6,0,"th",22),t.YNc(35,ir,8,2,"td",23),t.BQk(),t.ynx(36,24),t.YNc(37,rr,5,4,"td",25),t.BQk(),t.YNc(38,ur,1,3,"tr",26),t.YNc(39,pr,1,0,"tr",27),t.YNc(40,mr,1,0,"tr",28),t.qZA(),t.qZA(),t._UZ(41,"mat-paginator",29),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngModel",i.selFilter),t.xp6(1),t.Q6J("ngIf",i.apiCallStatus.status===i.apiCallStatusEnum.INITIATED),t.xp6(2),t.Q6J("dataSource",i.channels)("ngClass",t.VKq(11,dr,""!==i.errorMessage)),t.xp6(31),t.Q6J("matFooterRowDef",t.DdM(13,_r)),t.xp6(1),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",i.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions)("showFirstLastButtons",i.screenSize!==i.screenSizeEnum.XS))},directives:[p.xw,p.Wh,p.yH,g.KE,M.Nt,c.Fj,c.JJ,c.On,u.O5,Y.$V,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,u.PC,F.Zl,U.gD,U.$L,B.ey,r.yh,r.Q2,r.XQ,r.Gk],pipes:[u.JJ],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}.mat-column-state[_ngcontent-%COMP%]{flex:1 1 15%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();const fr=["peersForm"],gr=["stepper"];function Cr(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw();t.Oqu(e.peerFormLabel)}}function xr(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Address is required."),t.qZA())}function yr(n,a){if(1&n&&(t.TgZ(0,"div",40),t._UZ(1,"fa-icon",41),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(2),t.Oqu(e.peerConnectionError)}}function Tr(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw();t.Oqu(e.channelFormLabel)}}function Zr(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Amount is required."),t.qZA())}function Ar(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Amount must be a positive number."),t.qZA())}function vr(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("Amount must be less than or equal to ",e.totalBalance,".")}}function Lr(n,a){if(1&n&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.feeRateId),t.xp6(1),t.hij(" ",e.feeRateType," ")}}function br(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Fee Rate is required."),t.qZA())}function Sr(n,a){if(1&n&&(t.TgZ(0,"mat-form-field",43),t._UZ(1,"input",44),t.YNc(2,br,2,0,"mat-error",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("step",.1)("min",0),t.xp6(1),t.Q6J("ngIf","customperkb"===e.channelFormGroup.controls.selFeeRate.value&&!e.channelFormGroup.controls.flgMinConf.value&&!e.channelFormGroup.controls.customFeeRate.value)}}function wr(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Min Confirmation Blocks is required."),t.qZA())}function qr(n,a){if(1&n&&(t.TgZ(0,"div",40),t._UZ(1,"fa-icon",41),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("icon",e.faExclamationTriangle),t.xp6(2),t.Oqu(e.channelConnectionError)}}const Fr=function(n,a){return{"mr-6":n,"mr-2":a}};let Rr=(()=>{class n{constructor(e,i,o,l,m,v,J){this.dialogRef=e,this.data=i,this.store=o,this.formBuilder=l,this.actions=m,this.logger=v,this.commonService=J,this.faExclamationTriangle=x.eHv,this.peerAddress="",this.totalBalance=0,this.feeRateTypes=s.vn,this.flgChannelOpened=!1,this.channelOpenStatus=null,this.newlyAddedPeer=null,this.flgEditable=!0,this.peerConnectionError="",this.channelConnectionError="",this.peerFormLabel="Peer Details",this.channelFormLabel="Open Channel (Optional)",this.screenSize="",this.screenSizeEnum=s.cu,this.unSubs=[new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize()}ngOnInit(){this.totalBalance=this.data.message.balance,this.peerAddress=this.data.message.peer&&this.data.message.peer.id&&this.data.message.peer.netaddr?this.data.message.peer.id+"@"+this.data.message.peer.netaddr:this.data.message.peer&&this.data.message.peer.id&&!this.data.message.peer.netaddr?this.data.message.peer.id:"",this.peerFormGroup=this.formBuilder.group({hiddenAddress:["",[c.kI.required]],peerAddress:[this.peerAddress,[c.kI.required]]}),this.channelFormGroup=this.formBuilder.group({fundingAmount:["",[c.kI.required,c.kI.min(1),c.kI.max(this.totalBalance)]],isPrivate:[!1],selFeeRate:[null],customFeeRate:[null],flgMinConf:[!1],minConfValue:[{value:null,disabled:!0}],hiddenAmount:["",[c.kI.required]]}),this.statusFormGroup=this.formBuilder.group({}),this.channelFormGroup.controls.flgMinConf.valueChanges.pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{e?(this.channelFormGroup.controls.selFeeRate.setValue(null),this.channelFormGroup.controls.selFeeRate.disable(),this.channelFormGroup.controls.customFeeRate.setValue(null),this.channelFormGroup.controls.minConfValue.reset(),this.channelFormGroup.controls.minConfValue.enable(),this.channelFormGroup.controls.minConfValue.setValidators([c.kI.required])):(this.channelFormGroup.controls.selFeeRate.enable(),this.channelFormGroup.controls.minConfValue.setValue(null),this.channelFormGroup.controls.minConfValue.disable(),this.channelFormGroup.controls.minConfValue.setValidators(null))}),this.channelFormGroup.controls.selFeeRate.valueChanges.pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.channelFormGroup.controls.customFeeRate.setValue(null),this.channelFormGroup.controls.customFeeRate.reset(),this.channelFormGroup.controls.customFeeRate.setValidators("customperkb"!==e||this.channelFormGroup.controls.flgMinConf.value?null:[c.kI.required])}),this.actions.pipe((0,_.R)(this.unSubs[2]),(0,E.h)(e=>e.type===s.sW.NEWLY_ADDED_PEER_CL||e.type===s.sW.FETCH_CHANNELS_CL||e.type===s.sW.UPDATE_API_CALL_STATUS_CL)).subscribe(e=>{e.type===s.sW.NEWLY_ADDED_PEER_CL&&(this.logger.info(e.payload),this.flgEditable=!1,this.newlyAddedPeer=e.payload.peer,this.peerFormGroup.controls.hiddenAddress.setValue(this.peerFormGroup.controls.peerAddress.value),this.stepper.next()),e.type===s.sW.FETCH_CHANNELS_CL&&this.dialogRef.close(),e.type===s.sW.UPDATE_API_CALL_STATUS_CL&&e.payload.status===s.Bn.ERROR&&("SaveNewPeer"===e.payload.action?this.peerConnectionError=e.payload.message:"SaveNewChannel"===e.payload.action&&(this.channelConnectionError=e.payload.message))})}onConnectPeer(){if(!this.peerFormGroup.controls.peerAddress.value)return!0;this.peerConnectionError="",this.store.dispatch((0,y.El)({payload:{id:this.peerFormGroup.controls.peerAddress.value}}))}onOpenChannel(){if(!this.channelFormGroup.controls.fundingAmount.value||this.totalBalance-this.channelFormGroup.controls.fundingAmount.value<0||this.channelFormGroup.controls.flgMinConf.value&&!this.channelFormGroup.controls.minConfValue.value)return!0;this.channelConnectionError="",this.store.dispatch((0,y.YX)({payload:{peerId:this.newlyAddedPeer.id,satoshis:this.channelFormGroup.controls.fundingAmount.value,announce:!this.channelFormGroup.controls.isPrivate.value,feeRate:"customperkb"===this.channelFormGroup.controls.selFeeRate.value&&!this.channelFormGroup.controls.flgMinConf.value&&this.channelFormGroup.controls.customFeeRate.value?1e3*this.channelFormGroup.controls.customFeeRate.value+"perkb":this.channelFormGroup.controls.selFeeRate.value,minconf:this.channelFormGroup.controls.flgMinConf.value?this.channelFormGroup.controls.minConfValue.value:null}}))}onClose(){this.dialogRef.close(!1)}stepSelectionChanged(e){switch(e.selectedIndex){default:this.peerFormLabel="Peer Details",this.channelFormLabel="Open Channel (Optional)";break;case 1:this.peerFormLabel=this.peerFormGroup.controls.peerAddress.value?"Peer Added: "+(this.newlyAddedPeer.alias?this.newlyAddedPeer.alias:this.newlyAddedPeer.id):"Peer Details",this.channelFormLabel="Open Channel (Optional)";break;case 2:this.peerFormLabel=this.peerFormGroup.controls.peerAddress.value?"Peer Added: "+(this.newlyAddedPeer.alias?this.newlyAddedPeer.alias:this.newlyAddedPeer.id):"Peer Details",this.channelFormLabel=this.channelFormGroup.controls.fundingAmount.value?"Opening Channel for "+this.channelFormGroup.controls.fundingAmount.value+" Sats":"Open Channel (Optional)"}e.selectedIndex<e.previouslySelectedIndex&&(0===e.selectedIndex?this.peerFormGroup.controls.hiddenAddress.setValue(""):1===e.selectedIndex&&this.channelFormGroup.controls.hiddenAmount.setValue(""))}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.so),t.Y36(D.WI),t.Y36(b.yh),t.Y36(c.qu),t.Y36(H.eX),t.Y36(q.mQ),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-connect-peer"]],viewQuery:function(e,i){if(1&e&&(t.Gf(fr,5),t.Gf(gr,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.form=o.first),t.iGM(o=t.CRH())&&(i.stepper=o.first)}},decls:57,vars:30,consts:[["fxLayout","row"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title"],["tabindex","8","fxFlex","5","fxLayoutAlign","center","mat-button","",1,"btn-close-x","p-0",3,"click"],[1,"padding-gap-x-large"],["fxLayout","column"],[3,"linear","selectionChange"],["stepper",""],[3,"stepControl","editable"],["fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutAlign","start","fxLayoutAlign.gt-sm","space-between",1,"my-1",3,"formGroup"],["matStepLabel",""],["autoFocus","","matInput","","placeholder","Lightning Address (pubkey OR pubkey@ip:port)","formControlName","peerAddress","tabindex","1","required",""],[4,"ngIf"],["fxFlex","100","class","alert alert-danger mt-1",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","3","type","button",3,"click"],["fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutAlign","start","fxLayoutAlign.gt-sm","space-between",1,"mb-1",3,"formGroup","ngSubmit"],["matStepLabel","","disabled","true"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start stretch"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row","fxFlex","100","fxLayoutAlign.gt-sm","space-between center"],["fxFlex","60","fxLayoutAlign","start end"],["matInput","","autoFocus","","formControlName","fundingAmount","placeholder","Amount","type","number","tabindex","1","required","",3,"step"],["matSuffix",""],["fxFlex","35","fxLayoutAlign","start center"],["tabindex","2","color","primary","formControlName","isPrivate","name","isPrivate"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap","fxFlex","100","fxLayoutAlign.gt-sm","space-between center"],["fxFlex","48","fxLayoutAlign","space-between end"],["fxLayoutAlign","start center",3,"fxFlex"],["tabindex","4","placeholder","Fee Rate","formControlName","selFeeRate"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","48","fxLayoutAlign","end center",4,"ngIf"],["fxFlex","48","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","2","tabindex","5","color","primary","formControlName","flgMinConf","fxLayoutAlign","stretch start",3,"ngClass"],["fxFlex","98"],["matInput","","formControlName","minConfValue","placeholder","Min Confirmation Blocks","type","number","name","blocks","tabindex","8",3,"step","min","required"],["mat-stroked-button","","color","primary","tabindex","8","type","submit"],["fxLayout","row","fxFlex","100","fxLayoutAlign","end center"],["mat-stroked-button","","color","primary","tabindex","12","type","button","default","",3,"mat-dialog-close"],["fxFlex","100",1,"alert","alert-danger","mt-1"],[1,"mr-1","alert-icon",3,"icon"],[3,"value"],["fxFlex","48","fxLayoutAlign","end center"],["matInput","","formControlName","customFeeRate","placeholder","Fee Rate (Sats/vB)","type","number","name","custFeeRate","tabindex","4",3,"step","min"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card-header",2),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t._uU(5,"Connect to a new peer"),t.qZA(),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.onClose()}),t._uU(7,"X"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",6),t.TgZ(9,"div",7),t.TgZ(10,"mat-vertical-stepper",8,9),t.NdJ("selectionChange",function(l){return i.stepSelectionChanged(l)}),t.TgZ(12,"mat-step",10),t.TgZ(13,"form",11),t.YNc(14,Cr,1,1,"ng-template",12),t.TgZ(15,"mat-form-field",1),t._UZ(16,"input",13),t.YNc(17,xr,2,0,"mat-error",14),t.qZA(),t.YNc(18,yr,4,2,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"button",17),t.NdJ("click",function(){return i.onConnectPeer()}),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"mat-step",10),t.TgZ(23,"form",18),t.NdJ("ngSubmit",function(){return i.onOpenChannel()}),t.YNc(24,Tr,1,1,"ng-template",19),t.TgZ(25,"div",20),t.TgZ(26,"div",21),t.TgZ(27,"mat-form-field",22),t._UZ(28,"input",23),t.TgZ(29,"mat-hint"),t._uU(30),t.qZA(),t.TgZ(31,"span",24),t._uU(32," Sats "),t.qZA(),t.YNc(33,Zr,2,0,"mat-error",14),t.YNc(34,Ar,2,0,"mat-error",14),t.YNc(35,vr,2,1,"mat-error",14),t.qZA(),t.TgZ(36,"div",25),t.TgZ(37,"mat-slide-toggle",26),t._uU(38,"Private Channel"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",27),t.TgZ(40,"div",28),t.TgZ(41,"mat-form-field",29),t.TgZ(42,"mat-select",30),t.YNc(43,Lr,2,2,"mat-option",31),t.qZA(),t.qZA(),t.YNc(44,Sr,3,3,"mat-form-field",32),t.qZA(),t.TgZ(45,"div",33),t._UZ(46,"mat-checkbox",34),t.TgZ(47,"mat-form-field",35),t._UZ(48,"input",36),t.YNc(49,wr,2,0,"mat-error",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(50,qr,4,2,"div",15),t.TgZ(51,"div",16),t.TgZ(52,"button",37),t._uU(53),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",38),t.TgZ(55,"button",39),t._uU(56),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(10),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",i.peerFormGroup)("editable",i.flgEditable),t.xp6(1),t.Q6J("formGroup",i.peerFormGroup),t.xp6(4),t.Q6J("ngIf",null==i.peerFormGroup.controls.peerAddress.errors?null:i.peerFormGroup.controls.peerAddress.errors.required),t.xp6(1),t.Q6J("ngIf",""!==i.peerConnectionError),t.xp6(3),t.Oqu(""!==i.peerConnectionError?"Retry":"Add Peer"),t.xp6(1),t.Q6J("stepControl",i.channelFormGroup)("editable",i.flgEditable),t.xp6(1),t.Q6J("formGroup",i.channelFormGroup),t.xp6(5),t.Q6J("step",1e3),t.xp6(2),t.hij("Remaining Bal: ",i.totalBalance-(i.channelFormGroup.controls.fundingAmount.value?i.channelFormGroup.controls.fundingAmount.value:0),""),t.xp6(3),t.Q6J("ngIf",null==i.channelFormGroup.controls.fundingAmount.errors?null:i.channelFormGroup.controls.fundingAmount.errors.required),t.xp6(1),t.Q6J("ngIf",null==i.channelFormGroup.controls.fundingAmount.errors?null:i.channelFormGroup.controls.fundingAmount.errors.min),t.xp6(1),t.Q6J("ngIf",null==i.channelFormGroup.controls.fundingAmount.errors?null:i.channelFormGroup.controls.fundingAmount.errors.max),t.xp6(6),t.Q6J("fxFlex","customperkb"!==i.channelFormGroup.controls.selFeeRate.value||i.channelFormGroup.controls.flgMinConf.value?"100":"48"),t.xp6(2),t.Q6J("ngForOf",i.feeRateTypes),t.xp6(1),t.Q6J("ngIf","customperkb"===i.channelFormGroup.controls.selFeeRate.value&&!i.channelFormGroup.controls.flgMinConf.value),t.xp6(2),t.Q6J("ngClass",t.WLB(27,Fr,i.screenSize===i.screenSizeEnum.XS||i.screenSize===i.screenSizeEnum.SM,i.screenSize===i.screenSizeEnum.MD||i.screenSize===i.screenSizeEnum.LG||i.screenSize===i.screenSizeEnum.XL)),t.xp6(2),t.Q6J("step",1)("min",0)("required",i.channelFormGroup.controls.flgMinConf.value),t.xp6(1),t.Q6J("ngIf",i.channelFormGroup.controls.flgMinConf.value&&!i.channelFormGroup.controls.minConfValue.value),t.xp6(1),t.Q6J("ngIf",""!==i.channelConnectionError),t.xp6(3),t.Oqu(""!==i.channelConnectionError?"Retry":"Open Channel"),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.Oqu(null!=i.newlyAddedPeer&&i.newlyAddedPeer.id?"Do It Later":"Close"))},directives:[p.xw,p.yH,Z.dk,p.Wh,O.lW,Z.dn,W.Vq,W.C0,c._Y,c.JL,c.sg,W.VY,g.KE,M.Nt,c.Fj,V.h,c.JJ,c.u,c.Q7,u.O5,c.wV,g.bx,g.R9,st.Rr,U.gD,u.sg,rt.oG,u.mk,F.oO,c.qQ,G.q,D.ZT,g.TO,k.BN,B.ey],styles:[""]}),n})();function Or(n,a){1&n&&t._UZ(0,"mat-progress-bar",32)}function Ur(n,a){1&n&&(t.TgZ(0,"th",33),t._uU(1," Alias "),t.qZA())}const Nt=function(n){return{"mr-0":n}};function kr(n,a){if(1&n&&t._UZ(0,"span",37),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Nt,e.screenSize===e.screenSizeEnum.XS))}}function Nr(n,a){if(1&n&&t._UZ(0,"span",38),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Nt,e.screenSize===e.screenSizeEnum.XS))}}const ht=function(n){return{"max-width":n}};function Ir(n,a){if(1&n&&(t.TgZ(0,"td",34),t.YNc(1,kr,1,3,"span",35),t.YNc(2,Nr,1,3,"span",36),t._uU(3),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngStyle",t.VKq(4,ht,i.screenSize===i.screenSizeEnum.XS?"10rem":"40rem")),t.xp6(1),t.Q6J("ngIf",null==e?null:e.connected),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.connected)),t.xp6(1),t.hij(" ",null==e?null:e.alias," ")}}function Mr(n,a){1&n&&(t.TgZ(0,"th",39),t._uU(1," ID "),t.qZA())}function Er(n,a){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngStyle",t.VKq(2,ht,i.screenSize===i.screenSizeEnum.XS?"10rem":"40rem")),t.xp6(1),t.hij(" ",null==e?null:e.id," ")}}function Pr(n,a){1&n&&(t.TgZ(0,"th",33),t._uU(1," Network Address "),t.qZA())}function Dr(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,","),t._UZ(2,"br"),t.qZA())}function Jr(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Dr,3,0,"span",42),t.qZA()),2&n){const e=a.$implicit,i=a.last;t.xp6(1),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",!i)}}function Qr(n,a){if(1&n&&(t.TgZ(0,"td",34),t.YNc(1,Jr,3,2,"span",41),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngStyle",t.VKq(2,ht,i.screenSize===i.screenSizeEnum.XS?"10rem":"20rem")),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.netaddr)}}function Yr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",43),t.TgZ(1,"div",44),t.TgZ(2,"mat-select",45),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Br(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onPeerDetach(o)}),t._uU(1,"Disconnect"),t.qZA()}}function Hr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().onConnectPeer(o)}),t._uU(1,"Reconnect"),t.qZA()}}function Vr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",47),t.TgZ(1,"div",48),t.TgZ(2,"mat-select",45),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",46),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw().onPeerClick(m,o)}),t._uU(5,"View Info"),t.qZA(),t.TgZ(6,"mat-option",46),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().onOpenChannel(l)}),t._uU(7,"Open Channel"),t.qZA(),t.YNc(8,Br,2,0,"mat-option",49),t.YNc(9,Hr,2,0,"mat-option",49),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(8),t.Q6J("ngIf",e.connected),t.xp6(1),t.Q6J("ngIf",!e.connected)}}function zr(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No connected peer."),t.qZA())}function Xr(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting peers..."),t.qZA())}function Gr(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorMessage)}}function Wr(n,a){if(1&n&&(t.TgZ(0,"td",50),t.YNc(1,zr,2,0,"p",42),t.YNc(2,Xr,2,0,"p",42),t.YNc(3,Gr,2,1,"p",42),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(!(null!=e.peers&&e.peers.data)||(null==e.peers||null==e.peers.data?null:e.peers.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.peers&&e.peers.data)||(null==e.peers||null==e.peers.data?null:e.peers.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.peers&&e.peers.data)||(null==e.peers||null==e.peers.data?null:e.peers.data.length)<1)&&e.apiCallStatus.status===e.apiCallStatusEnum.ERROR)}}const Kr=function(n){return{"display-none":n}};function $r(n,a){if(1&n&&t._UZ(0,"tr",51),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,Kr,(null==e.peers?null:e.peers.data)&&(null==e.peers||null==e.peers.data?null:e.peers.data.length)>0))}}function jr(n,a){1&n&&t._UZ(0,"tr",52)}function tc(n,a){1&n&&t._UZ(0,"tr",53)}const ec=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}},nc=function(){return["no_peer"]};let ic=(()=>{class n{constructor(e,i,o,l,m){this.logger=e,this.store=i,this.rtlEffects=o,this.actions=l,this.commonService=m,this.faUsers=x.FVb,this.newlyAddedPeer="",this.displayedColumns=[],this.peerAddress="",this.peersData=[],this.information={},this.availableBalance=0,this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.selFilter="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["alias","actions"]):this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["alias","id","netaddr","actions"]):(this.flgSticky=!0,this.displayedColumns=["alias","id","netaddr","actions"])}ngOnInit(){this.store.select(f.Ao).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.information=e.information,this.availableBalance=e.balance.totalBalance||0}),this.store.select(f.Wi).pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.peersData=e.peers||[],this.peersData.length>0&&this.loadPeersTable(this.peersData),this.logger.info(e)}),this.actions.pipe((0,_.R)(this.unSubs[2]),(0,E.h)(e=>e.type===s.sW.SET_PEERS_CL)).subscribe(e=>{this.peerAddress=null})}ngAfterViewInit(){this.peersData.length>0&&this.loadPeersTable(this.peersData)}onPeerClick(e,i){this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Peer Information",showQRName:"Public Key",showQRField:e.id,message:[[{key:"id",value:e.id,title:"Public Key",width:100}],[{key:"netaddr",value:e.netaddr,title:"Address",width:100}],[{key:"alias",value:e.alias,title:"Alias",width:50},{key:"connected",value:e.connected?"True":"False",title:"Connected",width:50}]]}}}))}onConnectPeer(e){this.store.dispatch((0,L.qR)({payload:{data:{message:{peer:e.id?e:null,information:this.information,balance:this.availableBalance},component:Rr}}}))}onOpenChannel(e){this.store.dispatch((0,L.qR)({payload:{data:{alertTitle:"Open Channel",message:{peer:e,information:this.information,balance:this.availableBalance},newlyAdded:!1,component:Ot}}}))}onPeerDetach(e){this.store.dispatch((0,L.c1)({payload:{data:{type:s.n_.CONFIRM,alertTitle:"Disconnect Peer",titleMessage:"Disconnect peer: "+(e.alias?e.alias:e.id),noBtnText:"Cancel",yesBtnText:"Disconnect"}}})),this.rtlEffects.closeConfirm.pipe((0,_.R)(this.unSubs[3])).subscribe(o=>{o&&this.store.dispatch((0,y.z)({payload:{id:e.id,force:!1}}))})}applyFilter(){this.peers.filter=this.selFilter.trim().toLowerCase()}loadPeersTable(e){this.peers=new r.by([...e]),this.peers.sortingDataAccessor=(i,o)=>{if("netaddr"===o){if(i.netaddr&&i.netaddr[0]){const l=i.netaddr[0].toString().split(".");return l[0]?+l[0]:i.netaddr[0]}return""}return i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null},this.peers.sort=this.sort,this.peers.filterPredicate=(i,o)=>JSON.stringify(i).toLowerCase().includes(o),this.peers.paginator=this.paginator,this.applyFilter()}onDownloadCSV(){this.peers.data&&this.peers.data.length>0&&this.commonService.downloadFile(this.peers.data,"Peers")}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(b.yh),t.Y36(K.V),t.Y36(H.eX),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-peers"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Peers")}])],decls:36,vars:15,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayout","row"],["peersForm","ngForm"],["mat-flat-button","","color","primary","type","submit","tabindex","1",3,"click"],["fxLayout","column"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","30","fxFlex.gt-xs","70"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxFlex","30"],["fxLayout","row","fxLayoutAlign","start start"],["matInput","","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","alias"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","px-3","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","px-3",3,"ngStyle",4,"matCellDef"],["matColumnDef","netaddr"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center","class","px-3",4,"matCellDef"],["matColumnDef","no_peer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"ngStyle"],["class","dot green","matTooltip","Connected","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["class","dot red","matTooltip","Disconnected","matTooltipPosition","right",3,"ngClass",4,"ngIf"],["matTooltip","Connected","matTooltipPosition","right",1,"dot","green",3,"ngClass"],["matTooltip","Disconnected","matTooltipPosition","right",1,"dot","red",3,"ngClass"],["mat-header-cell","","mat-sort-header","",1,"px-3"],["mat-cell","",1,"px-3",3,"ngStyle"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"px-3"],["fxFlex","100","fxLayoutAlign","center center",1,"bordered-box","table-actions-select"],[3,"click",4,"ngIf"],["mat-footer-cell","","colspan","4"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1,2),t.TgZ(3,"button",3),t.NdJ("click",function(){return i.onConnectPeer({})}),t._uU(4,"Add Peer"),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"fa-icon",7),t.TgZ(9,"span",8),t._uU(10,"Connected Peers"),t.qZA(),t.qZA(),t.TgZ(11,"mat-form-field",9),t.TgZ(12,"div",10),t.TgZ(13,"input",11),t.NdJ("keyup",function(){return i.applyFilter()})("ngModelChange",function(l){return i.selFilter=l}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",12),t.YNc(15,Or,1,0,"mat-progress-bar",13),t.TgZ(16,"table",14,15),t.ynx(18,16),t.YNc(19,Ur,2,0,"th",17),t.YNc(20,Ir,4,6,"td",18),t.BQk(),t.ynx(21,19),t.YNc(22,Mr,2,0,"th",20),t.YNc(23,Er,2,4,"td",21),t.BQk(),t.ynx(24,22),t.YNc(25,Pr,2,0,"th",17),t.YNc(26,Qr,2,4,"td",18),t.BQk(),t.ynx(27,23),t.YNc(28,Yr,6,0,"th",24),t.YNc(29,Vr,10,2,"td",25),t.BQk(),t.ynx(30,26),t.YNc(31,Wr,4,3,"td",27),t.BQk(),t.YNc(32,$r,1,3,"tr",28),t.YNc(33,jr,1,0,"tr",29),t.YNc(34,tc,1,0,"tr",30),t.qZA(),t.qZA(),t._UZ(35,"mat-paginator",31),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("icon",i.faUsers),t.xp6(5),t.Q6J("ngModel",i.selFilter),t.xp6(2),t.Q6J("ngIf",i.apiCallStatus.status===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",i.peers)("ngClass",t.VKq(12,ec,""!==i.errorMessage)),t.xp6(16),t.Q6J("matFooterRowDef",t.DdM(14,nc)),t.xp6(1),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",i.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions)("showFirstLastButtons",i.screenSize!==i.screenSizeEnum.XS))},directives:[p.xw,p.yH,p.Wh,c._Y,c.JL,c.F,O.lW,k.BN,g.KE,M.Nt,c.Fj,c.JJ,c.On,Y.$V,u.O5,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,u.PC,F.Zl,Q.gM,u.sg,U.gD,U.$L,B.ey,r.yh,r.Q2,r.XQ,r.Gk],styles:[".mat-column-alias[_ngcontent-%COMP%]{flex:1 1 20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-id[_ngcontent-%COMP%]{flex:1 1 20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:2rem}.mat-column-netaddr[_ngcontent-%COMP%]{flex:1 1 25%;width:25%}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();const ac=["queryRoutesForm"];function oc(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Destination pubkey is required."),t.qZA())}function sc(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Amount is required."),t.qZA())}function lc(n,a){1&n&&t._UZ(0,"mat-progress-bar",38)}function rc(n,a){1&n&&(t.TgZ(0,"th",39),t._uU(1," ID "),t.qZA())}function cc(n,a){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.id," ")}}function uc(n,a){1&n&&(t.TgZ(0,"th",39),t._uU(1," Alias "),t.qZA())}function pc(n,a){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.alias," ")}}function mc(n,a){1&n&&(t.TgZ(0,"th",39),t._uU(1," Channel "),t.qZA())}function dc(n,a){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.channel," ")}}function _c(n,a){1&n&&(t.TgZ(0,"th",39),t._uU(1," Direction "),t.qZA())}function hc(n,a){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.direction," ")}}function fc(n,a){1&n&&(t.TgZ(0,"th",41),t._uU(1," Delay "),t.qZA())}function gc(n,a){if(1&n&&(t.TgZ(0,"td",40),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==e?null:e.delay)," ")}}function Cc(n,a){1&n&&(t.TgZ(0,"th",41),t._uU(1," Amount (Sats) "),t.qZA())}function xc(n,a){if(1&n&&(t.TgZ(0,"td",40),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,(null==e?null:e.msatoshi)/1e3)," ")}}function yc(n,a){1&n&&(t.TgZ(0,"th",43),t._uU(1," Amount mSat "),t.qZA())}function Tc(n,a){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.amount_msat," ")}}function Zc(n,a){1&n&&(t.TgZ(0,"th",45),t.TgZ(1,"span",42),t._uU(2,"Actions"),t.qZA(),t.qZA())}function Ac(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",44),t.TgZ(1,"button",46),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw().onHopClick(m,o)}),t._uU(2,"View Info"),t.qZA(),t.qZA()}}function vc(n,a){1&n&&t._UZ(0,"tr",47)}function Lc(n,a){1&n&&t._UZ(0,"tr",48)}const bc=function(n){return{"overflow-auto error-border":n,"overflow-auto":!0}};let Sc=(()=>{class n{constructor(e,i,o){this.store=e,this.clEffects=i,this.commonService=o,this.destinationPubkey="",this.amount=null,this.flgSticky=!1,this.displayedColumns=[],this.flgLoading=[!1],this.faRoute=x.FpQ,this.faExclamationTriangle=x.eHv,this.screenSize="",this.screenSizeEnum=s.cu,this.unSubs=[new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["alias","msatoshi","actions"]):this.screenSize===s.cu.SM?(this.flgSticky=!1,this.displayedColumns=["alias","direction","msatoshi","actions"]):this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["alias","direction","delay","msatoshi","actions"]):(this.flgSticky=!0,this.displayedColumns=["alias","channel","direction","delay","msatoshi","actions"])}ngOnInit(){this.clEffects.setQueryRoutesCL.pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{this.qrHops=new r.by([]),this.qrHops.data=[],e.routes?(this.flgLoading[0]=!1,this.qrHops=new r.by([...e.routes]),this.qrHops.data=e.routes):this.flgLoading[0]="error",this.qrHops.sort=this.sort,this.qrHops.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null})}onQueryRoutes(){if(!this.destinationPubkey||!this.amount)return!0;this.flgLoading[0]=!0,this.store.dispatch((0,y.WO)({payload:{destPubkey:this.destinationPubkey,amount:1e3*this.amount}}))}resetData(){this.destinationPubkey="",this.amount=null,this.flgLoading[0]=!1,this.qrHops.data=[],this.form.resetForm()}onHopClick(e,i){this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Route Information",message:[[{key:"id",value:e.id,title:"ID",width:100,type:s.Gi.STRING}],[{key:"channel",value:e.channel,title:"Channel",width:50,type:s.Gi.STRING},{key:"alias",value:e.alias,title:"Peer Alias",width:50,type:s.Gi.STRING}],[{key:"msatoshi",value:e.msatoshi,title:"mSatoshi",width:50,type:s.Gi.NUMBER},{key:"amount_msat",value:e.amount_msat,title:"Amount mSat",width:50,type:s.Gi.STRING}],[{key:"direction",value:e.direction,title:"Direction",width:50,type:s.Gi.STRING},{key:"delay",value:e.delay,title:"Delay",width:50,type:s.Gi.NUMBER}]]}}}))}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.yh),t.Y36(et.s),t.Y36(R.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-query-routes"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(ac,7)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.form=o.first)}},decls:54,vars:16,consts:[["fxLayout","column","fxFlex","100",1,"padding-gap"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap",3,"ngSubmit"],["queryRoutesForm","ngForm"],["fxFlex","100",1,"alert","alert-warn"],[1,"mr-1","alert-icon",3,"icon"],["fxFlex","69","fxLayoutAlign","start end"],["matInput","","placeholder","Destination Pubkey","name","destinationPubkey","tabindex","1","required","",3,"ngModel","ngModelChange"],["destPubkey","ngModel"],[4,"ngIf"],["fxFlex","29","fxLayoutAlign","start end"],["matInput","","placeholder","Amount (Sats)","name","amount","tabindex","2","type","number","required","",3,"ngModel","step","min","ngModelChange"],["fxLayout","row",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","3","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","type","submit","tabindex","4"],["fxLayout","row","fxLayoutAlign","start center",1,"page-sub-title-container","mt-2","mb-1"],["fxFlex","70"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],[1,"table-container","mb-6",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","channel"],["matColumnDef","direction"],["matColumnDef","delay"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","msatoshi"],["matColumnDef","amount_msat"],["mat-header-cell","","class","pl-4","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","pl-4",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","pl-4 pr-3",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","","mat-sort-header","",1,"pl-4"],["mat-cell","",1,"pl-4"],["mat-header-cell","",1,"pl-4","pr-3"],["mat-stroked-button","","color","primary","type","button","tabindex","4",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"form",1,2),t.NdJ("ngSubmit",function(){return t.CHM(o),t.MAs(2).form.valid&&i.onQueryRoutes()}),t.TgZ(3,"div",3),t._UZ(4,"fa-icon",4),t.TgZ(5,"span"),t._uU(6,"The actual routing fee on a payment can be different from the fee shown on query routes."),t.qZA(),t.qZA(),t.TgZ(7,"mat-form-field",5),t.TgZ(8,"input",6,7),t.NdJ("ngModelChange",function(m){return i.destinationPubkey=m}),t.qZA(),t.YNc(10,oc,2,0,"mat-error",8),t.qZA(),t.TgZ(11,"mat-form-field",9),t.TgZ(12,"input",10),t.NdJ("ngModelChange",function(m){return i.amount=m}),t.qZA(),t.YNc(13,sc,2,0,"mat-error",8),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"button",12),t.NdJ("click",function(){return i.resetData()}),t._uU(16,"Clear"),t.qZA(),t.TgZ(17,"button",13),t._uU(18,"Query Route"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",14),t.TgZ(20,"div",15),t._UZ(21,"fa-icon",16),t.TgZ(22,"span",17),t._uU(23,"Transaction Route"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",18),t.YNc(25,lc,1,0,"mat-progress-bar",19),t.TgZ(26,"table",20,21),t.ynx(28,22),t.YNc(29,rc,2,0,"th",23),t.YNc(30,cc,2,1,"td",24),t.BQk(),t.ynx(31,25),t.YNc(32,uc,2,0,"th",23),t.YNc(33,pc,2,1,"td",24),t.BQk(),t.ynx(34,26),t.YNc(35,mc,2,0,"th",23),t.YNc(36,dc,2,1,"td",24),t.BQk(),t.ynx(37,27),t.YNc(38,_c,2,0,"th",23),t.YNc(39,hc,2,1,"td",24),t.BQk(),t.ynx(40,28),t.YNc(41,fc,2,0,"th",29),t.YNc(42,gc,4,3,"td",24),t.BQk(),t.ynx(43,30),t.YNc(44,Cc,2,0,"th",29),t.YNc(45,xc,4,3,"td",24),t.BQk(),t.ynx(46,31),t.YNc(47,yc,2,0,"th",32),t.YNc(48,Tc,2,1,"td",33),t.BQk(),t.ynx(49,34),t.YNc(50,Zc,3,0,"th",35),t.YNc(51,Ac,3,0,"td",33),t.BQk(),t.YNc(52,vc,1,0,"tr",36),t.YNc(53,Lc,1,0,"tr",37),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.Q6J("icon",i.faExclamationTriangle),t.xp6(4),t.Q6J("ngModel",i.destinationPubkey),t.xp6(2),t.Q6J("ngIf",!i.destinationPubkey),t.xp6(2),t.Q6J("ngModel",i.amount)("step",1e3)("min",0),t.xp6(1),t.Q6J("ngIf",!i.amount),t.xp6(8),t.Q6J("icon",i.faRoute),t.xp6(4),t.Q6J("ngIf",!0===i.flgLoading[0]),t.xp6(1),t.Q6J("dataSource",i.qrHops)("ngClass",t.VKq(14,bc,"error"===i.flgLoading[0])),t.xp6(26),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",i.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[p.xw,p.yH,c._Y,c.JL,c.F,p.Wh,k.BN,g.KE,M.Nt,c.Fj,c.Q7,c.JJ,c.On,u.O5,c.wV,c.qQ,G.q,O.lW,Y.$V,r.BZ,A.YE,u.mk,F.oO,r.w1,r.fO,r.Dz,r.as,r.nj,g.TO,P.pW,r.ge,A.nU,r.ev,r.XQ,r.Gk],pipes:[u.JJ],styles:[".mat-column-actions[_ngcontent-%COMP%]{flex:0 0 5%;width:5%}.mat-column-pubkey_alias[_ngcontent-%COMP%]{flex:1 1 25%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();var It=h(8020);function wc(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Message is required."),t.qZA())}let qc=(()=>{class n{constructor(e,i,o){this.dataService=e,this.snackBar=i,this.logger=o,this.message="",this.signedMessage="",this.signature="",this.unSubs=[new d.x,new d.x]}onSign(){if(!this.message||""===this.message)return!0;this.dataService.signMessage(this.message).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.signedMessage=this.message,this.signature=e.zbase})}onMessageChange(){this.signedMessage!==this.message&&(this.signature="")}onCopyField(e){this.snackBar.open("Signature copied."),this.logger.info("Copied Text: "+e)}resetData(){this.message="",this.signature="",this.signedMessage=""}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(It.D),t.Y36(j.ux),t.Y36(q.mQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-sign"]],decls:20,vars:5,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap"],["form","ngForm"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start end"],["autoFocus","","matInput","","rows","1","placeholder","Message to sign","required","","tabindex","1","name","message",3,"ngModel","ngModelChange","keyup"],[4,"ngIf"],["fxLayout","row",1,"my-1"],["mat-stroked-button","","color","primary","tabindex","2","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","3","type","submit",3,"click"],[1,"my-2",3,"inset"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start center"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start center",1,"bordered-box","read-only","h-4","padding-gap"],["fxLayout","row",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","4","rtlClipboard","","type","button",3,"payload","copied"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1,2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(l){return i.message=l})("keyup",function(){return i.onMessageChange()}),t.qZA(),t.YNc(5,wc,2,0,"mat-error",5),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"button",7),t.NdJ("click",function(){return i.resetData()}),t._uU(8,"Clear Field"),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return i.onSign()}),t._uU(10,"Sign"),t.qZA(),t.qZA(),t._UZ(11,"mat-divider",9),t.TgZ(12,"div",10),t.TgZ(13,"p"),t._uU(14,"Generated Signature"),t.qZA(),t.qZA(),t.TgZ(15,"div",11),t._uU(16),t.qZA(),t.TgZ(17,"div",12),t.TgZ(18,"button",13),t.NdJ("copied",function(l){return i.onCopyField(l)}),t._uU(19,"Copy Signature"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngModel",i.message),t.xp6(1),t.Q6J("ngIf",!i.message),t.xp6(6),t.Q6J("inset",!0),t.xp6(5),t.Oqu(i.signature),t.xp6(2),t.Q6J("payload",i.signature))},directives:[p.xw,p.yH,p.Wh,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,V.h,c.Q7,c.JJ,c.On,u.O5,O.lW,X.d,nt.y,g.TO],styles:[".mat-column-channel_point[_ngcontent-%COMP%]{flex:1 1 25%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();function Fc(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Message is required."),t.qZA())}function Rc(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Signature is required."),t.qZA())}function Oc(n,a){1&n&&(t.TgZ(0,"p",13),t.TgZ(1,"mat-icon",14),t._uU(2,"close"),t.qZA(),t._uU(3,"Verification failed, please double check message and signature"),t.qZA())}function Uc(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Pubkey Used"),t.qZA())}function kc(n,a){if(1&n&&(t.TgZ(0,"div",20),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(null==e.verifyRes?null:e.verifyRes.pubkey)}}function Nc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"button",22),t.NdJ("copied",function(o){return t.CHM(e),t.oxw(2).onCopyField(o)}),t._uU(2,"Copy Pubkey"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("payload",null==e.verifyRes?null:e.verifyRes.pubkey)}}function Ic(n,a){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"mat-divider",16),t.TgZ(2,"div",17),t.YNc(3,Uc,2,0,"p",5),t.qZA(),t.YNc(4,kc,3,1,"div",18),t.YNc(5,Nc,3,1,"div",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("inset",!0),t.xp6(2),t.Q6J("ngIf",e.verifyRes.verified),t.xp6(1),t.Q6J("ngIf",e.verifyRes.verified),t.xp6(1),t.Q6J("ngIf",e.verifyRes.verified)}}let Mc=(()=>{class n{constructor(e,i,o){this.dataService=e,this.snackBar=i,this.logger=o,this.message="",this.verifiedMessage="",this.signature="",this.verifiedSignature="",this.showVerifyStatus=!1,this.verifyRes={pubkey:"",verified:null},this.unSubs=[new d.x,new d.x]}onVerify(){if(!this.message||""===this.message||!this.signature||""===this.signature)return!0;this.dataService.verifyMessage(this.message,this.signature).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.verifyRes=e,this.showVerifyStatus=!0,this.verifiedMessage=this.message,this.verifiedSignature=this.signature})}onChange(){(this.verifiedMessage!==this.message||this.verifiedSignature!==this.signature)&&(this.showVerifyStatus=!1,this.verifyRes={pubkey:"",verified:null})}resetData(){this.message="",this.signature="",this.verifyRes=null,this.showVerifyStatus=!1}onCopyField(e){this.snackBar.open("Pubkey copied."),this.logger.info("Copied Text: "+e)}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(It.D),t.Y36(j.ux),t.Y36(q.mQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-verify"]],decls:17,vars:6,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap"],["form","ngForm"],["fxFlex","100","fxLayoutAlign","start end"],["autoFocus","","matInput","","rows","1","placeholder","Message to verify","required","","tabindex","1","name","message",3,"ngModel","ngModelChange","keyup"],[4,"ngIf"],["matInput","","placeholder","Signature provided","name","signature","tabindex","2","required","",3,"ngModel","ngModelChange","keyup"],["sign","ngModel"],["fxFlex","100","class","color-warn","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row",1,"my-1"],["mat-stroked-button","","color","primary","tabindex","3","type","reset",1,"mr-1",3,"click"],["mat-flat-button","","color","primary","tabindex","4","type","submit",3,"click"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap",4,"ngIf"],["fxFlex","100","fxLayoutAlign","start center",1,"color-warn"],[1,"mr-1","icon-small"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap"],[1,"my-2",3,"inset"],["fxLayout","row","fxFlex","100","fxLayoutAlign","start center"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start start","class","bordered-box read-only h-4 padding-gap",4,"ngIf"],["fxLayout","row","class","mt-2",4,"ngIf"],["fxLayout","column","fxFlex","100","fxLayoutAlign","start start",1,"bordered-box","read-only","h-4","padding-gap"],["fxLayout","row",1,"mt-2"],["mat-stroked-button","","color","primary","tabindex","5","rtlClipboard","","type","button",3,"payload","copied"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1,2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"textarea",4),t.NdJ("ngModelChange",function(l){return i.message=l})("keyup",function(){return i.onChange()}),t.qZA(),t.YNc(5,Fc,2,0,"mat-error",5),t.qZA(),t.TgZ(6,"mat-form-field",3),t.TgZ(7,"input",6,7),t.NdJ("ngModelChange",function(l){return i.signature=l})("keyup",function(){return i.onChange()}),t.qZA(),t.YNc(9,Rc,2,0,"mat-error",5),t.qZA(),t.YNc(10,Oc,4,0,"p",8),t.TgZ(11,"div",9),t.TgZ(12,"button",10),t.NdJ("click",function(){return i.resetData()}),t._uU(13,"Clear Fields"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){return i.onVerify()}),t._uU(15,"Verify"),t.qZA(),t.qZA(),t.YNc(16,Ic,6,4,"div",12),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngModel",i.message),t.xp6(1),t.Q6J("ngIf",!i.message),t.xp6(2),t.Q6J("ngModel",i.signature),t.xp6(2),t.Q6J("ngIf",!i.signature),t.xp6(1),t.Q6J("ngIf",i.showVerifyStatus&&!i.verifyRes.verified),t.xp6(6),t.Q6J("ngIf",i.showVerifyStatus&&i.verifyRes.verified))},directives:[p.xw,p.yH,p.Wh,c._Y,c.JL,c.F,g.KE,M.Nt,c.Fj,V.h,c.Q7,c.JJ,c.On,u.O5,O.lW,g.TO,pt.Hw,X.d,nt.y],styles:[".mat-column-channel_point[_ngcontent-%COMP%]{flex:1 1 25%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();function Ec(n,a){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function Pc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t._UZ(1,"div",7),t.TgZ(2,"mat-form-field",8),t.TgZ(3,"input",9),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().filterValue=o})("input",function(){return t.CHM(e),t.oxw().applyFilter()})("keyup",function(){return t.CHM(e),t.oxw().applyFilter()}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.filterValue)}}function Dc(n,a){1&n&&t._UZ(0,"mat-progress-bar",33)}function Jc(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Status"),t.qZA())}function Qc(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.status)}}function Yc(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Received Time"),t.qZA())}function Bc(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,1e3*(null==e?null:e.received_time),"dd/MMM/YYYY HH:mm"))}}function Hc(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Resolved Time"),t.qZA())}function Vc(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,1e3*(null==e?null:e.resolved_time),"dd/MMM/YYYY HH:mm"))}}function zc(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1,"In Channel"),t.qZA())}function Xc(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.in_channel_alias)}}function Gc(n,a){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Out Channel"),t.qZA())}function Wc(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.out_channel_alias)}}function Kc(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Amount In (Sats)"),t.qZA())}function $c(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",37),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.in_msatoshi)/1e3,(null==e?null:e.in_msatoshi)<1e3?"1.0-4":"1.0-0"))}}function jc(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Amount Out (Sats)"),t.qZA())}function tu(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",37),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.out_msatoshi)/1e3,(null==e?null:e.out_msatoshi)<1e3?"1.0-4":"1.0-0"))}}function eu(n,a){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Fee (mSat)"),t.qZA())}function nu(n,a){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"span",37),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,null==e?null:e.fee))}}function iu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",38),t.TgZ(1,"div",39),t.TgZ(2,"mat-select",40),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",41),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function au(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"button",43),t.NdJ("click",function(o){const m=t.CHM(e).$implicit;return t.oxw(2).onForwardingEventClick(m,o)}),t._uU(2,"View Info"),t.qZA(),t.qZA()}}function ou(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No forwarding history available."),t.qZA())}function su(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting forwarding history..."),t.qZA())}function lu(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function ru(n,a){if(1&n&&(t.TgZ(0,"td",44),t.YNc(1,ou,2,0,"p",45),t.YNc(2,su,2,0,"p",45),t.YNc(3,lu,2,1,"p",45),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.forwardingHistoryEvents&&e.forwardingHistoryEvents.data)||(null==e.forwardingHistoryEvents||null==e.forwardingHistoryEvents.data?null:e.forwardingHistoryEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.forwardingHistoryEvents&&e.forwardingHistoryEvents.data)||(null==e.forwardingHistoryEvents||null==e.forwardingHistoryEvents.data?null:e.forwardingHistoryEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.forwardingHistoryEvents&&e.forwardingHistoryEvents.data)||(null==e.forwardingHistoryEvents||null==e.forwardingHistoryEvents.data?null:e.forwardingHistoryEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}const cu=function(n){return{"display-none":n}};function uu(n,a){if(1&n&&t._UZ(0,"tr",46),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,cu,(null==e.forwardingHistoryEvents?null:e.forwardingHistoryEvents.data)&&(null==e.forwardingHistoryEvents||null==e.forwardingHistoryEvents.data?null:e.forwardingHistoryEvents.data.length)>0))}}function pu(n,a){1&n&&t._UZ(0,"tr",47)}function mu(n,a){1&n&&t._UZ(0,"tr",48)}const du=function(){return["no_event"]};function _u(n,a){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,Dc,1,0,"mat-progress-bar",11),t.TgZ(2,"table",12,13),t.ynx(4,14),t.YNc(5,Jc,2,0,"th",15),t.YNc(6,Qc,2,1,"td",16),t.BQk(),t.ynx(7,17),t.YNc(8,Yc,2,0,"th",15),t.YNc(9,Bc,3,4,"td",16),t.BQk(),t.ynx(10,18),t.YNc(11,Hc,2,0,"th",15),t.YNc(12,Vc,3,4,"td",16),t.BQk(),t.ynx(13,19),t.YNc(14,zc,2,0,"th",15),t.YNc(15,Xc,2,1,"td",16),t.BQk(),t.ynx(16,20),t.YNc(17,Gc,2,0,"th",15),t.YNc(18,Wc,2,1,"td",16),t.BQk(),t.ynx(19,21),t.YNc(20,Kc,2,0,"th",22),t.YNc(21,$c,4,4,"td",16),t.BQk(),t.ynx(22,23),t.YNc(23,jc,2,0,"th",22),t.YNc(24,tu,4,4,"td",16),t.BQk(),t.ynx(25,24),t.YNc(26,eu,2,0,"th",22),t.YNc(27,nu,4,3,"td",16),t.BQk(),t.ynx(28,25),t.YNc(29,iu,6,0,"th",26),t.YNc(30,au,3,0,"td",27),t.BQk(),t.ynx(31,28),t.YNc(32,ru,4,3,"td",29),t.BQk(),t.YNc(33,uu,1,3,"tr",30),t.YNc(34,pu,1,0,"tr",31),t.YNc(35,mu,1,0,"tr",32),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.forwardingHistoryEvents),t.xp6(31),t.Q6J("matFooterRowDef",t.DdM(6,du)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function hu(n,a){if(1&n&&t._UZ(0,"mat-paginator",49),2&n){const e=t.oxw();t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS)}}let Mt=(()=>{class n{constructor(e,i,o,l){this.logger=e,this.commonService=i,this.store=o,this.datePipe=l,this.eventsData=[],this.filterValue="",this.successfulEvents=[],this.displayedColumns=[],this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["in_msatoshi","out_msatoshi","actions"]):this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["received_time","in_msatoshi","out_msatoshi","fee","actions"]):(this.flgSticky=!0,this.displayedColumns=["received_time","resolved_time","in_channel","out_channel","in_msatoshi","out_msatoshi","fee","actions"])}ngOnInit(){this.store.select(f.Bo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.eventsData.length<=0&&(this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.successfulEvents=e.forwardingHistory||[],this.successfulEvents.length>0&&this.sort&&this.paginator&&this.loadForwardingEventsTable(this.successfulEvents),this.logger.info(e))})}ngAfterViewInit(){this.successfulEvents.length>0&&this.loadForwardingEventsTable(this.successfulEvents)}ngOnChanges(e){e.eventsData&&(this.apiCallStatus={status:s.Bn.COMPLETED,action:"FetchForwardingHistory"},this.eventsData=e.eventsData.currentValue,this.successfulEvents=this.eventsData,e.eventsData.firstChange||this.loadForwardingEventsTable(this.successfulEvents)),e.filterValue&&!e.filterValue.firstChange&&this.applyFilter()}onForwardingEventClick(e,i){this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Event Information",message:[[{key:"payment_hash",value:e.payment_hash,title:"Payment Hash",width:100,type:s.Gi.STRING}],[{key:"status",value:"Settled",title:"Status",width:50,type:s.Gi.STRING},{key:"fee",value:e.fee,title:"Fee (mSats)",width:50,type:s.Gi.NUMBER}],[{key:"received_time",value:e.received_time,title:"Received Time",width:50,type:s.Gi.DATE_TIME},{key:"resolved_time",value:e.resolved_time,title:"Resolved Time",width:50,type:s.Gi.DATE_TIME}],[{key:"in_channel",value:e.in_channel_alias,title:"Inbound Channel",width:50,type:s.Gi.STRING},{key:"out_channel",value:e.out_channel_alias,title:"Outbound Channel",width:50,type:s.Gi.STRING}],[{key:"in_msatoshi",value:e.in_msatoshi,title:"In (mSats)",width:50,type:s.Gi.NUMBER},{key:"out_msatoshi",value:e.out_msatoshi,title:"Out (mSats)",width:50,type:s.Gi.NUMBER}]]}}}))}loadForwardingEventsTable(e){this.forwardingHistoryEvents=new r.by([...e]),this.forwardingHistoryEvents.sort=this.sort,this.forwardingHistoryEvents.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.forwardingHistoryEvents.paginator=this.paginator,this.forwardingHistoryEvents.filterPredicate=(i,o)=>((i.received_time?this.datePipe.transform(new Date(1e3*i.received_time),"dd/MMM/YYYY HH:mm").toLowerCase():"")+(i.resolved_time?this.datePipe.transform(new Date(1e3*i.resolved_time),"dd/MMM/YYYY HH:mm").toLowerCase():"")+(i.in_channel?i.in_channel.toLowerCase():"")+(i.out_channel?i.out_channel.toLowerCase():"")+(i.in_msatoshi?i.in_msatoshi/1e3:"")+(i.out_msatoshi?i.out_msatoshi/1e3:"")+(i.fee?i.fee:"")).includes(o),this.logger.info(this.forwardingHistoryEvents)}onDownloadCSV(){this.forwardingHistoryEvents&&this.forwardingHistoryEvents.data&&this.forwardingHistoryEvents.data.length>0&&this.commonService.downloadFile(this.forwardingHistoryEvents.data,"Forwarding-history")}applyFilter(){this.forwardingHistoryEvents&&(this.forwardingHistoryEvents.filter=this.filterValue.trim().toLowerCase())}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh),t.Y36(u.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-forwarding-history"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},inputs:{eventsData:"eventsData",filterValue:"filterValue"},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Events")}]),t.TTD],decls:5,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"padding-gap-x"],["class","p-2 error-border my-2",4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch","class","page-sub-title-container",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100","class","table-container",3,"perfectScrollbar",4,"ngIf"],["class","mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons",4,"ngIf"],[1,"p-2","error-border","my-2"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","name","filter","placeholder","Filter",3,"ngModel","ngModelChange","input","keyup"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","fxFlex","100","matSort","",1,"overflow-auto",3,"dataSource"],["table",""],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","received_time"],["matColumnDef","resolved_time"],["matColumnDef","in_channel"],["matColumnDef","out_channel"],["matColumnDef","in_msatoshi"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","out_msatoshi"],["matColumnDef","fee"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","class","px-3","fxLayoutAlign","end center",4,"matCellDef"],["matColumnDef","no_event"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"px-3"],["mat-stroked-button","","color","primary","type","button","tabindex","4",3,"click"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ec,2,1,"div",1),t.YNc(2,Pc,4,1,"div",2),t.YNc(3,_u,36,7,"div",3),t.YNc(4,hu,1,3,"mat-paginator",4),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",""!==i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage))},directives:[p.xw,p.Wh,u.O5,p.yH,g.KE,M.Nt,c.Fj,c.JJ,c.On,Y.$V,r.BZ,A.YE,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,P.pW,r.ge,A.nU,r.ev,U.gD,U.$L,B.ey,O.lW,r.yh,r.Q2,u.mk,F.oO,r.XQ,r.Gk,w.NW],pipes:[u.uU,u.JJ],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();function fu(n,a){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function gu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t._UZ(1,"div",7),t.TgZ(2,"mat-form-field",8),t.TgZ(3,"input",9),t.NdJ("keyup",function(){return t.CHM(e),t.oxw().applyFilter()})("ngModelChange",function(o){return t.CHM(e),t.oxw().selFilter=o}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.selFilter)}}function Cu(n,a){1&n&&t._UZ(0,"mat-progress-bar",29)}function xu(n,a){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Status"),t.qZA())}function yu(n,a){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,"local_failed"===(null==e?null:e.status)?"local failed":null==e?null:e.status))}}function Tu(n,a){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Received Time"),t.qZA())}function Zu(n,a){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,1e3*(null==e?null:e.received_time),"dd/MMM/YYYY HH:mm"))}}function Au(n,a){1&n&&(t.TgZ(0,"th",30),t._uU(1,"In Channel"),t.qZA())}function vu(n,a){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.in_channel_alias)}}function Lu(n,a){1&n&&(t.TgZ(0,"th",32),t._uU(1,"Amount In (Sats)"),t.qZA())}function bu(n,a){if(1&n&&(t.TgZ(0,"td",31),t.TgZ(1,"span",33),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.in_msatoshi)/1e3,(null==e?null:e.in_msatoshi)<1e3?"1.0-4":"1.0-0"))}}function Su(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"th",34),t.TgZ(1,"div",35),t.TgZ(2,"mat-select",36),t._UZ(3,"mat-select-trigger"),t.TgZ(4,"mat-option",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onDownloadCSV()}),t._uU(5,"Download CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function wu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",38),t.TgZ(1,"button",39),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onFailedEventClick(l)}),t._uU(2,"View Info"),t.qZA(),t.qZA()}}function qu(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No failed transaction available."),t.qZA())}function Fu(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting failed transactions..."),t.qZA())}function Ru(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function Ou(n,a){if(1&n&&(t.TgZ(0,"td",40),t.YNc(1,qu,2,0,"p",41),t.YNc(2,Fu,2,0,"p",41),t.YNc(3,Ru,2,1,"p",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.failedForwardingEvents&&e.failedForwardingEvents.data)||(null==e.failedForwardingEvents||null==e.failedForwardingEvents.data?null:e.failedForwardingEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.failedForwardingEvents&&e.failedForwardingEvents.data)||(null==e.failedForwardingEvents||null==e.failedForwardingEvents.data?null:e.failedForwardingEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.failedForwardingEvents&&e.failedForwardingEvents.data)||(null==e.failedForwardingEvents||null==e.failedForwardingEvents.data?null:e.failedForwardingEvents.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}const Uu=function(n){return{"display-none":n}};function ku(n,a){if(1&n&&t._UZ(0,"tr",42),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Uu,(null==e.failedForwardingEvents?null:e.failedForwardingEvents.data)&&(null==e.failedForwardingEvents||null==e.failedForwardingEvents.data?null:e.failedForwardingEvents.data.length)>0))}}function Nu(n,a){1&n&&t._UZ(0,"tr",43)}function Iu(n,a){1&n&&t._UZ(0,"tr",44)}const Mu=function(){return["no_event"]};function Eu(n,a){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,Cu,1,0,"mat-progress-bar",11),t.TgZ(2,"table",12,13),t.ynx(4,14),t.YNc(5,xu,2,0,"th",15),t.YNc(6,yu,3,3,"td",16),t.BQk(),t.ynx(7,17),t.YNc(8,Tu,2,0,"th",15),t.YNc(9,Zu,3,4,"td",16),t.BQk(),t.ynx(10,18),t.YNc(11,Au,2,0,"th",15),t.YNc(12,vu,2,1,"td",16),t.BQk(),t.ynx(13,19),t.YNc(14,Lu,2,0,"th",20),t.YNc(15,bu,4,4,"td",16),t.BQk(),t.ynx(16,21),t.YNc(17,Su,6,0,"th",22),t.YNc(18,wu,3,0,"td",23),t.BQk(),t.ynx(19,24),t.YNc(20,Ou,4,3,"td",25),t.BQk(),t.YNc(21,ku,1,3,"tr",26),t.YNc(22,Nu,1,0,"tr",27),t.YNc(23,Iu,1,0,"tr",28),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.failedForwardingEvents),t.xp6(19),t.Q6J("matFooterRowDef",t.DdM(6,Mu)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function Pu(n,a){if(1&n&&t._UZ(0,"mat-paginator",45),2&n){const e=t.oxw();t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS)}}let Du=(()=>{class n{constructor(e,i,o,l,m){this.logger=e,this.commonService=i,this.store=o,this.datePipe=l,this.router=m,this.errorMessage="",this.displayedColumns=[],this.flgSticky=!1,this.selFilter="",this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS||this.screenSize===s.cu.SM||this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["status","received_time","in_msatoshi","actions"]):(this.flgSticky=!0,this.displayedColumns=["status","received_time","in_channel","in_msatoshi","actions"])}ngOnInit(){this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.store.dispatch((0,y.Ip)()),this.store.select(f.xQ).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.failedEvents=e.failedForwardingHistory||[],this.failedEvents.length>0&&this.sort&&this.paginator&&this.loadFailedEventsTable(this.failedEvents),this.logger.info(e)})}ngAfterViewInit(){this.failedEvents.length>0&&this.loadFailedEventsTable(this.failedEvents)}onFailedEventClick(e){const i=[[{key:"payment_hash",value:e.payment_hash,title:"Payment Hash",width:100,type:s.Gi.STRING}],[{key:"status",value:"local_failed"===e.status?"Local Failed":this.commonService.titleCase(e.status),title:"Status",width:50,type:s.Gi.STRING},{key:"received_time",value:e.received_time,title:"Received Time",width:50,type:s.Gi.DATE_TIME}],[{key:"in_channel",value:e.in_channel_alias,title:"Inbound Channel",width:50,type:s.Gi.STRING},{key:"in_msatoshi",value:e.in_msatoshi,title:"In (mSats)",width:50,type:s.Gi.NUMBER}]];this.store.dispatch((0,L.qR)({payload:{data:{type:s.n_.INFORMATION,alertTitle:"Event Information",message:i}}}))}loadFailedEventsTable(e){this.failedForwardingEvents=new r.by([...e]),this.failedForwardingEvents.sort=this.sort,this.failedForwardingEvents.sortingDataAccessor=(i,o)=>i[o]&&isNaN(i[o])?i[o].toLocaleLowerCase():i[o]?+i[o]:null,this.failedForwardingEvents.paginator=this.paginator,this.failedForwardingEvents.filterPredicate=(i,o)=>((i.status?"local_failed"===i.status?"local failed":i.status.toLowerCase():"")+(i.received_time?this.datePipe.transform(new Date(1e3*i.received_time),"dd/MMM/YYYY HH:mm").toLowerCase():"")+(i.resolved_time?this.datePipe.transform(new Date(1e3*i.resolved_time),"dd/MMM/YYYY HH:mm").toLowerCase():"")+(i.in_channel?i.in_channel.toLowerCase():"")+(i.out_channel?i.out_channel.toLowerCase():"")+(i.in_msatoshi?i.in_msatoshi/1e3:"")+(i.out_msatoshi?i.out_msatoshi/1e3:"")+(i.fee?i.fee:"")).includes(o),this.applyFilter(),this.logger.info(this.failedForwardingEvents)}onDownloadCSV(){this.failedForwardingEvents&&this.failedForwardingEvents.data&&this.failedForwardingEvents.data.length>0&&this.commonService.downloadFile(this.failedForwardingEvents.data,"Failed-transactions")}applyFilter(){this.failedForwardingEvents.filter=this.selFilter.trim().toLowerCase()}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh),t.Y36(u.uU),t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-failed-history"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.YE,5),t.Gf(w.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Events")}])],decls:5,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"padding-gap-x"],["class","p-2 error-border my-2",4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch","class","page-sub-title-container",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100","class","table-container",3,"perfectScrollbar",4,"ngIf"],["class","mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons",4,"ngIf"],[1,"p-2","error-border","my-2"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","fxFlex","100","matSort","",1,"overflow-auto",3,"dataSource"],["table",""],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","received_time"],["matColumnDef","in_channel"],["matColumnDef","in_msatoshi"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","class","px-3","fxLayoutAlign","end center",4,"matCellDef"],["matColumnDef","no_event"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"px-3"],["mat-stroked-button","","color","primary","type","button","tabindex","4",3,"click"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,fu,2,1,"div",1),t.YNc(2,gu,4,1,"div",2),t.YNc(3,Eu,24,7,"div",3),t.YNc(4,Pu,1,3,"mat-paginator",4),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",""!==i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage))},directives:[p.xw,p.Wh,u.O5,p.yH,g.KE,M.Nt,c.Fj,c.JJ,c.On,Y.$V,r.BZ,A.YE,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,P.pW,r.ge,A.nU,r.ev,U.gD,U.$L,B.ey,O.lW,r.yh,r.Q2,u.mk,F.oO,r.XQ,r.Gk,w.NW],pipes:[u.rS,u.uU,u.JJ],styles:[".mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),n})();const Ju=["tableIn"],Qu=["tableOut"],Yu=["paginatorIn"],Bu=["paginatorOut"];function Hu(n,a){if(1&n&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function Vu(n,a){1&n&&t._UZ(0,"mat-progress-bar",37)}function zu(n,a){1&n&&(t.TgZ(0,"th",38),t._uU(1,"Channel ID"),t.qZA())}const ct=function(n){return{"max-width":n}};function Xu(n,a){if(1&n&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,ct,i.screenSize===i.screenSizeEnum.XS?"5rem":"10rem")),t.xp6(1),t.Oqu(e.channel_id)}}function Gu(n,a){1&n&&(t.TgZ(0,"th",38),t._uU(1,"Peer Alias"),t.qZA())}function Wu(n,a){if(1&n&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,ct,i.screenSize===i.screenSizeEnum.XS?"5rem":"10rem")),t.xp6(1),t.Oqu(e.alias)}}function Ku(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Events"),t.qZA())}function $u(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.events))}}function ju(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Amount (Sats)"),t.qZA())}function tp(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.total_amount)/1e3,(null==e?null:e.total_amount)<1e3?"1.0-4":"1.0-0"))}}function ep(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Fee (Sats)"),t.qZA())}function np(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.total_fee)/1e3,(null==e?null:e.total_fee)<1e3?"1.0-4":"1.0-0"))}}function ip(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No incoming routing peer available."),t.qZA())}function ap(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting incoming routing peers..."),t.qZA())}function op(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function sp(n,a){if(1&n&&(t.TgZ(0,"td",43),t.YNc(1,ip,2,0,"p",44),t.YNc(2,ap,2,0,"p",44),t.YNc(3,op,2,1,"p",44),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersIncoming&&e.RoutingPeersIncoming.data)||(null==e.RoutingPeersIncoming||null==e.RoutingPeersIncoming.data?null:e.RoutingPeersIncoming.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersIncoming&&e.RoutingPeersIncoming.data)||(null==e.RoutingPeersIncoming||null==e.RoutingPeersIncoming.data?null:e.RoutingPeersIncoming.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersIncoming&&e.RoutingPeersIncoming.data)||(null==e.RoutingPeersIncoming||null==e.RoutingPeersIncoming.data?null:e.RoutingPeersIncoming.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}const Et=function(n){return{"display-none":n}};function lp(n,a){if(1&n&&t._UZ(0,"tr",45),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Et,(null==e.RoutingPeersIncoming?null:e.RoutingPeersIncoming.data)&&(null==e.RoutingPeersIncoming||null==e.RoutingPeersIncoming.data?null:e.RoutingPeersIncoming.data.length)>0))}}function rp(n,a){1&n&&t._UZ(0,"tr",46)}function cp(n,a){1&n&&t._UZ(0,"tr",47)}function up(n,a){1&n&&t._UZ(0,"mat-progress-bar",37)}function pp(n,a){1&n&&(t.TgZ(0,"th",38),t._uU(1,"Channel ID"),t.qZA())}function mp(n,a){if(1&n&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,ct,i.screenSize===i.screenSizeEnum.XS?"5rem":"10rem")),t.xp6(1),t.Oqu(e.channel_id)}}function dp(n,a){1&n&&(t.TgZ(0,"th",38),t._uU(1,"Peer Alias"),t.qZA())}function _p(n,a){if(1&n&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,ct,i.screenSize===i.screenSizeEnum.XS?"5rem":"10rem")),t.xp6(1),t.Oqu(e.alias)}}function hp(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Events"),t.qZA())}function fp(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e.events))}}function gp(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Amount (Sats)"),t.qZA())}function Cp(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.total_amount)/1e3,(null==e?null:e.total_amount)<1e3?"1.0-4":"1.0-0"))}}function xp(n,a){1&n&&(t.TgZ(0,"th",40),t._uU(1,"Fee (Sats)"),t.qZA())}function yp(n,a){if(1&n&&(t.TgZ(0,"td",41),t.TgZ(1,"span",42),t._uU(2),t.ALo(3,"number"),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,(null==e?null:e.total_fee)/1e3,(null==e?null:e.total_fee)<1e3?"1.0-4":"1.0-0"))}}function Tp(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"No outgoing routing peer available."),t.qZA())}function Zp(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"Getting outgoing routing peers..."),t.qZA())}function Ap(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function vp(n,a){if(1&n&&(t.TgZ(0,"td",43),t.YNc(1,Tp,2,0,"p",44),t.YNc(2,Zp,2,0,"p",44),t.YNc(3,Ap,2,1,"p",44),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersOutgoing&&e.RoutingPeersOutgoing.data)||(null==e.RoutingPeersOutgoing||null==e.RoutingPeersOutgoing.data?null:e.RoutingPeersOutgoing.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.COMPLETED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersOutgoing&&e.RoutingPeersOutgoing.data)||(null==e.RoutingPeersOutgoing||null==e.RoutingPeersOutgoing.data?null:e.RoutingPeersOutgoing.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(!(null!=e.RoutingPeersOutgoing&&e.RoutingPeersOutgoing.data)||(null==e.RoutingPeersOutgoing||null==e.RoutingPeersOutgoing.data?null:e.RoutingPeersOutgoing.data.length)<1)&&(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.ERROR)}}function Lp(n,a){if(1&n&&t._UZ(0,"tr",45),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Et,(null==e.RoutingPeersOutgoing?null:e.RoutingPeersOutgoing.data)&&(null==e.RoutingPeersOutgoing||null==e.RoutingPeersOutgoing.data?null:e.RoutingPeersOutgoing.data.length)>0))}}function bp(n,a){1&n&&t._UZ(0,"tr",46)}function Sp(n,a){1&n&&t._UZ(0,"tr",47)}const wp=function(n,a){return{"mt-2":n,"mt-1":a}},qp=function(){return["no_incoming_event"]},Fp=function(n){return{"mt-2":n}},Rp=function(){return["no_outgoing_event"]};function Op(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"div",7),t._uU(4,"Incoming"),t.qZA(),t.TgZ(5,"mat-form-field",8),t.TgZ(6,"input",9),t.NdJ("keyup",function(o){return t.CHM(e),t.oxw().applyIncomingFilter(o.target)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",10),t.YNc(8,Vu,1,0,"mat-progress-bar",11),t.TgZ(9,"table",12,13),t.ynx(11,14),t.YNc(12,zu,2,0,"th",15),t.YNc(13,Xu,2,4,"td",16),t.BQk(),t.ynx(14,17),t.YNc(15,Gu,2,0,"th",15),t.YNc(16,Wu,2,4,"td",16),t.BQk(),t.ynx(17,18),t.YNc(18,Ku,2,0,"th",19),t.YNc(19,$u,4,3,"td",20),t.BQk(),t.ynx(20,21),t.YNc(21,ju,2,0,"th",19),t.YNc(22,tp,4,4,"td",20),t.BQk(),t.ynx(23,22),t.YNc(24,ep,2,0,"th",19),t.YNc(25,np,4,4,"td",20),t.BQk(),t.ynx(26,23),t.YNc(27,sp,4,3,"td",24),t.BQk(),t.YNc(28,lp,1,3,"tr",25),t.YNc(29,rp,1,0,"tr",26),t.YNc(30,cp,1,0,"tr",27),t.qZA(),t.qZA(),t._UZ(31,"mat-paginator",28,29),t.qZA(),t.TgZ(33,"div",30),t.TgZ(34,"div",6),t.TgZ(35,"div",7),t._uU(36,"Outgoing"),t.qZA(),t.TgZ(37,"mat-form-field",8),t.TgZ(38,"input",9,31),t.NdJ("keyup",function(o){return t.CHM(e),t.oxw().applyOutgoingFilter(o.target)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",32),t.YNc(41,up,1,0,"mat-progress-bar",11),t.TgZ(42,"table",33,34),t.ynx(44,14),t.YNc(45,pp,2,0,"th",15),t.YNc(46,mp,2,4,"td",16),t.BQk(),t.ynx(47,17),t.YNc(48,dp,2,0,"th",15),t.YNc(49,_p,2,4,"td",16),t.BQk(),t.ynx(50,18),t.YNc(51,hp,2,0,"th",19),t.YNc(52,fp,4,3,"td",20),t.BQk(),t.ynx(53,21),t.YNc(54,gp,2,0,"th",19),t.YNc(55,Cp,4,4,"td",20),t.BQk(),t.ynx(56,22),t.YNc(57,xp,2,0,"th",19),t.YNc(58,yp,4,4,"td",20),t.BQk(),t.ynx(59,35),t.YNc(60,vp,4,3,"td",24),t.BQk(),t.YNc(61,Lp,1,3,"tr",25),t.YNc(62,bp,1,0,"tr",26),t.YNc(63,Sp,1,0,"tr",27),t.qZA(),t._UZ(64,"mat-paginator",28,36),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(20,wp,e.screenSize===e.screenSizeEnum.XS,e.screenSize===e.screenSizeEnum.SM)),t.xp6(6),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.RoutingPeersIncoming),t.xp6(19),t.Q6J("matFooterRowDef",t.DdM(23,qp)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS),t.xp6(3),t.Q6J("ngClass",t.VKq(24,Fp,e.screenSize!==e.screenSizeEnum.LG)),t.xp6(7),t.Q6J("ngIf",(null==e.apiCallStatus?null:e.apiCallStatus.status)===e.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("dataSource",e.RoutingPeersOutgoing),t.xp6(19),t.Q6J("matFooterRowDef",t.DdM(26,Rp)),t.xp6(1),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.flgSticky),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",e.screenSize!==e.screenSizeEnum.XS)}}let Up=(()=>{class n{constructor(e,i,o){this.logger=e,this.commonService=i,this.store=o,this.eventsData=[],this.filterValue="",this.successfulEvents=[],this.displayedColumns=[],this.RoutingPeersIncoming=[],this.RoutingPeersOutgoing=[],this.flgSticky=!1,this.pageSize=s.IV,this.pageSizeOptions=s.TJ,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x,new d.x],this.screenSize=this.commonService.getScreenSize(),this.screenSize===s.cu.XS?(this.flgSticky=!1,this.displayedColumns=["alias","total_fee"]):this.screenSize===s.cu.SM?(this.flgSticky=!1,this.displayedColumns=["alias","events","total_fee"]):this.screenSize===s.cu.MD?(this.flgSticky=!1,this.displayedColumns=["alias","events","total_amount","total_fee"]):(this.flgSticky=!0,this.displayedColumns=["channel_id","alias","events","total_amount","total_fee"])}ngOnInit(){this.store.select(f.Bo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.eventsData.length<=0&&(this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.successfulEvents=e.forwardingHistory||[],this.successfulEvents.length>0&&this.sortIn&&this.paginatorIn&&this.sortOut&&this.paginatorOut&&this.loadRoutingPeersTable(this.successfulEvents),this.logger.info(e))})}ngAfterViewInit(){this.successfulEvents.length>0&&this.loadRoutingPeersTable(this.successfulEvents)}ngOnChanges(e){e.eventsData&&(this.apiCallStatus={status:s.Bn.COMPLETED,action:"FetchForwardingHistory"},this.eventsData=e.eventsData.currentValue,this.successfulEvents=this.eventsData,e.eventsData.firstChange||this.loadRoutingPeersTable(this.successfulEvents))}loadRoutingPeersTable(e){if(e.length>0){const i=this.groupRoutingPeers(e);this.RoutingPeersIncoming=new r.by(i[0]),this.RoutingPeersIncoming.sort=this.sortIn,this.RoutingPeersIncoming.filterPredicate=(o,l)=>JSON.stringify(o).toLowerCase().includes(l),this.RoutingPeersIncoming.paginator=this.paginatorIn,this.logger.info(this.RoutingPeersIncoming),this.RoutingPeersOutgoing=new r.by(i[1]),this.RoutingPeersOutgoing.sort=this.sortOut,this.RoutingPeersOutgoing.filterPredicate=(o,l)=>JSON.stringify(o).toLowerCase().includes(l),this.RoutingPeersOutgoing.paginator=this.paginatorOut,this.logger.info(this.RoutingPeersOutgoing)}else this.RoutingPeersIncoming=new r.by([]),this.RoutingPeersOutgoing=new r.by([]);this.logger.info(this.RoutingPeersIncoming),this.logger.info(this.RoutingPeersOutgoing)}groupRoutingPeers(e){const i=[],o=[];return e.forEach(l=>{const m=i.find(J=>J.channel_id===l.in_channel),v=o.find(J=>J.channel_id===l.out_channel);m?(m.events++,m.total_amount=+m.total_amount+ +l.in_msatoshi,m.total_fee=l.in_msatoshi-l.out_msatoshi+ +m.total_fee):i.push({channel_id:l.in_channel,alias:l.in_channel_alias,events:1,total_amount:l.in_msatoshi,total_fee:l.in_msatoshi-l.out_msatoshi}),v?(v.events++,v.total_amount=+v.total_amount+ +l.out_msatoshi,v.total_fee=l.in_msatoshi-l.out_msatoshi+ +v.total_fee):o.push({channel_id:l.out_channel,alias:l.out_channel_alias,events:1,total_amount:l.out_msatoshi,total_fee:l.in_msatoshi-l.out_msatoshi})}),[this.commonService.sortDescByKey(i,"total_fee"),this.commonService.sortDescByKey(o,"total_fee")]}applyIncomingFilter(e){this.RoutingPeersIncoming.filter=e.value.trim().toLowerCase()}applyOutgoingFilter(e){this.RoutingPeersOutgoing.filter=e.value.trim().toLowerCase()}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-routing-peers"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ju,5,A.YE),t.Gf(Qu,5,A.YE),t.Gf(Yu,5),t.Gf(Bu,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.sortIn=o.first),t.iGM(o=t.CRH())&&(i.sortOut=o.first),t.iGM(o=t.CRH())&&(i.paginatorIn=o.first),t.iGM(o=t.CRH())&&(i.paginatorOut=o.first)}},inputs:{eventsData:"eventsData",filterValue:"filterValue"},features:[t._Bn([{provide:w.ye,useValue:(0,s.pt)("Peers")}]),t.TTD],decls:3,vars:2,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"padding-gap-x"],["class","p-2 error-border my-2",4,"ngIf"],["fxLayout","column","fxLayout.gt-md","row","fxFlex","100","fxLayoutAlign","space-between stretch","class","page-sub-title-container",4,"ngIf"],[1,"p-2","error-border","my-2"],["fxLayout","column","fxLayout.gt-md","row","fxFlex","100","fxLayoutAlign","space-between stretch",1,"page-sub-title-container"],["fxLayout","column","fxFlex","49","fxLayoutAlign","start stretch"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center","fxLayoutAlign","start stretch",1,"page-sub-title-container","w-100",3,"ngClass"],["fxFlex","70"],["fxFlex","30"],["matInput","","placeholder","Filter",3,"keyup"],["fxLayout","column","fxLayoutAlign","start stretch","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",1,"overflow-auto","incoming-table",3,"dataSource"],["tableIn",""],["matColumnDef","channel_id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","events"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","total_amount"],["matColumnDef","total_fee"],["matColumnDef","no_incoming_event"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-1",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["paginatorIn",""],["fxLayout","column","fxFlex","49","fxLayoutAlign","end stretch"],["filterOut",""],["fxLayout","column","fxLayoutAlign","start end","fxFlex","100",1,"table-container",3,"perfectScrollbar"],["mat-table","","matSort","",1,"overflow-auto","outgoing-table",3,"dataSource"],["tableOut",""],["matColumnDef","no_outgoing_event"],["paginatorOut",""],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"ngStyle"],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["mat-cell",""],["fxLayoutAlign","end center"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Hu,2,1,"div",1),t.YNc(2,Op,66,27,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",""!==i.errorMessage),t.xp6(1),t.Q6J("ngIf",""===i.errorMessage))},directives:[p.xw,p.Wh,u.O5,p.yH,u.mk,F.oO,g.KE,M.Nt,Y.$V,r.BZ,A.YE,r.w1,r.fO,r.Dz,r.mD,r.Ke,r.as,r.nj,w.NW,P.pW,r.ge,A.nU,r.ev,u.PC,F.Zl,r.yh,r.Q2,r.XQ,r.Gk],pipes:[u.JJ],styles:[".mat-column-channelId[_ngcontent-%COMP%], .mat-column-alias[_ngcontent-%COMP%]{flex:1 1 10%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})();function kp(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeLink=l.link}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw();t.s9C("routerLink",e.link),t.Q6J("active",i.activeLink===e.link),t.xp6(1),t.Oqu(e.name)}}let Np=(()=>{class n{constructor(e){this.router=e,this.faChartBar=x.koM,this.links=[{link:"routingfees",name:"Routing Fees"},{link:"transactions",name:"Transactions"}],this.activeLink=this.links[0].link,this.unSubs=[new d.x,new d.x,new d.x,new d.x]}ngOnInit(){const e=this.links.find(i=>this.router.url.includes(i.link));this.activeLink=e?e.link:this.links[0].link,this.router.events.pipe((0,_.R)(this.unSubs[0]),(0,E.h)(i=>i instanceof C.Av)).subscribe(i=>{const o=this.links.find(l=>i.urlAfterRedirects.includes(l.link));this.activeLink=o?o.link:this.links[0].link})}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-reports"]],decls:10,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x"],["fxLayout","column"],["mat-tab-nav-bar",""],["role","tab","mat-tab-link","","class","mat-tab-label",3,"active","routerLink","click",4,"ngFor","ngForOf"],["role","tab","mat-tab-link","",1,"mat-tab-label",3,"active","routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"fa-icon",1),t.TgZ(2,"span",2),t._uU(3,"Reports"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"mat-card"),t.TgZ(6,"mat-card-content",4),t.TgZ(7,"nav",5),t.YNc(8,kp,2,3,"div",6),t.qZA(),t._UZ(9,"router-outlet"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",i.faChartBar),t.xp6(7),t.Q6J("ngForOf",i.links))},directives:[p.xw,p.Wh,k.BN,Z.a8,Z.dn,N.BU,u.sg,C.lC,N.Nj,C.rH],styles:[""]}),n})();var Pt=h(4821),Dt=h(6831),Jt=h(3035);function Ip(n,a){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"mat-progress-bar",10),t.TgZ(2,"p"),t._uU(3,"Getting fee report..."),t.qZA(),t.qZA())}function Mp(n,a){if(1&n&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function Ep(n,a){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw();t.Q6J("@fadeIn",e.totalFeeMsat),t.xp6(1),t.AsE("",t.xi3(2,3,e.totalFeeMsat/1e3||0,"1.0-2")," Sats/",t.lcZ(3,6,e.filteredEventsBySelectedPeriod.length||0)," Events")}}function Pp(n,a){1&n&&(t.TgZ(0,"div",9),t._uU(1,"No fee report for the selected period"),t.qZA())}function Dp(n,a){if(1&n&&(t.TgZ(0,"span"),t.TgZ(1,"span",15),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"span",15),t._uU(5),t.ALo(6,"number"),t.qZA(),t.qZA()),2&n){const e=a.model;t.xp6(2),t.hij("Events: ",t.lcZ(3,2,e.extra.totalEvents||0),""),t.xp6(3),t.hij("Fee: ",t.xi3(6,4,e.value||0,"1.0-2"),"")}}function Jp(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ngx-charts-bar-vertical",13),t.NdJ("select",function(o){return t.CHM(e),t.oxw().onChartBarSelected(o)})("mouseup",function(o){return t.CHM(e),t.oxw().onChartMouseUp(o)}),t.YNc(1,Dp,7,7,"ng-template",null,14,t.W1O),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("view",e.view)("results",e.feeReportData)("gradient",!1)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("showGridLines",!1)("showDataLabel",!1)}}function Qp(n,a){if(1&n&&t._UZ(0,"rtl-cl-forwarding-history",16),2&n){const e=t.oxw();t.Q6J("eventsData",e.filteredEventsBySelectedPeriod)("filterValue",e.eventFilterValue)}}let Yp=(()=>{class n{constructor(e,i,o){this.logger=e,this.commonService=i,this.store=o,this.reportPeriod=s.op[0],this.secondsInADay=86400,this.events=[],this.filteredEventsBySelectedPeriod=[],this.eventFilterValue="",this.totalFeeMsat=null,this.today=new Date(Date.now()),this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),1,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.getMonthDays(this.today.getMonth(),this.today.getFullYear()),23,59,59),this.feeReportData=[],this.view=[350,350],this.screenPaddingX=100,this.gradient=!0,this.xAxisLabel="Date",this.yAxisLabel="Fee (Sats)",this.showYAxisLabel=!0,this.screenSize="",this.screenSizeEnum=s.cu,this.errorMessage="",this.apiCallStatus=null,this.apiCallStatusEnum=s.Bn,this.unSubs=[new d.x,new d.x]}ngOnInit(){this.screenSize=this.commonService.getScreenSize(),this.showYAxisLabel=!(this.screenSize===s.cu.XS||this.screenSize===s.cu.SM),this.store.select(f.Bo).pipe((0,_.R)(this.unSubs[0])).subscribe(e=>{this.errorMessage="",this.apiCallStatus=e.apiCallStatus,this.apiCallStatus.status===s.Bn.ERROR&&(this.errorMessage="object"==typeof this.apiCallStatus.message?JSON.stringify(this.apiCallStatus.message):this.apiCallStatus.message),this.events=e.forwardingHistory||[],this.filterForwardingEvents(this.startDate,this.endDate),this.logger.info(e)}),this.commonService.containerSizeUpdated.pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{switch(this.screenSize){case s.cu.MD:this.screenPaddingX=e.width/10;break;case s.cu.LG:this.screenPaddingX=e.width/16;break;default:this.screenPaddingX=e.width/20}this.view=[e.width-this.screenPaddingX,e.height/2.2]})}filterForwardingEvents(e,i){const o=Math.round(e.getTime()/1e3),l=Math.round(i.getTime()/1e3);this.filteredEventsBySelectedPeriod=[],this.feeReportData=[],this.totalFeeMsat=null,this.events&&this.events.length>0&&(this.events.forEach(m=>{m.received_time>=o&&m.received_time<l&&this.filteredEventsBySelectedPeriod.push(m)}),this.feeReportData=this.prepareFeeReport(e))}onChartMouseUp(e){"svg"===e.srcElement.tagName&&e.srcElement.classList.length>0&&"ngx-charts"===e.srcElement.classList[0]&&(this.eventFilterValue="")}onChartBarSelected(e){this.eventFilterValue=this.reportPeriod===s.op[1]?e.name+"/"+this.startDate.getFullYear():e.name.toString().padStart(2,"0")+"/"+s.gg[this.startDate.getMonth()].name+"/"+this.startDate.getFullYear()}prepareFeeReport(e){const i=Math.round(e.getTime()/1e3),o=[];if(this.reportPeriod===s.op[1]){for(let l=0;l<12;l++)o.push({name:s.gg[l].name,value:1e-9,extra:{totalEvents:0}});this.filteredEventsBySelectedPeriod.map(l=>{const m=new Date(1e3*+l.received_time).getMonth();return o[m].value=o[m].value+ +l.fee/1e3,o[m].extra.totalEvents=o[m].extra.totalEvents+1,this.totalFeeMsat=(this.totalFeeMsat?this.totalFeeMsat:0)+ +l.fee,this.filteredEventsBySelectedPeriod})}else{for(let l=0;l<this.getMonthDays(e.getMonth(),e.getFullYear());l++)o.push({name:l+1,value:1e-9,extra:{totalEvents:0}});this.filteredEventsBySelectedPeriod.map(l=>{const m=Math.floor((+l.received_time-i)/this.secondsInADay);return o[m].value=o[m].value+ +l.fee/1e3,o[m].extra.totalEvents=o[m].extra.totalEvents+1,this.totalFeeMsat=(this.totalFeeMsat?this.totalFeeMsat:0)+ +l.fee,this.filteredEventsBySelectedPeriod})}return o}onSelectionChange(e){const i=e.selDate.getMonth(),o=e.selDate.getFullYear();this.reportPeriod=e.selScrollRange,this.reportPeriod===s.op[1]?(this.startDate=new Date(o,0,1,0,0,0),this.endDate=new Date(o,11,31,23,59,59)):(this.startDate=new Date(o,i,1,0,0,0),this.endDate=new Date(o,i,this.getMonthDays(i,o),23,59,59)),this.filterForwardingEvents(this.startDate,this.endDate),this.eventFilterValue=""}getMonthDays(e,i){return 1===e&&i%4==0?s.gg[e].days+1:s.gg[e].days}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.mQ),t.Y36(R.v),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-fee-report"]],hostBindings:function(e,i){1&e&&t.NdJ("mouseup",function(l){return i.onChartMouseUp(l)})},decls:11,vars:6,consts:[["fxLayout","column","fxLayoutAlign","start stretch","fxFlex","100",1,"padding-gap-x-large"],[3,"stepChanged"],["fxLayout","column","fxLayoutAlign","start stretch","fxFlex","100",1,"padding-gap-x"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100","class","font-size-120 mt-1",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100","class","font-size-120 mt-1 error-border",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100","class","font-size-120 font-bold-700 mt-1",4,"ngIf"],[1,"mt-1"],["class","one-color",3,"view","results","gradient","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","showGridLines","showDataLabel","select","mouseup",4,"ngIf"],[3,"eventsData","filterValue",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100",1,"font-size-120","mt-1"],["mode","indeterminate"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100",1,"font-size-120","mt-1","error-border"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100",1,"font-size-120","font-bold-700","mt-1"],[1,"one-color",3,"view","results","gradient","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","showGridLines","showDataLabel","select","mouseup"],["tooltipTemplate",""],[1,"tooltip-label"],[3,"eventsData","filterValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"rtl-horizontal-scroller",1),t.NdJ("stepChanged",function(l){return i.onSelectionChange(l)}),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,Ip,4,0,"div",3),t.YNc(4,Mp,2,1,"div",4),t.YNc(5,Ep,4,8,"div",5),t.YNc(6,Pp,2,0,"div",3),t.TgZ(7,"div",6),t.YNc(8,Jp,3,11,"ngx-charts-bar-vertical",7),t.qZA(),t.TgZ(9,"div",6),t.YNc(10,Qp,1,2,"rtl-cl-forwarding-history",8),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",(null==i.apiCallStatus?null:i.apiCallStatus.status)===i.apiCallStatusEnum.INITIATED),t.xp6(1),t.Q6J("ngIf",(null==i.apiCallStatus?null:i.apiCallStatus.status)===i.apiCallStatusEnum.ERROR),t.xp6(1),t.Q6J("ngIf",(null==i.apiCallStatus?null:i.apiCallStatus.status)===i.apiCallStatusEnum.COMPLETED&&i.feeReportData.length>0&&i.filteredEventsBySelectedPeriod.length>0),t.xp6(1),t.Q6J("ngIf",(null==i.apiCallStatus?null:i.apiCallStatus.status)===i.apiCallStatusEnum.COMPLETED&&(i.feeReportData.length<=0||i.filteredEventsBySelectedPeriod.length<=0)),t.xp6(2),t.Q6J("ngIf",i.feeReportData.length>0&&i.filteredEventsBySelectedPeriod.length>0),t.xp6(2),t.Q6J("ngIf",i.filteredEventsBySelectedPeriod&&i.filteredEventsBySelectedPeriod.length>0))},directives:[p.xw,p.Wh,p.yH,Dt.D,u.O5,P.pW,Jt.K$,Mt],pipes:[u.JJ],styles:[""],data:{animation:[Pt.J]}}),n})();var Bp=h(6785);function Hp(n,a){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" Paid ",t.xi3(2,2,e.transactionsReportSummary.amountPaidSelectedPeriod/1e3||0,"1.0-2")," Sats/",t.lcZ(3,5,e.transactionsReportSummary.paymentsSelectedPeriod)," Payments ")}}function Vp(n,a){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" Received ",t.xi3(2,2,e.transactionsReportSummary.amountReceivedSelectedPeriod/1e3||0,"1.0-2")," Sats/",t.lcZ(3,5,e.transactionsReportSummary.invoicesSelectedPeriod)," Invoices ")}}function zp(n,a){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,Hp,4,7,"div",9),t.YNc(2,Vp,4,7,"div",9),t.qZA()),2&n){const e=t.oxw();t.Q6J("@fadeIn",e.transactionsReportSummary),t.xp6(1),t.Q6J("ngIf",e.transactionsReportSummary.paymentsSelectedPeriod),t.xp6(1),t.Q6J("ngIf",e.transactionsReportSummary.invoicesSelectedPeriod)}}function Xp(n,a){1&n&&(t.TgZ(0,"div",11),t._uU(1,"No transactions report for the selected period"),t.qZA())}function Gp(n,a){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.qZA()),2&n){const e=a.model;t.xp6(1),t.HOy("",e.name,": ",t.xi3(2,4,e.value||0,"1.0-2"),"/# ","Paid"===e.name?"Payments":"Invoices",": ",t.lcZ(3,7,(null==e.extra?null:e.extra.total)||0),"")}}function Wp(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ngx-charts-bar-vertical-2d",12),t.NdJ("select",function(o){return t.CHM(e),t.oxw().onChartBarSelected(o)})("mouseup",function(o){return t.CHM(e),t.oxw().onChartMouseUp(o)}),t.YNc(1,Gp,4,9,"ng-template",null,13,t.W1O),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("view",e.view)("results",e.transactionsReportData)("noBarWhenZero",!1)("gradient",!1)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("showGridLines",!1)("showDataLabel",!1)("groupPadding",e.reportPeriod===e.scrollRanges[0]?2:4)}}function Kp(n,a){if(1&n&&t._UZ(0,"rtl-transactions-report-table",15),2&n){const e=t.oxw();t.Q6J("dataList",e.transactionsNonZeroReportData)("dataRange",e.reportPeriod)("filterValue",e.transactionFilterValue)}}let $p=(()=>{class n{constructor(e,i){this.commonService=e,this.store=i,this.scrollRanges=s.op,this.reportPeriod=s.op[0],this.secondsInADay=86400,this.payments=[],this.invoices=[],this.transactionsReportSummary={paymentsSelectedPeriod:0,invoicesSelectedPeriod:0,amountPaidSelectedPeriod:0,amountReceivedSelectedPeriod:0},this.transactionFilterValue="",this.today=new Date(Date.now()),this.startDate=new Date(this.today.getFullYear(),this.today.getMonth(),1,0,0,0),this.endDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.getMonthDays(this.today.getMonth(),this.today.getFullYear()),23,59,59),this.transactionsReportData=[],this.transactionsNonZeroReportData=[],this.view=[350,350],this.screenPaddingX=100,this.gradient=!0,this.xAxisLabel="Date",this.yAxisLabel="Amount (Sats)",this.showYAxisLabel=!0,this.screenSize="",this.screenSizeEnum=s.cu,this.unSubs=[new d.x,new d.x]}ngOnInit(){this.screenSize=this.commonService.getScreenSize(),this.showYAxisLabel=!(this.screenSize===s.cu.XS||this.screenSize===s.cu.SM),this.store.select(f.PP).pipe((0,_.R)(this.unSubs[0]),(0,at.M)(this.store.select(f.gc))).subscribe(([e,i])=>{this.payments=e.payments,this.invoices=i.listInvoices.invoices,this.transactionsReportData=this.filterTransactionsForSelectedPeriod(this.startDate,this.endDate),this.transactionsNonZeroReportData=this.prepareTableData()}),this.commonService.containerSizeUpdated.pipe((0,_.R)(this.unSubs[1])).subscribe(e=>{switch(this.screenSize){case s.cu.MD:this.screenPaddingX=e.width/10;break;case s.cu.LG:this.screenPaddingX=e.width/16;break;default:this.screenPaddingX=e.width/20}this.view=[e.width-this.screenPaddingX,e.height/2.2]})}onChartMouseUp(e){"svg"===e.srcElement.tagName&&e.srcElement.classList.length>0&&"ngx-charts"===e.srcElement.classList[0]&&(this.transactionFilterValue="")}onChartBarSelected(e){this.transactionFilterValue=this.reportPeriod===s.op[1]?e.series+"/"+this.startDate.getFullYear():e.series.toString().padStart(2,"0")+"/"+s.gg[this.startDate.getMonth()].name+"/"+this.startDate.getFullYear()}filterTransactionsForSelectedPeriod(e,i){const o=Math.round(e.getTime()/1e3),l=Math.round(i.getTime()/1e3),m=[];this.transactionsReportSummary={paymentsSelectedPeriod:0,invoicesSelectedPeriod:0,amountPaidSelectedPeriod:0,amountReceivedSelectedPeriod:0};const v=this.payments.filter(T=>"complete"===T.status&&T.created_at>=o&&T.created_at<l),J=this.invoices.filter(T=>"paid"===T.status&&T.paid_at>=o&&T.paid_at<l);if(this.transactionsReportSummary.paymentsSelectedPeriod=v.length,this.transactionsReportSummary.invoicesSelectedPeriod=J.length,this.reportPeriod===s.op[1]){for(let T=0;T<12;T++)m.push({name:s.gg[T].name,date:new Date(e.getFullYear(),T,1,0,0,0,0),series:[{name:"Paid",value:0,extra:{total:0}},{name:"Received",value:0,extra:{total:0}}]});v.map(T=>{const I=new Date(1e3*T.created_at).getMonth();return this.transactionsReportSummary.amountPaidSelectedPeriod=this.transactionsReportSummary.amountPaidSelectedPeriod+T.msatoshi_sent,m[I].series[0].value=m[I].series[0].value+T.msatoshi_sent/1e3,m[I].series[0].extra.total=m[I].series[0].extra.total+1,this.transactionsReportSummary}),J.map(T=>{const I=new Date(1e3*+T.paid_at).getMonth();return this.transactionsReportSummary.amountReceivedSelectedPeriod=this.transactionsReportSummary.amountReceivedSelectedPeriod+T.msatoshi_received,m[I].series[1].value=m[I].series[1].value+T.msatoshi_received/1e3,m[I].series[1].extra.total=m[I].series[1].extra.total+1,this.transactionsReportSummary})}else{for(let T=0;T<this.getMonthDays(e.getMonth(),e.getFullYear());T++)m.push({name:(T+1).toString(),date:new Date(1e3*(T*this.secondsInADay+o)),series:[{name:"Paid",value:0,extra:{total:0}},{name:"Received",value:0,extra:{total:0}}]});v.map(T=>{const I=Math.floor((+T.created_at-o)/this.secondsInADay);return this.transactionsReportSummary.amountPaidSelectedPeriod=this.transactionsReportSummary.amountPaidSelectedPeriod+T.msatoshi_sent,m[I].series[0].value=m[I].series[0].value+T.msatoshi_sent/1e3,m[I].series[0].extra.total=m[I].series[0].extra.total+1,this.transactionsReportSummary}),J.map(T=>{const I=Math.floor((+T.paid_at-o)/this.secondsInADay);return this.transactionsReportSummary.amountReceivedSelectedPeriod=this.transactionsReportSummary.amountReceivedSelectedPeriod+T.msatoshi_received,m[I].series[1].value=m[I].series[1].value+T.msatoshi_received/1e3,m[I].series[1].extra.total=m[I].series[1].extra.total+1,this.transactionsReportSummary})}return m}prepareTableData(){return this.transactionsReportData.reduce((e,i)=>i.series[0].extra.total>0||i.series[1].extra.total>0?e.concat({date:i.date,amount_paid:i.series[0].value,num_payments:i.series[0].extra.total,amount_received:i.series[1].value,num_invoices:i.series[1].extra.total}):e,[])}onSelectionChange(e){const i=e.selDate.getMonth(),o=e.selDate.getFullYear();this.reportPeriod=e.selScrollRange,this.reportPeriod===s.op[1]?(this.startDate=new Date(o,0,1,0,0,0),this.endDate=new Date(o,11,31,23,59,59)):(this.startDate=new Date(o,i,1,0,0,0),this.endDate=new Date(o,i,this.getMonthDays(i,o),23,59,59)),this.transactionsReportData=this.filterTransactionsForSelectedPeriod(this.startDate,this.endDate),this.transactionsNonZeroReportData=this.prepareTableData(),this.transactionFilterValue=""}getMonthDays(e,i){return 1===e&&i%4==0?s.gg[e].days+1:s.gg[e].days}ngOnDestroy(){this.unSubs.forEach(e=>{e.next(null),e.complete()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.v),t.Y36(b.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["rtl-cl-transactions-report"]],hostBindings:function(e,i){1&e&&t.NdJ("mouseup",function(l){return i.onChartMouseUp(l)})},decls:9,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start stretch","fxFlex","100",1,"padding-gap-x-large"],[3,"stepChanged"],["fxLayout","column","fxLayoutAlign","start stretch","fxFlex","100",1,"padding-gap-x"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100","class","font-size-120 font-bold-700 mt-1",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100","class","font-size-120 mt-1",4,"ngIf"],[1,"mt-1"],["class","two-color",3,"view","results","noBarWhenZero","gradient","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","showGridLines","showDataLabel","groupPadding","select","mouseup",4,"ngIf"],[3,"dataList","dataRange","filterValue",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100",1,"font-size-120","font-bold-700","mt-1"],["fxLayout","row","fxLayoutAlign","start stretch","fxFlex","100",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start stretch","fxFlex","100"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","100",1,"font-size-120","mt-1"],[1,"two-color",3,"view","results","noBarWhenZero","gradient","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","showGridLines","showDataLabel","groupPadding","select","mouseup"],["tooltipTemplate",""],[1,"tooltip-label"],[3,"dataList","dataRange","filterValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"rtl-horizontal-scroller",1),t.NdJ("stepChanged",function(l){return i.onSelectionChange(l)}),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,zp,3,3,"div",3),t.YNc(4,Xp,2,0,"div",4),t.TgZ(5,"div",5),t.YNc(6,Wp,3,13,"ngx-charts-bar-vertical-2d",6),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Kp,1,3,"rtl-transactions-report-table",7),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.transactionsNonZeroReportData.length>0),t.xp6(1),t.Q6J("ngIf",i.transactionsNonZeroReportData.length<=0),t.xp6(2),t.Q6J("ngIf",i.transactionsNonZeroReportData.length>0),t.xp6(2),t.Q6J("ngIf",i.transactionsNonZeroReportData.length>0))},directives:[p.xw,p.Wh,p.yH,Dt.D,u.O5,Jt.H5,Bp.g],pipes:[u.JJ],styles:[""],data:{animation:[Pt.J]}}),n})();var S=h(3894),jp=h(5704);const em=C.Bz.forChild([{path:"",component:gt,children:[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:Yi,canActivate:[S.lB]},{path:"onchain",component:ja,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"receive/utxos"},{path:"receive/:selTab",component:hs,canActivate:[S.lB]},{path:"send/:selTab",component:qt,data:{sweepAll:!1},canActivate:[S.lB]},{path:"sweep/:selTab",component:qt,data:{sweepAll:!0},canActivate:[S.lB]}]},{path:"connections",component:no,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"channels"},{path:"channels",component:Ps,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"open"},{path:"open",component:ql,canActivate:[S.lB]},{path:"pending",component:hr,canActivate:[S.lB]}]},{path:"peers",component:ic,data:{sweepAll:!1},canActivate:[S.lB]}]},{path:"transactions",component:ao,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"payments"},{path:"payments",component:vt,canActivate:[S.lB]},{path:"invoices",component:At,canActivate:[S.lB]},{path:"queryroutes",component:Sc,canActivate:[S.lB]}]},{path:"messages",component:ms,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"sign"},{path:"sign",component:qc,canActivate:[S.lB]},{path:"verify",component:Mc,canActivate:[S.lB]}]},{path:"routing",component:so,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"forwardinghistory"},{path:"forwardinghistory",component:Mt,canActivate:[S.lB]},{path:"failedtransactions",component:Du,canActivate:[S.lB]},{path:"routingpeers",component:Up,canActivate:[S.lB]}]},{path:"reports",component:Np,canActivate:[S.lB],children:[{path:"",pathMatch:"full",redirectTo:"routingfees"},{path:"routingfees",component:Yp,canActivate:[S.lB]},{path:"transactions",component:$p,canActivate:[S.lB]}]},{path:"lookups",component:Po,canActivate:[S.lB]},{path:"rates",component:us,canActivate:[S.lB]},{path:"**",component:jp.w},{path:"network",redirectTo:"rates"},{path:"wallet",redirectTo:"home"},{path:"backup",redirectTo:"home"}]}]);var nm=h(3387);let im=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n,bootstrap:[gt]}),n.\u0275inj=t.cJS({providers:[S.lB],imports:[[u.ez,nm.m,em]]}),n})()}}]);
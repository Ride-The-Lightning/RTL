(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{yziC:function(e,t,n){"use strict";n.r(t),n.d(t,"ECLRModule",(function(){return xn}));var a=n("Ip0R"),i=n("ZYCi"),o=n("CcnG"),c=n("UVSV");function s(e,t){1&e&&o.Rb(0,"mat-progress-bar",2)}function l(e,t){1&e&&o.Rb(0,"router-outlet")}var r=function(){function e(e){var t=this;this.router=e,this.loading=!1,this.router.events.subscribe((function(e){switch(!0){case e instanceof i.e:t.loading=!0;break;case e instanceof i.c:case e instanceof i.b:case e instanceof i.d:t.loading=!1}}))}return e.\u0275fac=function(t){return new(t||e)(o.Qb(i.f))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-root"]],decls:2,vars:2,consts:[["color","primary","mode","indeterminate",4,"ngIf"],[4,"ngIf"],["color","primary","mode","indeterminate"]],template:function(e,t){1&e&&(o.Fc(0,s,1,0,"mat-progress-bar",0),o.Fc(1,l,1,0,"router-outlet",1)),2&e&&(o.pc("ngIf",t.loading),o.Db(1),o.pc("ngIf",!t.loading))},directives:[a.n,c.a,i.k],styles:[""]}),e}(),b=n("K9Ia"),h=n("ny24"),d=n("VnD/"),u=n("twK/"),f=n("wHSu"),p=n("cpEJ"),m=n("7o2P"),g=n("7nzP"),y=n("HRYN"),v=n("yGQT"),C=n("jYNz"),w=n("21Lb"),V=n("Hf/j"),x=n("aPcS"),F=n("qLAh"),W=n("zPjY"),S=n("M4kG"),D=n("fPVg"),L=n("hUWP"),I=function(e){return{backgroundColor:e}};function O(e,t){if(1&e&&o.Rb(0,"span",6),2&e){var n=o.ic();o.pc("ngStyle",o.tc(1,I,n.information.color))}}function H(e,t){if(1&e&&(o.Wb(0,"div"),o.Wb(1,"h4",1),o.Hc(2,"Color"),o.Vb(),o.Wb(3,"div",2),o.Rb(4,"span",7),o.Hc(5),o.jc(6,"uppercase"),o.Vb(),o.Vb()),2&e){var n=o.ic();o.Db(4),o.pc("ngStyle",o.tc(4,I,n.information.color)),o.Db(1),o.Jc(" ",o.kc(6,2,n.information.color)," ")}}function A(e,t){if(1&e&&(o.Wb(0,"span",2),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Ic(n)}}var B=function(){function e(){this.chains=[""]}return e.prototype.ngOnChanges=function(){this.chains=[],this.chains.push("Bitcoin "+(this.information.network?this.information.network:"Testnet"))},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-node-info"]],inputs:{information:"information",showColorFieldSeparately:"showColorFieldSeparately"},features:[o.Bb],decls:17,vars:5,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],[1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["class","dashboard-node-dot dot",3,"ngStyle",4,"ngIf"],[4,"ngIf"],["class","overflow-wrap dashboard-info-value",4,"ngFor","ngForOf"],[1,"dashboard-node-dot","dot",3,"ngStyle"],[1,"dashboard-node-square",3,"ngStyle"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div"),o.Wb(2,"h4",1),o.Hc(3,"Alias"),o.Vb(),o.Wb(4,"div",2),o.Hc(5),o.Fc(6,O,1,3,"span",3),o.Vb(),o.Vb(),o.Fc(7,H,7,6,"div",4),o.Wb(8,"div"),o.Wb(9,"h4",1),o.Hc(10,"Implementation"),o.Vb(),o.Wb(11,"div",2),o.Hc(12),o.Vb(),o.Vb(),o.Wb(13,"div"),o.Wb(14,"h4",1),o.Hc(15,"Chain"),o.Vb(),o.Fc(16,A,2,1,"span",5),o.Vb(),o.Vb()),2&e&&(o.Db(5),o.Jc(" ",t.information.alias," "),o.Db(1),o.pc("ngIf",!t.showColorFieldSeparately),o.Db(1),o.pc("ngIf",t.showColorFieldSeparately),o.Db(5),o.Ic(t.information.lnImplementation||t.information.version?t.information.lnImplementation+" "+t.information.version:""),o.Db(4),o.pc("ngForOf",t.chains))},directives:[w.c,w.a,w.b,a.n,a.m,a.o,L.b],pipes:[a.x],styles:[""]}),e}(),k=function(){function e(){this.balances={onchain:0,lightning:0,total:0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-balances-info"]],inputs:{balances:"balances"},decls:21,vars:11,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],["mode","determinate",1,"dashboard-progress-bar",3,"value"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div"),o.Wb(2,"h4",1),o.Hc(3,"Lightning"),o.Vb(),o.Wb(4,"div",2),o.Hc(5),o.jc(6,"number"),o.Vb(),o.Rb(7,"mat-progress-bar",3),o.Vb(),o.Wb(8,"div"),o.Wb(9,"h4",1),o.Hc(10,"On-chain"),o.Vb(),o.Wb(11,"div",2),o.Hc(12),o.jc(13,"number"),o.Vb(),o.Rb(14,"mat-progress-bar",3),o.Vb(),o.Wb(15,"div"),o.Wb(16,"h4",1),o.Hc(17,"Total"),o.Vb(),o.Wb(18,"div",2),o.Hc(19),o.jc(20,"number"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(5),o.Jc("",o.kc(6,5,t.balances.lightning)," Sats"),o.Db(2),o.qc("value",t.balances.lightning/t.balances.total*100),o.Db(5),o.Jc("",o.kc(13,7,t.balances.onchain)," Sats"),o.Db(2),o.qc("value",t.balances.onchain/t.balances.total*100),o.Db(5),o.Jc("",o.kc(20,9,t.balances.total)," Sats"))},directives:[w.c,w.a,w.b,c.a],pipes:[a.e],styles:[""]}),e}(),R=n("dlst"),T=n("v/zR"),P=n("FZ+F"),M=n("bse0");function j(e,t){if(1&e&&(o.Wb(0,"div",17),o.Wb(1,"span",18),o.Hc(2),o.jc(3,"slice"),o.Vb(),o.Wb(4,"div",3),o.Wb(5,"mat-hint",19),o.Wb(6,"strong",5),o.Hc(7,"Local:"),o.Vb(),o.Hc(8),o.jc(9,"number"),o.Vb(),o.Wb(10,"mat-hint",20),o.Rb(11,"fa-icon",21),o.Hc(12),o.jc(13,"number"),o.Vb(),o.Wb(14,"mat-hint",22),o.Wb(15,"strong",5),o.Hc(16,"Remote:"),o.Vb(),o.Hc(17),o.jc(18,"number"),o.Vb(),o.Vb(),o.Rb(19,"mat-progress-bar",23),o.Vb()),2&e){var n=t.$implicit,a=o.ic(2);o.Db(1),o.qc("matTooltip",n.alias||n.shortChannelId),o.qc("matTooltipDisabled",(n.alias||n.shortChannelId).length<26),o.Db(1),o.Kc("",o.mc(3,9,n.alias||n.shortChannelId,0,24),"",(n.alias||n.shortChannelId).length>25?"...":"",""),o.Db(6),o.Jc("",o.lc(9,13,n.toLocal/1e3||0,"1.0-0")," Sats"),o.Db(3),o.pc("icon",a.faBalanceScale),o.Db(1),o.Jc(" (",o.kc(13,16,n.balancedness||0),") "),o.Db(5),o.Jc("",o.lc(18,18,n.toRemote/1e3||0,"1.0-0")," Sats"),o.Db(2),o.qc("value",n.toLocal&&n.toLocal>0?(n.toLocal-0)/(n.toLocal-0+(n.toRemote-0))*100:0)}}function E(e,t){if(1&e&&(o.Wb(0,"div",15),o.Fc(1,j,20,21,"div",16),o.Vb()),2&e){var n=o.ic();o.Db(1),o.pc("ngForOf",n.allChannels)}}function q(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Hc(1," No channels available. "),o.Wb(2,"button",25),o.ec("click",(function(){return o.yc(n),o.ic().goToChannels()})),o.Hc(3,"Open Channel"),o.Vb(),o.Vb()}}var z=function(){function e(e){this.router=e,this.faBalanceScale=f.d,this.faDumbbell=f.k,this.sortBy="Balance Score"}return e.prototype.goToChannels=function(){this.router.navigateByUrl("/eclr/peerschannels")},e.\u0275fac=function(t){return new(t||e)(o.Qb(i.f))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-channel-capacity-info"]],inputs:{channelBalances:"channelBalances",allChannels:"allChannels",sortBy:"sortBy"},decls:26,vars:15,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100"],["fxLayout","column","fxFlex","9","fxLayoutAlign","end start"],[1,"dashboard-capacity-header","this-channel-capacity"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-100"],["fxFlex","40","fxLayoutAlign","start center",1,"font-size-90"],[1,"font-weight-900","mr-5px"],["fxFlex","20","fxLayoutAlign","center center",1,"font-size-90"],["matTooltip","Balance Score",1,"mr-3px",3,"icon"],["fxFlex","40","fxLayoutAlign","end center",1,"font-size-90"],["mode","determinate","color","accent",1,"dashboard-progress-bar","this-channel-bar",3,"value"],["fxLayout","column","fxFlex","3","fxLayoutAlign","end stretch"],[1,"dashboard-divider"],["fxLayout","column","fxFlex.gt-sm","88","fxFlex","84","fxLayoutAlign","start start","perfectScrollbar","",1,"channels-capacity-scroll"],["fxLayout","column","fxFlex","100","class","w-100",4,"ngIf","ngIfElse"],["noChannelBlock",""],["fxLayout","column","fxFlex","100",1,"w-100"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"dashboard-capacity-header",3,"matTooltip","matTooltipDisabled"],["fxFlex","40","fxLayoutAlign","start center",1,"font-size-90","color-primary"],["fxFlex","20","fxLayoutAlign","center center",1,"font-size-90","color-primary"],["matTooltip","Balance Score",1,"color-primary","mr-3px",3,"icon"],["fxFlex","40","fxLayoutAlign","end center",1,"font-size-90","color-primary"],["mode","determinate",1,"dashboard-progress-bar",3,"value"],["fxLayout","row","fxFlex","10","fxLayoutAlign","space-between center",1,"w-100","mt-1"],["mat-stroked-button","","color","primary","tabindex","1",3,"click"]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"span",2),o.Hc(3,"Total Capacity"),o.Vb(),o.Wb(4,"div",3),o.Wb(5,"mat-hint",4),o.Wb(6,"strong",5),o.Hc(7,"Local:"),o.Vb(),o.Hc(8),o.jc(9,"number"),o.Vb(),o.Wb(10,"mat-hint",6),o.Rb(11,"fa-icon",7),o.Hc(12),o.jc(13,"number"),o.Vb(),o.Wb(14,"mat-hint",8),o.Wb(15,"strong",5),o.Hc(16,"Remote:"),o.Vb(),o.Hc(17),o.jc(18,"number"),o.Vb(),o.Vb(),o.Rb(19,"mat-progress-bar",9),o.Vb(),o.Wb(20,"div",10),o.Rb(21,"mat-divider",11),o.Vb(),o.Wb(22,"div",12),o.Fc(23,E,2,1,"div",13),o.Vb(),o.Vb(),o.Fc(24,q,4,0,"ng-template",null,14,o.Gc)),2&e){var n=o.wc(25);o.Db(8),o.Jc("",o.lc(9,7,t.channelBalances.localBalance||0,"1.0-0")," Sats"),o.Db(3),o.pc("icon",t.faBalanceScale),o.Db(1),o.Jc(" (",o.kc(13,10,t.channelBalances.balancedness||0),") "),o.Db(5),o.Jc("",o.lc(18,12,t.channelBalances.remoteBalance||0,"1.0-0")," Sats"),o.Db(2),o.qc("value",t.channelBalances.localBalance&&t.channelBalances.localBalance>0?(t.channelBalances.localBalance-0)/(t.channelBalances.localBalance-0+(t.channelBalances.remoteBalance-0))*100:0),o.Db(4),o.pc("ngIf",t.allChannels&&t.allChannels.length>0)("ngIfElse",n)}},directives:[w.c,w.b,w.a,R.f,V.a,T.a,c.a,P.a,M.b,a.n,a.m,S.a],pipes:[a.e,a.v],styles:[".channels-capacity-scroll[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}"]}),e}(),U=function(){function e(){this.totalFees=[{name:"Monthly",value:0},{name:"Weekly",value:0},{name:"Daily",value:0}],this.maxFeeValue=100}return e.prototype.ngOnChanges=function(){if(this.fees.monthly_fee){this.totalFees=[{name:"Monthly",value:this.fees.monthly_fee},{name:"Weekly",value:this.fees.weekly_fee},{name:"Daily ",value:this.fees.daily_fee}];var e=Math.ceil(Math.log(this.fees.monthly_fee+1)/Math.LN10),t=Math.pow(10,e-1);this.maxFeeValue=Math.ceil(this.fees.monthly_fee/t)*t/5||100,Object.assign(this,this.totalFees)}else this.totalFees=[{name:"Monthly",value:0},{name:"Weekly",value:0},{name:"Daily",value:0}],this.maxFeeValue=100,Object.assign(this,this.totalFees)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-fee-info"]],inputs:{fees:"fees"},features:[o.Bb],decls:38,vars:18,consts:[["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div"),o.Wb(2,"h4",1),o.Hc(3,"Daily"),o.Vb(),o.Wb(4,"div",2),o.Hc(5),o.jc(6,"number"),o.Vb(),o.Vb(),o.Wb(7,"div"),o.Wb(8,"h4",1),o.Hc(9,"Weekly"),o.Vb(),o.Wb(10,"div",2),o.Hc(11),o.jc(12,"number"),o.Vb(),o.Vb(),o.Wb(13,"div"),o.Wb(14,"h4",1),o.Hc(15,"Monthly"),o.Vb(),o.Wb(16,"div",2),o.Hc(17),o.jc(18,"number"),o.Vb(),o.Vb(),o.Vb(),o.Wb(19,"div",0),o.Wb(20,"div"),o.Wb(21,"h4",1),o.Hc(22,"Transactions"),o.Vb(),o.Wb(23,"div",2),o.Hc(24),o.jc(25,"number"),o.Vb(),o.Vb(),o.Wb(26,"div"),o.Wb(27,"h4",1),o.Hc(28,"Transactions"),o.Vb(),o.Wb(29,"div",2),o.Hc(30),o.jc(31,"number"),o.Vb(),o.Vb(),o.Wb(32,"div"),o.Wb(33,"h4",1),o.Hc(34,"Transactions"),o.Vb(),o.Wb(35,"div",2),o.Hc(36),o.jc(37,"number"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(5),o.Jc("",o.kc(6,6,null==t.fees?null:t.fees.daily_fee)," Sats"),o.Db(6),o.Jc("",o.kc(12,8,null==t.fees?null:t.fees.weekly_fee)," Sats"),o.Db(6),o.Jc("",o.kc(18,10,null==t.fees?null:t.fees.monthly_fee)," Sats"),o.Db(7),o.Ic(o.kc(25,12,null==t.fees?null:t.fees.daily_txs)),o.Db(6),o.Ic(o.kc(31,14,null==t.fees?null:t.fees.weekly_txs)),o.Db(6),o.Ic(o.kc(37,16,null==t.fees?null:t.fees.monthly_txs)))},directives:[w.c,w.a,w.b],pipes:[a.e],styles:[""]}),e}(),N=function(){function e(){this.channelsStatus={}}return e.prototype.ngOnChanges=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-channel-status-info"]],inputs:{channelsStatus:"channelsStatus"},features:[o.Bb],decls:41,vars:18,consts:[["fxLayout","column","fxFlex","50","fxLayoutAlign","space-between stretch"],["fxLayoutAlign","start",1,"dashboard-info-title"],[1,"overflow-wrap","dashboard-info-value"],[1,"dot","tiny-dot","green"],[1,"dot","tiny-dot","yellow"],[1,"dot","tiny-dot","grey"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div"),o.Wb(2,"h4",1),o.Hc(3,"Active"),o.Vb(),o.Wb(4,"div",2),o.Rb(5,"span",3),o.Hc(6),o.jc(7,"number"),o.Vb(),o.Vb(),o.Wb(8,"div"),o.Wb(9,"h4",1),o.Hc(10,"Pending"),o.Vb(),o.Wb(11,"div",2),o.Rb(12,"span",4),o.Hc(13),o.jc(14,"number"),o.Vb(),o.Vb(),o.Wb(15,"div"),o.Wb(16,"h4",1),o.Hc(17,"Inactive"),o.Vb(),o.Wb(18,"div",2),o.Rb(19,"span",5),o.Hc(20),o.jc(21,"number"),o.Vb(),o.Vb(),o.Vb(),o.Wb(22,"div",0),o.Wb(23,"div"),o.Wb(24,"h4",1),o.Hc(25,"Capacity"),o.Vb(),o.Wb(26,"div",2),o.Hc(27),o.jc(28,"number"),o.Vb(),o.Vb(),o.Wb(29,"div"),o.Wb(30,"h4",1),o.Hc(31,"Capacity"),o.Vb(),o.Wb(32,"div",2),o.Hc(33),o.jc(34,"number"),o.Vb(),o.Vb(),o.Wb(35,"div"),o.Wb(36,"h4",1),o.Hc(37,"Capacity"),o.Vb(),o.Wb(38,"div",2),o.Hc(39),o.jc(40,"number"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(6),o.Ic(o.kc(7,6,(null==t.channelsStatus.active?null:t.channelsStatus.active.channels)||0)),o.Db(7),o.Ic(o.kc(14,8,(null==t.channelsStatus.pending?null:t.channelsStatus.pending.channels)||0)),o.Db(7),o.Ic(o.kc(21,10,(null==t.channelsStatus.inactive?null:t.channelsStatus.inactive.channels)||0)),o.Db(7),o.Jc("",o.kc(28,12,(null==t.channelsStatus.active?null:t.channelsStatus.active.capacity)||0)," Sats"),o.Db(6),o.Jc("",o.kc(34,14,(null==t.channelsStatus.pending?null:t.channelsStatus.pending.capacity)||0)," Sats"),o.Db(6),o.Jc("",o.kc(40,16,(null==t.channelsStatus.inactive?null:t.channelsStatus.inactive.capacity)||0)," Sats"))},directives:[w.c,w.a,w.b],pipes:[a.e],styles:[""]}),e}();function Q(e,t){if(1&e&&(o.Wb(0,"mat-hint",17),o.Wb(1,"strong",18),o.Hc(2,"Capacity: "),o.Vb(),o.Hc(3),o.jc(4,"number"),o.Vb()),2&e){var n=o.ic().$implicit;o.Db(3),o.Jc("",o.lc(4,1,n.toRemote/1e3||0,"1.0-0")," Sats")}}function _(e,t){if(1&e&&(o.Wb(0,"mat-hint",17),o.Wb(1,"strong",18),o.Hc(2,"Capacity: "),o.Vb(),o.Hc(3),o.jc(4,"number"),o.Vb()),2&e){var n=o.ic().$implicit;o.Db(3),o.Jc("",o.lc(4,1,n.toLocal/1e3||0,"1.0-0")," Sats")}}function G(e,t){if(1&e&&o.Rb(0,"mat-progress-bar",19),2&e){var n=o.ic().$implicit,a=o.ic(2);o.qc("value",a.totalLiquidity>0?((n.toRemote-0)/1e3||0)/a.totalLiquidity*100:0)}}function J(e,t){if(1&e&&o.Rb(0,"mat-progress-bar",19),2&e){var n=o.ic().$implicit,a=o.ic(2);o.qc("value",a.totalLiquidity>0?((n.toLocal-0)/1e3||0)/a.totalLiquidity*100:0)}}function $(e,t){if(1&e&&(o.Wb(0,"div",12),o.Wb(1,"span",13),o.Hc(2),o.jc(3,"slice"),o.Vb(),o.Wb(4,"div",14),o.Fc(5,Q,5,4,"mat-hint",15),o.Fc(6,_,5,4,"mat-hint",15),o.Vb(),o.Fc(7,G,1,1,"mat-progress-bar",16),o.Fc(8,J,1,1,"mat-progress-bar",16),o.Vb()),2&e){var n=t.$implicit,a=o.ic(2);o.Db(1),o.qc("matTooltip",n.alias||n.shortChannelId),o.qc("matTooltipDisabled",(n.alias||n.shortChannelId).length<26),o.Db(1),o.Kc("",o.mc(3,8,n.alias||n.shortChannelId,0,24),"",(n.alias||n.shortChannelId).length>25?"...":"",""),o.Db(3),o.pc("ngIf","In"===a.direction),o.Db(1),o.pc("ngIf","Out"===a.direction),o.Db(1),o.pc("ngIf","In"===a.direction),o.Db(1),o.pc("ngIf","Out"===a.direction)}}function K(e,t){if(1&e&&(o.Wb(0,"div",10),o.Fc(1,$,9,12,"div",11),o.Vb()),2&e){var n=o.ic();o.Db(1),o.pc("ngForOf",n.allChannels)}}function X(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",22),o.ec("click",(function(){return o.yc(n),o.ic(2).goToChannels()})),o.Hc(1,"Open Channel"),o.Vb()}}function Y(e,t){if(1&e&&(o.Wb(0,"div",20),o.Hc(1," No channels available. "),o.Fc(2,X,2,0,"button",21),o.Vb()),2&e){var n=o.ic();o.Db(2),o.pc("ngIf","Out"===n.direction)}}var Z=function(){function e(e){this.router=e}return e.prototype.goToChannels=function(){this.router.navigateByUrl("/eclr/peerschannels")},e.\u0275fac=function(t){return new(t||e)(o.Qb(i.f))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-channel-liquidity-info"]],inputs:{direction:"direction",totalLiquidity:"totalLiquidity",allChannels:"allChannels"},decls:14,vars:6,consts:[["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","100"],["fxLayout","column","fxFlex","9","fxLayoutAlign","end start"],[1,"dashboard-capacity-header","this-channel-capacity"],[1,"font-size-90"],["mode","determinate","color","accent","value","100",1,"dashboard-progress-bar","this-channel-bar"],["fxLayout","column","fxFlex","3","fxLayoutAlign","end stretch"],[1,"dashboard-divider"],["fxLayout","column","fxFlex.gt-sm","88","fxFlex","84","fxLayoutAlign","start start","perfectScrollbar","",1,"channels-capacity-scroll"],["fxLayout","column","fxFlex","100","class","w-100",4,"ngIf","ngIfElse"],["noChannelBlock",""],["fxLayout","column","fxFlex","100",1,"w-100"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"dashboard-capacity-header",3,"matTooltip","matTooltipDisabled"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-100"],["fxFlex","100","fxLayoutAlign","start center","class","font-size-90 color-primary",4,"ngIf"],["class","dashboard-progress-bar","mode","determinate",3,"value",4,"ngIf"],["fxFlex","100","fxLayoutAlign","start center",1,"font-size-90","color-primary"],[1,"font-weight-900","mr-5px"],["mode","determinate",1,"dashboard-progress-bar",3,"value"],["fxLayout","row","fxFlex","10","fxLayoutAlign","space-between center",1,"w-100","mt-1"],["mat-stroked-button","","color","primary","tabindex","1",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","tabindex","1",3,"click"]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"span",2),o.Hc(3,"Total Capacity"),o.Vb(),o.Wb(4,"mat-hint",3),o.Hc(5),o.jc(6,"number"),o.Vb(),o.Rb(7,"mat-progress-bar",4),o.Vb(),o.Wb(8,"div",5),o.Rb(9,"mat-divider",6),o.Vb(),o.Wb(10,"div",7),o.Fc(11,K,2,1,"div",8),o.Vb(),o.Vb(),o.Fc(12,Y,3,1,"ng-template",null,9,o.Gc)),2&e){var n=o.wc(13);o.Db(5),o.Jc("",o.lc(6,3,t.totalLiquidity,"1.0-0")," Sats"),o.Db(6),o.pc("ngIf",t.allChannels&&t.allChannels.length>0)("ngIfElse",n)}},directives:[w.c,w.b,w.a,R.f,c.a,P.a,M.b,a.n,a.m,T.a,S.a],pipes:[a.e,a.v],styles:[""]}),e}(),ee=n("VkXI");function te(e,t){if(1&e&&(o.Wb(0,"button",24),o.Wb(1,"mat-icon"),o.Hc(2,"more_vert"),o.Vb(),o.Vb()),2&e){o.ic();var n=o.wc(9);o.pc("matMenuTriggerFor",n)}}function ne(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",14),o.ec("click",(function(){return o.yc(n),o.ic(3).onsortChannelsBy()})),o.Hc(1),o.Vb()}if(2&e){var a=o.ic(3);o.Db(1),o.Jc("Sort By ","Balance Score"===a.sortField?"Capacity":"Balance Score","")}}var ae=function(e){return{"error-border":e}};function ie(e,t){if(1&e&&o.Rb(0,"rtl-eclr-node-info",25),2&e){var n=o.ic(3);o.pc("information",n.information)("showColorFieldSeparately",!1)("ngClass",o.tc(3,ae,"error"===n.flgLoading[0]))}}function oe(e,t){if(1&e&&o.Rb(0,"rtl-eclr-balances-info",26),2&e){var n=o.ic(3);o.pc("balances",n.balances)("ngClass",o.tc(2,ae,"error"===n.flgLoading[2]))}}function ce(e,t){if(1&e&&o.Rb(0,"rtl-eclr-channel-capacity-info",27),2&e){var n=o.ic(3);o.pc("sortBy",n.sortField)("channelBalances",n.channelBalances)("allChannels",n.allChannelsCapacity)("ngClass",o.tc(4,ae,"error"===n.flgLoading[5]))}}function se(e,t){if(1&e&&o.Rb(0,"rtl-eclr-fee-info",28),2&e){var n=o.ic(3);o.pc("fees",n.fees)("ngClass",o.tc(2,ae,"error"===n.flgLoading[1]))}}function le(e,t){if(1&e&&o.Rb(0,"rtl-eclr-channel-status-info",29),2&e){var n=o.ic(3);o.pc("channelsStatus",n.channelsStatus)("ngClass",o.tc(2,ae,"error"===n.flgLoading[0]))}}function re(e,t){1&e&&(o.Wb(0,"h3"),o.Hc(1,"Error! Unable to find information!"),o.Vb())}function be(e,t){if(1&e){var n=o.Xb();o.Wb(0,"mat-grid-tile",8),o.Wb(1,"mat-card",9),o.Wb(2,"mat-card-header"),o.Wb(3,"mat-card-title"),o.Rb(4,"fa-icon",10),o.Wb(5,"span"),o.Hc(6),o.Vb(),o.Fc(7,te,3,1,"button",11),o.Wb(8,"mat-menu",12,13),o.Wb(10,"button",14),o.ec("click",(function(){o.yc(n);var e=t.$implicit;return o.ic(2).onNavigateTo(e.link)})),o.Hc(11),o.Vb(),o.Fc(12,ne,2,1,"button",15),o.Vb(),o.Vb(),o.Vb(),o.Wb(13,"mat-card-content",16),o.Wb(14,"div",17),o.Fc(15,ie,1,5,"rtl-eclr-node-info",18),o.Fc(16,oe,1,4,"rtl-eclr-balances-info",19),o.Fc(17,ce,1,6,"rtl-eclr-channel-capacity-info",20),o.Fc(18,se,1,4,"rtl-eclr-fee-info",21),o.Fc(19,le,1,4,"rtl-eclr-channel-status-info",22),o.Fc(20,re,2,0,"h3",23),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var a=t.$implicit;o.pc("colspan",a.cols)("rowspan",a.rows),o.Db(4),o.pc("icon",a.icon),o.Db(2),o.Ic(a.title),o.Db(1),o.pc("ngIf",a.link),o.Db(4),o.Jc("Go To ",a.goTo,""),o.Db(1),o.pc("ngIf","capacity"===a.id),o.Db(2),o.pc("ngSwitch",a.id),o.Db(1),o.pc("ngSwitchCase","node"),o.Db(1),o.pc("ngSwitchCase","balance"),o.Db(1),o.pc("ngSwitchCase","capacity"),o.Db(1),o.pc("ngSwitchCase","fee"),o.Db(1),o.pc("ngSwitchCase","status")}}function he(e,t){if(1&e&&(o.Wb(0,"div",2),o.Wb(1,"div",3),o.Rb(2,"fa-icon",4),o.Wb(3,"span",5),o.Hc(4),o.Vb(),o.Vb(),o.Wb(5,"mat-grid-list",6),o.Fc(6,be,21,13,"mat-grid-tile",7),o.Vb(),o.Vb()),2&e){var n=o.ic();o.Db(2),o.pc("icon",n.flgLoading[0]?n.faFrown:n.faSmile),o.Db(2),o.Ic(n.flgLoading[0]?"Error! Please check the server connection.":"Welcome! Your node is up and running."),o.Db(1),o.pc("rowHeight",n.operatorCardHeight),o.Db(1),o.pc("ngForOf",n.operatorCards)}}function de(e,t){if(1&e&&(o.Wb(0,"button",24),o.Wb(1,"mat-icon"),o.Hc(2,"more_vert"),o.Vb(),o.Vb()),2&e){o.ic();var n=o.wc(7);o.pc("matMenuTriggerFor",n)}}function ue(e,t){if(1&e){var n=o.Xb();o.Wb(0,"mat-card-header"),o.Wb(1,"mat-card-title"),o.Rb(2,"fa-icon",10),o.Wb(3,"span"),o.Hc(4),o.Vb(),o.Fc(5,de,3,1,"button",11),o.Wb(6,"mat-menu",12,37),o.Wb(8,"button",14),o.ec("click",(function(){o.yc(n);var e=o.ic().$implicit;return o.ic(2).onNavigateTo(e.link)})),o.Hc(9),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var a=o.ic().$implicit;o.Db(2),o.pc("icon",a.icon),o.Db(2),o.Ic(a.title),o.Db(1),o.pc("ngIf",a.link),o.Db(4),o.Jc("Go To ",a.goTo,"")}}function fe(e,t){if(1&e&&o.Rb(0,"rtl-eclr-node-info",38),2&e){var n=o.ic(3);o.pc("information",n.information)("ngClass",o.tc(2,ae,"error"===n.flgLoading[0]))}}function pe(e,t){if(1&e&&o.Rb(0,"rtl-eclr-balances-info",26),2&e){var n=o.ic(3);o.pc("balances",n.balances)("ngClass",o.tc(2,ae,"error"===n.flgLoading[2]))}}function me(e,t){if(1&e&&o.Rb(0,"rtl-eclr-channel-liquidity-info",39),2&e){var n=o.ic(3);o.pc("direction","In")("totalLiquidity",n.totalInboundLiquidity)("allChannels",n.allInboundChannels)("ngClass",o.tc(4,ae,"error"===n.flgLoading[5]))}}function ge(e,t){if(1&e&&o.Rb(0,"rtl-eclr-channel-liquidity-info",39),2&e){var n=o.ic(3);o.pc("direction","Out")("totalLiquidity",n.totalOutboundLiquidity)("allChannels",n.allOutboundChannels)("ngClass",o.tc(4,ae,"error"===n.flgLoading[5]))}}function ye(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",46),o.Wb(1,"mat-icon"),o.Hc(2,"more_vert"),o.Vb(),o.Vb(),o.Wb(3,"mat-menu",12,47),o.Wb(5,"button",14),o.ec("click",(function(){o.yc(n);var e=o.ic(2).$implicit;return o.ic(2).onNavigateTo(e.link)})),o.Hc(6),o.Vb(),o.Vb()}if(2&e){var a=o.wc(4),i=o.ic(2).$implicit;o.pc("matMenuTriggerFor",a),o.Db(6),o.Jc("Go To ",i.goTo,"")}}function ve(e,t){1&e&&(o.Wb(0,"span",40),o.Wb(1,"mat-tab-group",41),o.Rb(2,"mat-tab",42),o.Rb(3,"mat-tab",43),o.Wb(4,"mat-tab",44),o.Fc(5,ye,7,2,"ng-template",45),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(4),o.pc("disabled",!0))}function Ce(e,t){1&e&&(o.Wb(0,"h3"),o.Hc(1,"Error! Unable to find information!"),o.Vb())}var we=function(e){return{"p-24":e}};function Ve(e,t){if(1&e&&(o.Wb(0,"mat-grid-tile",8),o.Wb(1,"mat-card",31),o.Fc(2,ue,10,4,"mat-card-header",32),o.Wb(3,"mat-card-content",33),o.Wb(4,"div",17),o.Fc(5,fe,1,4,"rtl-eclr-node-info",34),o.Fc(6,pe,1,4,"rtl-eclr-balances-info",19),o.Fc(7,me,1,6,"rtl-eclr-channel-liquidity-info",35),o.Fc(8,ge,1,6,"rtl-eclr-channel-liquidity-info",35),o.Fc(9,ve,6,1,"span",36),o.Fc(10,Ce,2,0,"h3",23),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e){var n=t.$implicit;o.pc("colspan",n.cols)("rowspan",n.rows),o.Db(1),o.pc("ngClass",o.tc(11,we,"transactions"!==n.id)),o.Db(1),o.pc("ngIf","transactions"!==n.id),o.Db(1),o.qc("fxFlex","transactions"!==n.id?95:100),o.Db(1),o.pc("ngSwitch",n.id),o.Db(1),o.pc("ngSwitchCase","node"),o.Db(1),o.pc("ngSwitchCase","balance"),o.Db(1),o.pc("ngSwitchCase","inboundLiq"),o.Db(1),o.pc("ngSwitchCase","outboundLiq"),o.Db(1),o.pc("ngSwitchCase","transactions")}}function xe(e,t){if(1&e&&(o.Wb(0,"div",3),o.Rb(1,"fa-icon",4),o.Wb(2,"span",5),o.Hc(3,"Welcome! Your node is up and running."),o.Vb(),o.Vb(),o.Wb(4,"mat-grid-list",30),o.Fc(5,Ve,11,13,"mat-grid-tile",7),o.Vb()),2&e){var n=o.ic();o.Db(1),o.pc("icon",n.faSmile),o.Db(3),o.pc("rowHeight",n.merchantCardHeight),o.Db(1),o.pc("ngForOf",n.merchantCards)}}var Fe=function(){function e(e,t,n,a,i){this.logger=e,this.store=t,this.actions$=n,this.commonService=a,this.router=i,this.faSmile=u.b,this.faFrown=u.a,this.faAngleDoubleDown=f.a,this.faAngleDoubleUp=f.b,this.faChartPie=f.f,this.faBolt=f.e,this.faServer=f.D,this.faNetworkWired=f.v,this.flgChildInfoUpdated=!1,this.userPersonaEnum=g.u,this.channelBalances={localBalance:0,remoteBalance:0,balancedness:"0"},this.selNode={},this.information={},this.channels=[],this.channelStats=[],this.onchainBalance={},this.balances={onchain:-1,lightning:-1,total:0},this.channelsStatus={},this.allChannelsCapacity=[],this.allInboundChannels=[],this.allOutboundChannels=[],this.totalInboundLiquidity=0,this.totalOutboundLiquidity=0,this.operatorCards=[],this.merchantCards=[],this.screenSize="",this.operatorCardHeight="330px",this.merchantCardHeight="65px",this.sortField="Balance Score",this.flgLoading=[!0,!0,!0,!0,!0,!0,!0,!0],this.unSubs=[new b.a,new b.a,new b.a],this.screenSize=this.commonService.getScreenSize(),this.screenSize===g.o.XS?(this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:10,rows:1},{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:10,rows:1},{id:"fee",goTo:"Routing",link:"/eclr/routing",icon:this.faBolt,title:"Routing Fee",cols:10,rows:1},{id:"status",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels",cols:10,rows:1},{id:"capacity",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels Capacity",cols:10,rows:2}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:6,rows:4},{id:"transactions",goTo:"Transactions",link:"/eclr/transactions",title:"",cols:6,rows:4},{id:"inboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:6,rows:8},{id:"outboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:6,rows:8}]):this.screenSize===g.o.SM||this.screenSize===g.o.MD?(this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:5,rows:1},{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:5,rows:1},{id:"fee",goTo:"Routing",link:"/eclr/routing",icon:this.faBolt,title:"Routing Fee",cols:5,rows:1},{id:"status",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels",cols:5,rows:1},{id:"capacity",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels Capacity",cols:10,rows:2}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:3,rows:4},{id:"transactions",goTo:"Transactions",link:"/eclr/transactions",title:"",cols:3,rows:4},{id:"inboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:3,rows:8},{id:"outboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:3,rows:8}]):(this.operatorCardHeight=(window.screen.height-200)/2+"px",this.merchantCardHeight=(window.screen.height-210)/10+"px",this.operatorCards=[{id:"node",icon:this.faServer,title:"Node Information",cols:3,rows:1},{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:3,rows:1},{id:"capacity",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels Capacity",cols:4,rows:2},{id:"fee",goTo:"Routing",link:"/eclr/routing",icon:this.faBolt,title:"Routing Fee",cols:3,rows:1},{id:"status",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faNetworkWired,title:"Channels",cols:3,rows:1}],this.merchantCards=[{id:"balance",goTo:"On-Chain",link:"/eclr/onchain",icon:this.faChartPie,title:"Balances",cols:2,rows:5},{id:"inboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleDown,title:"In-Bound Liquidity",cols:2,rows:10},{id:"outboundLiq",goTo:"Channels",link:"/eclr/peerschannels",icon:this.faAngleDoubleUp,title:"Out-Bound Liquidity",cols:2,rows:10},{id:"transactions",goTo:"Transactions",link:"/eclr/transactions",title:"",cols:2,rows:5}])}return e.prototype.ngOnInit=function(){var e=this;this.store.select("eclr").pipe(Object(h.a)(this.unSubs[1])).subscribe((function(t){e.flgLoading=[!0,!0,!0,!0,!0,!0,!0,!0],t.effectErrors.forEach((function(t){"FetchInfo"===t.action&&(e.flgLoading[0]="error"),"FetchFees"===t.action&&(e.flgLoading[1]="error"),"FetchChannels"===t.action&&(e.flgLoading[2]="error"),"FetchChannelStats"===t.action&&(e.flgLoading[3]="error")})),e.selNode=t.nodeSettings,e.information=t.information,"error"!==e.flgLoading[0]&&(e.flgLoading[0]=!e.information.nodeId),e.fees=t.fees,"error"!==e.flgLoading[1]&&(e.flgLoading[1]=!e.fees.daily_fee),e.channels=t.activeChannels,e.onchainBalance=t.onchainBalance,e.balances.onchain=e.onchainBalance.totalBalance,e.balances.lightning=t.lightningBalance.localBalance,e.balances.total=e.balances.lightning+e.balances.onchain,e.balances=Object.assign({},e.balances);var n=t.lightningBalance.localBalance?+t.lightningBalance.localBalance:0,a=t.lightningBalance.remoteBalance?+t.lightningBalance.remoteBalance:0;e.channelBalances={localBalance:n,remoteBalance:a,balancedness:(1-Math.abs((n-a)/(n+a))).toFixed(3)},e.channelsStatus=t.channelsStatus,e.totalInboundLiquidity=0,e.totalOutboundLiquidity=0,e.allChannelsCapacity=JSON.parse(JSON.stringify(e.commonService.sortDescByKey(e.channels,"balancedness"))),e.allInboundChannels=JSON.parse(JSON.stringify(e.commonService.sortDescByKey(e.channels.filter((function(e){return e.toRemote>0})),"toRemote"))),e.allOutboundChannels=JSON.parse(JSON.stringify(e.commonService.sortDescByKey(e.channels.filter((function(e){return e.toLocal>0})),"toLocal"))),e.channels.forEach((function(t){e.totalInboundLiquidity=e.totalInboundLiquidity+Math.ceil(t.toRemote/1e3),e.totalOutboundLiquidity=e.totalOutboundLiquidity+Math.floor(t.toLocal/1e3)})),"error"!==e.flgLoading[2]&&(e.flgLoading[2]=!e.channels),e.channelStats=t.channelStats,"error"!==e.flgLoading[3]&&(e.flgLoading[3]=!e.channelStats),e.flgChildInfoUpdated=e.balances.lightning>=0&&e.balances.onchain>=0&&e.fees.monthly_fee>=0,e.logger.info(t)})),this.actions$.pipe(Object(h.a)(this.unSubs[2]),Object(d.a)((function(e){return e.type===y.k||e.type===y.H}))).subscribe((function(t){t.type===y.k&&(e.flgChildInfoUpdated=!1),t.type===y.H&&(e.flgChildInfoUpdated=!0)}))},e.prototype.onNavigateTo=function(e){this.router.navigateByUrl(e)},e.prototype.onsortChannelsBy=function(){"Balance Score"===this.sortField?(this.sortField="Capacity",this.allChannelsCapacity=this.channels.sort((function(e,t){var n=+e.toLocal+ +e.toRemote,a=+t.toLocal+ +t.toRemote;return n>a?-1:n<a?1:0}))):(this.sortField="Balance Score",this.allChannelsCapacity=JSON.parse(JSON.stringify(this.commonService.sortDescByKey(this.channels,"balancedness"))))},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(p.b),o.Qb(v.h),o.Qb(C.a),o.Qb(m.a),o.Qb(i.f))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-home"]],decls:3,vars:2,consts:[["fxLayout","column",4,"ngIf","ngIfElse"],["merchantDashboard",""],["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start end",1,"padding-gap-x","page-title-container","mb-0"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["cols","10",3,"rowHeight"],[3,"colspan","rowspan",4,"ngFor","ngForOf"],[3,"colspan","rowspan"],["fxLayout","column","fxLayoutAlign","start start",1,"dashboard-card","p-24"],[1,"mr-1",3,"icon"],["mat-icon-button","","class","more-button mt-1","aria-label","Toggle menu",3,"matMenuTriggerFor",4,"ngIf"],["xPosition","before",1,"dashboard-vert-menu"],["menuOperator","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["fxFlex","95",1,"dashboard-card-content","w-100"],["fxLayout","column","fxFlex","100",3,"ngSwitch"],["fxFlex","100",3,"information","showColorFieldSeparately","ngClass",4,"ngSwitchCase"],["fxFlex","100",3,"balances","ngClass",4,"ngSwitchCase"],["fxFlex","100",3,"sortBy","channelBalances","allChannels","ngClass",4,"ngSwitchCase"],["fxFlex","100",3,"fees","ngClass",4,"ngSwitchCase"],["fxFlex","100",3,"channelsStatus","ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mat-icon-button","","aria-label","Toggle menu",1,"more-button","mt-1",3,"matMenuTriggerFor"],["fxFlex","100",3,"information","showColorFieldSeparately","ngClass"],["fxFlex","100",3,"balances","ngClass"],["fxFlex","100",3,"sortBy","channelBalances","allChannels","ngClass"],["fxFlex","100",3,"fees","ngClass"],["fxFlex","100",3,"channelsStatus","ngClass"],["cols","6",3,"rowHeight"],["fxLayout","column","fxLayoutAlign","start start",1,"dashboard-card",3,"ngClass"],[4,"ngIf"],[1,"dashboard-card-content","w-100",3,"fxFlex"],["fxFlex","100",3,"information","ngClass",4,"ngSwitchCase"],["fxFlex","100",3,"direction","totalLiquidity","allChannels","ngClass",4,"ngSwitchCase"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between start",4,"ngSwitchCase"],["menuMerchant","matMenu"],["fxFlex","100",3,"information","ngClass"],["fxFlex","100",3,"direction","totalLiquidity","allChannels","ngClass"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between start"],["fxLayout","column",1,"w-100","dashboard-tabs-group"],["label","Receive"],["label","Pay"],[3,"disabled"],["mat-tab-label",""],["mat-icon-button","","aria-label","Toggle menu",1,"more-button",2,"max-width","20px",3,"matMenuTriggerFor"],["menuTransactions","matMenu"]],template:function(e,t){if(1&e&&(o.Fc(0,he,7,4,"div",0),o.Fc(1,xe,6,3,"ng-template",null,1,o.Gc)),2&e){var n=o.wc(2);o.pc("ngIf",t.selNode.userPersona===t.userPersonaEnum.OPERATOR)("ngIfElse",n)}},directives:[a.n,w.c,w.b,V.a,x.a,a.m,x.c,F.a,F.c,F.f,W.d,W.a,F.b,w.a,a.p,a.q,a.r,S.a,W.c,D.a,B,a.l,L.a,k,z,U,N,Z,ee.c,ee.a,ee.d],styles:[".dashboard-card[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;right:1rem;bottom:1rem}.more-button[_ngcontent-%COMP%]{position:absolute;top:7px;right:7px}.dashboard-card-content[_ngcontent-%COMP%]{text-align:left}"]}),e}(),We=n("/uX3"),Se=n("4lrr"),De=["form"],Le=function(){function e(e,t,n,a,i,o){this.dialogRef=e,this.logger=t,this.store=n,this.commonService=a,this.decimalPipe=i,this.actions$=o,this.faExclamationTriangle=f.n,this.selNode={},this.addressTypes=[],this.flgLoadingWallet=!0,this.selectedAddress=g.a[1],this.blockchainBalance={},this.information={},this.newAddress="",this.transaction={},this.feeRateTypes=g.j,this.flgMinConf=!1,this.sendFundError="",this.fiatConversion=!1,this.amountUnits=g.e,this.selAmountUnit=g.e[0],this.currConvertorRate={},this.unitConversionValue=0,this.currencyUnitFormats=g.f,this.unSubs=[new b.a,new b.a,new b.a,new b.a,new b.a]}return e.prototype.ngOnInit=function(){var e=this;this.store.select("root").pipe(Object(h.a)(this.unSubs[0])).subscribe((function(t){e.fiatConversion=t.selNode.settings.fiatConversion,e.amountUnits=t.selNode.settings.currencyUnits,e.appConfig=t.appConfig,e.nodeData=t.nodeData,e.logger.info(t)}))},e.prototype.onSendFunds=function(){if(this.invalidValues)return!0;this.sendFundError="",this.store.dispatch(new We.D("Sending Funds..."))},Object.defineProperty(e.prototype,"invalidValues",{get:function(){return!this.transaction.address||""===this.transaction.address||!this.transaction.satoshis||this.transaction.satoshis<=0||this.flgMinConf&&(!this.transaction.minconf||this.transaction.minconf<=0)},enumerable:!0,configurable:!0}),e.prototype.resetData=function(){this.sendFundError="",this.transaction={},this.flgMinConf=!1},e.prototype.onAmountUnitChange=function(e){var t=this,n=e.value===this.amountUnits[2]?g.g.OTHER:e.value;this.transaction.satoshis&&this.selAmountUnit!==e.value&&this.commonService.convertCurrency(this.transaction.satoshis,this.selAmountUnit===this.amountUnits[2]?g.g.OTHER:this.selAmountUnit,this.amountUnits[2],this.fiatConversion).pipe(Object(h.a)(this.unSubs[3])).subscribe((function(e){t.transaction.satoshis=+t.decimalPipe.transform(e[n],t.currencyUnitFormats[n]).replace(/,/g,"")})),this.selAmountUnit=e.value},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(Se.f),o.Qb(p.b),o.Qb(v.h),o.Qb(m.a),o.Qb(a.e),o.Qb(C.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-on-chain-send"]],viewQuery:function(e,t){var n;1&e&&o.Mc(De,!0),2&e&&o.vc(n=o.fc())&&(t.form=n.first)},decls:1,vars:0,template:function(e,t){1&e&&o.Hc(0,"Coming Soon\n")},styles:[""]}),e}(),Ie=n("qmev"),Oe=n("t9fZ"),He=n("Ysfc"),Ae=n("HWUm"),Be=function(){function e(e,t){this.store=e,this.eclrEffects=t,this.newAddress=""}return e.prototype.ngOnInit=function(){},e.prototype.onGenerateAddress=function(){var e=this;this.store.dispatch(new We.D("Getting New Address...")),this.store.dispatch(new y.v),this.eclrEffects.setNewAddress.pipe(Object(Oe.a)(1)).subscribe((function(t){e.newAddress=t,e.store.dispatch(new We.A({width:"58%",data:{address:e.newAddress,addressType:"",component:He.a}}))}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(v.h),o.Qb(Ae.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-on-chain-receive"]],decls:5,vars:0,consts:[["fxLayout","column"],["fxLayout","row"],[1,"mt-2"],["mat-flat-button","","color","primary","tabindex","1",1,"top-minus-15px",3,"click"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"button",3),o.ec("click",(function(){return t.onGenerateAddress()})),o.Hc(4,"Generate Address"),o.Vb(),o.Vb(),o.Vb(),o.Vb())},directives:[w.c,S.a],styles:[""]}),e}(),ke=function(){function e(e){this.store=e,this.selNode={},this.faExchangeAlt=f.m,this.faChartPie=f.f,this.balances=[{title:"Total Balance",dataValue:0},{title:"Confirmed",dataValue:0},{title:"Unconfirmed",dataValue:0}],this.unSubs=[new b.a,new b.a,new b.a,new b.a]}return e.prototype.ngOnInit=function(){var e=this;this.store.select("eclr").pipe(Object(h.a)(this.unSubs[1])).subscribe((function(t){e.selNode=t.nodeSettings,e.balances=[{title:"Total Balance",dataValue:t.onchainBalance.totalBalance||0},{title:"Confirmed",dataValue:t.onchainBalance.confBalance},{title:"Unconfirmed",dataValue:t.onchainBalance.unconfBalance}]}))},e.prototype.openSendFundsModal=function(){this.store.dispatch(new We.A({data:{component:Le}}))},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(v.h))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-on-chain"]],decls:23,vars:3,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"padding-gap-x","page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x","mb-4"],["fxLayout","column"],[3,"values"],["fxLayout","column",1,"padding-gap-x"],["label","Receive"],["label","Send"],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap"],["fxLayout","row"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Rb(1,"fa-icon",1),o.Wb(2,"span",2),o.Hc(3,"On-chain Balance"),o.Vb(),o.Vb(),o.Wb(4,"div",3),o.Wb(5,"mat-card"),o.Wb(6,"mat-card-content",4),o.Rb(7,"rtl-currency-unit-converter",5),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",0),o.Rb(9,"fa-icon",1),o.Wb(10,"span",2),o.Hc(11,"On-chain Transactions"),o.Vb(),o.Vb(),o.Wb(12,"div",6),o.Wb(13,"mat-card"),o.Wb(14,"mat-card-content",4),o.Wb(15,"mat-tab-group"),o.Wb(16,"mat-tab",7),o.Rb(17,"rtl-eclr-on-chain-receive"),o.Vb(),o.Wb(18,"mat-tab",8),o.Wb(19,"div",9),o.Wb(20,"div",10),o.Wb(21,"p"),o.Hc(22,"Coming Soon"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(1),o.pc("icon",t.faChartPie),o.Db(6),o.pc("values",t.balances),o.Db(2),o.pc("icon",t.faExchangeAlt))},directives:[w.c,w.b,V.a,F.a,F.b,Ie.a,ee.c,ee.a,Be,w.a],styles:[""]}),e}(),Re=n("gIcY"),Te=n("p0Sj"),Pe=n("67Y/"),Me=["form"],je=function(){function e(e,t,n,a){this.dialogRef=e,this.data=t,this.store=n,this.actions$=a,this.selectedPeer=new Re.d,this.faExclamationTriangle=f.n,this.channelConnectionError="",this.advancedTitle="Advanced Options",this.totalBalance=0,this.selectedPubkey="",this.isPrivate=!1,this.feeRateTypes=g.j,this.selFeeRate="",this.flgMinConf=!1,this.minConfValue=null,this.unSubs=[new b.a,new b.a]}return e.prototype.ngOnInit=function(){var e=this;this.information=this.data.message.information,this.totalBalance=this.data.message.balance,this.alertTitle=this.data.alertTitle,this.peer=this.data.message.peer?this.data.message.peer:null,this.peers=this.data.message.peers&&this.data.message.peers.length?this.data.message.peers:[],this.actions$.pipe(Object(h.a)(this.unSubs[0]),Object(d.a)((function(e){return e.type===y.g||e.type===y.i}))).subscribe((function(t){t.type===y.g&&"SaveNewChannel"===t.payload.action&&(e.channelConnectionError=t.payload.message),t.type===y.i&&e.dialogRef.close()}));var t="",n="";this.sortedPeers=this.peers.sort((function(e,a){return t=e.alias?e.alias.toLowerCase():e.nodeId?e.nodeId.toLowerCase():"",n=a.alias?a.alias.toLowerCase():e.nodeId.toLowerCase(),t<n?-1:t>n?1:0})),this.filteredPeers=this.selectedPeer.valueChanges.pipe(Object(h.a)(this.unSubs[1]),Object(Te.a)(""),Object(Pe.a)((function(e){return"string"==typeof e?e:e.alias?e.alias:e.nodeId})),Object(Pe.a)((function(t){return t?e.filterPeers(t):e.sortedPeers.slice()})))},e.prototype.filterPeers=function(e){return this.sortedPeers.filter((function(t){return 0===t.alias.toLowerCase().indexOf(e?e.toLowerCase():"")}))},e.prototype.displayFn=function(e){return e&&e.alias?e.alias:e&&e.nodeId?e.nodeId:""},e.prototype.onSelectedPeerChanged=function(){var e=this;if(this.channelConnectionError="",this.selectedPubkey=this.selectedPeer.value&&this.selectedPeer.value.nodeId?this.selectedPeer.value.nodeId:void 0,"string"==typeof this.selectedPeer.value){var t=this.peers.filter((function(t){return t.alias.length===e.selectedPeer.value.length&&0===t.alias.toLowerCase().indexOf(e.selectedPeer.value?e.selectedPeer.value.toLowerCase():"")}));1===t.length&&t[0].nodeId&&(this.selectedPubkey=t[0].nodeId)}this.selectedPeer.setErrors(this.selectedPeer.value&&!this.selectedPubkey?{notfound:!0}:null)},e.prototype.onClose=function(){this.dialogRef.close(!1)},e.prototype.resetData=function(){this.flgMinConf=!1,this.selFeeRate="",this.minConfValue=null,this.selectedPeer.setValue(""),this.fundingAmount=null,this.isPrivate=!1,this.channelConnectionError="",this.advancedTitle="Advanced Options",this.form.resetForm()},e.prototype.onAdvancedPanelToggle=function(e){var t=this;this.advancedTitle=e&&(this.flgMinConf||this.selFeeRate)?"Advanced Options | "+(this.flgMinConf?"Min Confirmation Blocks: ":"Fee Rate: ")+(this.flgMinConf?this.minConfValue:this.selFeeRate?this.feeRateTypes.find((function(e){return e.feeRateId===t.selFeeRate})).feeRateType:""):"Advanced Options"},e.prototype.onOpenChannel=function(){if(!this.peer&&!this.selectedPubkey||!this.fundingAmount||this.totalBalance-this.fundingAmount<0||this.flgMinConf&&!this.minConfValue)return!0;this.store.dispatch(new We.D("Opening Channel...")),this.store.dispatch(new y.P({peerId:this.peer&&this.peer.nodeId?this.peer.nodeId:this.selectedPubkey,satoshis:this.fundingAmount,announce:!this.isPrivate,feeRate:this.selFeeRate,minconf:this.flgMinConf?this.minConfValue:null}))},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(Se.f),o.Qb(Se.a),o.Qb(v.h),o.Qb(C.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-open-channel"]],viewQuery:function(e,t){var n;1&e&&o.Mc(Me,!0),2&e&&o.vc(n=o.fc())&&(t.form=n.first)},decls:2,vars:0,template:function(e,t){1&e&&(o.Wb(0,"h4"),o.Hc(1,"Open Channel"),o.Vb())},styles:[".open-inputs-box[_ngcontent-%COMP%]{padding:1.2rem 2.4rem .8rem!important}"]}),e}(),Ee=n("mrSG"),qe=n("kfqd"),ze=n("BqIw"),Ue=n("JeCn"),Ne=n("KELG"),Qe=n("O4ig"),_e=n("dEYt");function Ge(e,t){if(1&e&&(o.Wb(0,"div",11),o.Wb(1,"h4",12),o.Hc(2,"Short Channel ID"),o.Vb(),o.Wb(3,"span",13),o.Hc(4),o.Vb(),o.Vb()),2&e){var n=o.ic();o.Db(4),o.Ic(n.channel.shortChannelId)}}function Je(e,t){if(1&e&&(o.Wb(0,"div",11),o.Wb(1,"h4",12),o.Hc(2,"State"),o.Vb(),o.Wb(3,"span",16),o.Hc(4),o.jc(5,"titlecase"),o.Vb(),o.Vb()),2&e){var n=o.ic();o.Db(4),o.Ic(o.kc(5,1,n.channelState))}}function $e(e,t){if(1&e&&(o.Wb(0,"div"),o.Rb(1,"mat-divider",14),o.Wb(2,"div",9),o.Wb(3,"div",11),o.Wb(4,"h4",12),o.Hc(5,"Channel Flags"),o.Vb(),o.Wb(6,"span",16),o.Hc(7),o.jc(8,"number"),o.Vb(),o.Vb(),o.Wb(9,"div",11),o.Wb(10,"h4",12),o.Hc(11,"Buried"),o.Vb(),o.Wb(12,"span",16),o.Hc(13),o.Vb(),o.Vb(),o.Vb(),o.Rb(14,"mat-divider",14),o.Vb()),2&e){var n=o.ic();o.Db(1),o.pc("inset",!0),o.Db(6),o.Ic(o.kc(8,4,n.channel.channelFlags)),o.Db(6),o.Ic(n.channel.buried?"Yes":"No"),o.Db(1),o.pc("inset",!0)}}function Ke(e,t){1&e&&(o.Wb(0,"p"),o.Hc(1,"Show Advanced"),o.Vb())}function Xe(e,t){1&e&&(o.Wb(0,"p"),o.Hc(1,"Hide Advanced"),o.Vb())}function Ye(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",25),o.ec("copied",(function(e){return o.yc(n),o.ic().onCopyChanID(e)})),o.Hc(1,"Copy Short Channel ID"),o.Vb()}if(2&e){var a=o.ic();o.pc("payload",a.channel.shortChannelId)}}function Ze(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("copied",(function(e){return o.yc(n),o.ic().onCopyChanID(e)})),o.Hc(1,"Copy Channel ID"),o.Vb()}if(2&e){var a=o.ic();o.pc("payload",a.channel.channelId)}}function et(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",27),o.ec("click",(function(){return o.yc(n),o.ic().onClose()})),o.Hc(1,"OK"),o.Vb()}}var tt=function(e){return{"xs-scroll-y":e}},nt=function(e,t){return{"mt-2":e,"mt-1":t}},at=function(){function e(e,t,n,a,i){this.dialogRef=e,this.data=t,this.logger=n,this.commonService=a,this.snackBar=i,this.faReceipt=f.A,this.showAdvanced=!1,this.showCopy=!0,this.showCopyField=null,this.channelsType="open",this.channelState="",this.screenSize="",this.screenSizeEnum=g.o}return e.prototype.ngOnInit=function(){this.channel=this.data.channel,this.channelsType=this.data.selectedTab,this.showCopy=this.data.showCopy,this.channelState=this.channel.state.replace(/_/g," "),this.screenSize=this.commonService.getScreenSize()},e.prototype.onClose=function(){this.dialogRef.close(!1)},e.prototype.onShowAdvanced=function(){this.showAdvanced=!this.showAdvanced},e.prototype.onCopyChanID=function(e){this.snackBar.open("open"===this.channelsType?"Short channel ID "+e+" copied.":"Channel ID copied."),this.logger.info("Copied Text: "+e)},e.\u0275fac=function(t){return new(t||e)(o.Qb(Se.f),o.Qb(Se.a),o.Qb(p.b),o.Qb(m.a),o.Qb(Ne.b))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-channel-information"]],decls:69,vars:33,consts:[["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","space-between stretch"],["fxFlex","100",1,"padding-gap-large","pl-3"],["fxLayout","row","fxLayoutAlign","space-between center",1,"modal-info-header","mb-1"],["fxFlex","95","fxLayoutAlign","start start"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["tabindex","3","fxFlex","5","fxLayoutAlign","center","mat-button","",1,"btn-close-x","p-0",3,"click"],[3,"ngClass"],["fxLayout","column"],["fxLayout","row"],["fxFlex","50",4,"ngIf"],["fxFlex","50"],["fxLayoutAlign","start",1,"font-bold-500"],[1,"foreground-secondary-text"],[1,"my-1",3,"inset"],["fxFlex","100"],[1,"overflow-wrap","foreground-secondary-text"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxFlex","100",3,"ngClass"],["mat-stroked-button","","color","primary","type","reset","tabindex","1",1,"mr-1",3,"click"],[4,"ngIf","ngIfElse"],["hideAdvancedText",""],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","submit","rtlClipboard","",3,"payload","copied",4,"ngIf"],["autoFocus","","mat-flat-button","","color","primary","tabindex","3","type","submit","rtlClipboard","",3,"payload","copied",4,"ngIf"],["autoFocus","","mat-flat-button","","color","primary","tabindex","4","type","button",3,"click",4,"ngIf"],["autoFocus","","mat-flat-button","","color","primary","tabindex","2","type","submit","rtlClipboard","",3,"payload","copied"],["autoFocus","","mat-flat-button","","color","primary","tabindex","3","type","submit","rtlClipboard","",3,"payload","copied"],["autoFocus","","mat-flat-button","","color","primary","tabindex","4","type","button",3,"click"]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"mat-card-header",2),o.Wb(3,"div",3),o.Rb(4,"fa-icon",4),o.Wb(5,"span",5),o.Hc(6,"Channel Information"),o.Vb(),o.Vb(),o.Wb(7,"button",6),o.ec("click",(function(){return t.onClose()})),o.Hc(8,"X"),o.Vb(),o.Vb(),o.Wb(9,"mat-card-content",7),o.Wb(10,"div",8),o.Wb(11,"div",9),o.Fc(12,Ge,5,1,"div",10),o.Wb(13,"div",11),o.Wb(14,"h4",12),o.Hc(15,"Peer Alias"),o.Vb(),o.Wb(16,"span",13),o.Hc(17),o.Vb(),o.Vb(),o.Fc(18,Je,6,3,"div",10),o.Vb(),o.Rb(19,"mat-divider",14),o.Wb(20,"div",9),o.Wb(21,"div",15),o.Wb(22,"h4",12),o.Hc(23,"Channel ID"),o.Vb(),o.Wb(24,"span",13),o.Hc(25),o.Vb(),o.Vb(),o.Vb(),o.Rb(26,"mat-divider",14),o.Wb(27,"div",9),o.Wb(28,"div",15),o.Wb(29,"h4",12),o.Hc(30,"Peer Public Key"),o.Vb(),o.Wb(31,"span",13),o.Hc(32),o.Vb(),o.Vb(),o.Vb(),o.Rb(33,"mat-divider",14),o.Wb(34,"div",9),o.Wb(35,"div",11),o.Wb(36,"h4",12),o.Hc(37,"Local Balance (mSats)"),o.Vb(),o.Wb(38,"span",16),o.Hc(39),o.jc(40,"number"),o.Vb(),o.Vb(),o.Wb(41,"div",11),o.Wb(42,"h4",12),o.Hc(43,"Remote Balance (mSats)"),o.Vb(),o.Wb(44,"span",16),o.Hc(45),o.jc(46,"number"),o.Vb(),o.Vb(),o.Vb(),o.Rb(47,"mat-divider",14),o.Wb(48,"div",9),o.Wb(49,"div",11),o.Wb(50,"h4",12),o.Hc(51,"Base Fee (mSats)"),o.Vb(),o.Wb(52,"span",16),o.Hc(53),o.jc(54,"number"),o.Vb(),o.Vb(),o.Wb(55,"div",11),o.Wb(56,"h4",12),o.Hc(57,"Fee Rate (mSat)"),o.Vb(),o.Wb(58,"span",16),o.Hc(59),o.Vb(),o.Vb(),o.Vb(),o.Fc(60,$e,15,6,"div",17),o.Wb(61,"div",18),o.Wb(62,"button",19),o.ec("click",(function(){return t.onShowAdvanced()})),o.Fc(63,Ke,2,0,"p",20),o.Fc(64,Xe,2,0,"ng-template",null,21,o.Gc),o.Vb(),o.Fc(66,Ye,2,1,"button",22),o.Fc(67,Ze,2,1,"button",23),o.Fc(68,et,2,0,"button",24),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e){var n=o.wc(65);o.Db(4),o.pc("icon",t.faReceipt),o.Db(5),o.pc("ngClass",o.tc(28,tt,t.screenSize===t.screenSizeEnum.XS)),o.Db(3),o.pc("ngIf","open"===t.channelsType),o.Db(5),o.Ic(t.channel.alias),o.Db(1),o.pc("ngIf","open"!==t.channelsType),o.Db(1),o.pc("inset",!0),o.Db(6),o.Ic(t.channel.channelId),o.Db(1),o.pc("inset",!0),o.Db(6),o.Ic(t.channel.nodeId),o.Db(1),o.pc("inset",!0),o.Db(6),o.Ic(o.kc(40,22,t.channel.toLocal)),o.Db(6),o.Ic(o.kc(46,24,t.channel.toRemote)),o.Db(2),o.pc("inset",!0),o.Db(6),o.Ic(o.kc(54,26,t.channel.feeBaseMsat)),o.Db(6),o.Ic(t.channel.feeProportionalMillionths),o.Db(1),o.pc("ngIf",t.showAdvanced),o.Db(1),o.pc("ngClass",o.uc(30,nt,!t.showAdvanced,t.showAdvanced)),o.Db(2),o.pc("ngIf",!t.showAdvanced)("ngIfElse",n),o.Db(3),o.pc("ngIf",t.showCopy&&"open"===t.channelsType),o.Db(1),o.pc("ngIf",t.showCopy&&"open"!==t.channelsType),o.Db(1),o.pc("ngIf",!t.showCopy)}},directives:[w.c,w.b,w.a,F.c,V.a,S.a,F.b,a.l,L.a,a.n,P.a,Qe.a,_e.a],pipes:[a.e,a.w],styles:[""]}),e}(),it=n("X9mX"),ot=n("BId/"),ct=n("UTvR"),st=n("8KZq"),lt=n("eO+G");function rt(e,t){if(1&e&&(o.Wb(0,"span",5),o.Hc(1,"Open"),o.Vb()),2&e){var n=o.ic();o.qc("matBadge",n.numOfOpenChannels)}}function bt(e,t){1&e&&o.Sb(0)}function ht(e,t){if(1&e&&(o.Wb(0,"span",5),o.Hc(1,"Pending"),o.Vb()),2&e){var n=o.ic();o.qc("matBadge",n.numOfPendingChannels)}}function dt(e,t){1&e&&o.Sb(0)}function ut(e,t){if(1&e&&(o.Wb(0,"span",5),o.Hc(1,"Inactive"),o.Vb()),2&e){var n=o.ic();o.qc("matBadge",n.numOfInactiveChannels)}}function ft(e,t){1&e&&o.Sb(0)}function pt(e,t){1&e&&o.Rb(0,"mat-progress-bar",34)}function mt(e,t){1&e&&(o.Wb(0,"th",35),o.Hc(1," Short Channel ID "),o.Vb())}function gt(e,t){if(1&e&&(o.Wb(0,"td",36),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Jc(" ",null==n?null:n.shortChannelId,"")}}function yt(e,t){1&e&&(o.Wb(0,"th",35),o.Hc(1," Alias "),o.Vb())}function vt(e,t){if(1&e&&(o.Wb(0,"td",36),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Ic(null==n?null:n.alias)}}function Ct(e,t){1&e&&(o.Wb(0,"th",37),o.Hc(1," Local Balance (Sats) "),o.Vb())}function wt(e,t){if(1&e&&(o.Wb(0,"td",36),o.Wb(1,"span",38),o.Hc(2),o.jc(3,"number"),o.Vb(),o.Vb()),2&e){var n=t.$implicit;o.Db(2),o.Jc(" ",o.lc(3,1,(null==n?null:n.toLocal)/1e3,"1.0-0")," ")}}function Vt(e,t){1&e&&(o.Wb(0,"th",37),o.Hc(1," Remote Balance (Sats) "),o.Vb())}function xt(e,t){if(1&e&&(o.Wb(0,"td",36),o.Wb(1,"span",38),o.Hc(2),o.jc(3,"number"),o.Vb(),o.Vb()),2&e){var n=t.$implicit;o.Db(2),o.Jc(" ",o.lc(3,1,(null==n?null:n.toRemote)/1e3,"1.0-0")," ")}}function Ft(e,t){1&e&&(o.Wb(0,"th",39),o.Hc(1,"Balance Score "),o.Vb())}function Wt(e,t){if(1&e&&(o.Wb(0,"td",40),o.Wb(1,"div",41),o.Wb(2,"mat-hint",42),o.Hc(3),o.jc(4,"number"),o.Vb(),o.Vb(),o.Rb(5,"mat-progress-bar",43),o.Vb()),2&e){var n=t.$implicit;o.Db(3),o.Ic(o.kc(4,2,(null==n?null:n.balancedness)||0)),o.Db(2),o.qc("value",n.msatoshi_to_us&&n.msatoshi_to_us>0?(n.msatoshi_to_us-0)/(n.msatoshi_to_us-0+(n.msatoshi_to_them-0))*100:0)}}function St(e,t){if(1&e){var n=o.Xb();o.Wb(0,"mat-option",48),o.ec("click",(function(){return o.yc(n),o.ic(3).onChannelUpdate("all")})),o.Hc(1,"Update Fee Policy"),o.Vb()}}function Dt(e,t){if(1&e){var n=o.Xb();o.Wb(0,"th",44),o.Wb(1,"div",45),o.Wb(2,"mat-select",46),o.Rb(3,"mat-select-trigger"),o.Fc(4,St,2,0,"mat-option",47),o.Wb(5,"mat-option",48),o.ec("click",(function(){return o.yc(n),o.ic(2).onDownloadCSV()})),o.Hc(6,"Download CSV"),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var a=o.ic(2);o.Db(4),o.pc("ngIf","open"===a.selectedTab)}}function Lt(e,t){if(1&e){var n=o.Xb();o.Wb(0,"mat-option",48),o.ec("click",(function(){o.yc(n);var e=o.ic().$implicit;return o.ic(2).onChannelUpdate(e)})),o.Hc(1,"Update Fee Policy"),o.Vb()}}function It(e,t){if(1&e){var n=o.Xb();o.Wb(0,"mat-option",48),o.ec("click",(function(){o.yc(n);var e=o.ic().$implicit;return o.ic(2).onChannelClose(e)})),o.Hc(1,"Close Channel"),o.Vb()}}function Ot(e,t){if(1&e){var n=o.Xb();o.Wb(0,"td",49),o.Wb(1,"div",50),o.Wb(2,"mat-select",51),o.Rb(3,"mat-select-trigger"),o.Wb(4,"mat-option",48),o.ec("click",(function(e){o.yc(n);var a=t.$implicit;return o.ic(2).onChannelClick(a,e)})),o.Hc(5,"View Info"),o.Vb(),o.Fc(6,Lt,2,0,"mat-option",47),o.Fc(7,It,2,0,"mat-option",47),o.Vb(),o.Vb(),o.Vb()}if(2&e){var a=o.ic(2);o.Db(6),o.pc("ngIf","open"===a.selectedTab),o.Db(1),o.pc("ngIf","open"===a.selectedTab)}}function Ht(e,t){1&e&&(o.Wb(0,"p"),o.Hc(1,"No peers connected. Add a peer in order to open a channel."),o.Vb())}function At(e,t){if(1&e&&(o.Wb(0,"p"),o.Hc(1),o.Vb()),2&e){var n=o.ic(3);o.Db(1),o.Jc("No ",n.selectedTab," channels available.")}}function Bt(e,t){if(1&e&&(o.Wb(0,"td",52),o.Fc(1,Ht,2,0,"p",53),o.Fc(2,At,2,1,"p",53),o.Vb()),2&e){var n=o.ic(2);o.Db(1),o.pc("ngIf",n.numPeers<1&&(!n.channels.data||n.channels.data.length<1)),o.Db(1),o.pc("ngIf",n.numPeers>0&&(!n.channels.data||n.channels.data.length<1))}}var kt=function(e){return{"display-none":e}};function Rt(e,t){if(1&e&&o.Rb(0,"tr",54),2&e){var n=o.ic(2);o.pc("ngClass",o.tc(1,kt,n.numPeers>0&&n.channels.data&&n.channels.data.length>0))}}function Tt(e,t){1&e&&o.Rb(0,"tr",55)}function Pt(e,t){1&e&&o.Rb(0,"tr",56)}var Mt=function(e){return{"overflow-auto error-border":e,"overflow-auto":!0}},jt=function(){return["no_peer"]};function Et(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",6),o.Wb(1,"div",7),o.Rb(2,"div",8),o.Wb(3,"mat-form-field",9),o.Wb(4,"input",10),o.ec("keyup",(function(){return o.yc(n),o.ic().applyFilter()}))("ngModelChange",(function(e){return o.yc(n),o.ic().selFilter=e})),o.Vb(),o.Vb(),o.Vb(),o.Wb(5,"div",11),o.Fc(6,pt,1,0,"mat-progress-bar",12),o.Wb(7,"table",13,14),o.Ub(9,15),o.Fc(10,mt,2,0,"th",16),o.Fc(11,gt,2,1,"td",17),o.Tb(),o.Ub(12,18),o.Fc(13,yt,2,0,"th",16),o.Fc(14,vt,2,1,"td",17),o.Tb(),o.Ub(15,19),o.Fc(16,Ct,2,0,"th",20),o.Fc(17,wt,4,4,"td",17),o.Tb(),o.Ub(18,21),o.Fc(19,Vt,2,0,"th",20),o.Fc(20,xt,4,4,"td",17),o.Tb(),o.Ub(21,22),o.Fc(22,Ft,2,0,"th",23),o.Fc(23,Wt,6,4,"td",24),o.Tb(),o.Ub(24,25),o.Fc(25,Dt,7,1,"th",26),o.Fc(26,Ot,8,2,"td",27),o.Tb(),o.Ub(27,28),o.Fc(28,Bt,3,2,"td",29),o.Tb(),o.Fc(29,Rt,1,3,"tr",30),o.Fc(30,Tt,1,0,"tr",31),o.Fc(31,Pt,1,0,"tr",32),o.Vb(),o.Vb(),o.Rb(32,"mat-paginator",33),o.Vb()}if(2&e){var a=o.ic();o.Db(4),o.pc("ngModel",a.selFilter),o.Db(2),o.pc("ngIf",!0===a.flgLoading[0]),o.Db(1),o.pc("dataSource",a.channels)("ngClass",o.tc(11,Mt,"error"===a.flgLoading[0])),o.Db(22),o.pc("matFooterRowDef",o.sc(13,jt)),o.Db(1),o.pc("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",a.flgSticky),o.Db(1),o.pc("matRowDefColumns",a.displayedColumns),o.Db(1),o.pc("pageSize",a.pageSize)("pageSizeOptions",a.pageSizeOptions)("showFirstLastButtons",a.screenSize!==a.screenSizeEnum.XS)}}var qt=function(){function e(e,t,n,a,i){this.logger=e,this.store=t,this.rtlEffects=n,this.eclrEffects=a,this.commonService=i,this.numOfOpenChannels=0,this.numOfPendingChannels=0,this.numOfInactiveChannels=0,this.totalBalance=0,this.displayedColumns=[],this.myChanPolicy={},this.information={},this.numPeers=-1,this.selectedTab="open",this.feeRateTypes=g.j,this.flgLoading=[!0],this.selectedFilter="",this.selFilter="",this.flgSticky=!1,this.pageSize=g.m,this.pageSizeOptions=g.n,this.screenSize="",this.screenSizeEnum=g.o,this.unSubs=[new b.a,new b.a,new b.a,new b.a,new b.a,new b.a],this.screenSize=this.commonService.getScreenSize(),this.screenSize===g.o.XS?(this.flgSticky=!1,this.displayedColumns=["shortChannelId","alias","actions"]):this.screenSize===g.o.SM||this.screenSize===g.o.MD?(this.flgSticky=!1,this.displayedColumns=["shortChannelId","alias","toLocal","toRemote","actions"]):(this.flgSticky=!0,this.displayedColumns=["shortChannelId","alias","toLocal","toRemote","balancedness","actions"])}return e.prototype.ngOnInit=function(){var e=this;this.store.select("eclr").pipe(Object(h.a)(this.unSubs[0])).subscribe((function(t){t.effectErrors.forEach((function(t){"FetchChannels"===t.action&&(e.flgLoading[0]="error")})),e.information=t.information,e.numPeers=t.peers&&t.peers.length?t.peers.length:0,e.numOfOpenChannels=t.channelsStatus&&t.channelsStatus.active&&t.channelsStatus.active.channels?t.channelsStatus.active.channels:0,e.numOfPendingChannels=t.channelsStatus&&t.channelsStatus.pending&&t.channelsStatus.pending.channels?t.channelsStatus.pending.channels:0,e.numOfInactiveChannels=t.channelsStatus&&t.channelsStatus.inactive&&t.channelsStatus.inactive.channels?t.channelsStatus.inactive.channels:0,e.totalBalance=t.onchainBalance.totalBalance,e.activeChannels=t.activeChannels,e.pendingChannels=t.pendingChannels,e.inactiveChannels=t.inactiveChannels,e.loadChannelsTable(0),"error"!==e.flgLoading[0]&&(e.flgLoading[0]=!t.activeChannels),e.logger.info(t)}))},e.prototype.onChannelUpdate=function(e){var t=this;"all"!==e&&"NORMAL"!==e.state||(this.store.dispatch(new We.B({data:{type:g.b.CONFIRM,alertTitle:"Update Fee Policy",noBtnText:"Cancel",yesBtnText:"Update",message:[],titleMessage:"all"===e?"Update fee policy for selected/all channels":"Update fee policy for Channel: "+e.channelId,flgShowInput:!0,getInputs:[{placeholder:"Base Fee (mSats)",inputType:"number",inputValue:e.data&&e.data.channelUpdate&&e.feeBaseMsat?e.feeBaseMsat:1e3,width:48},{placeholder:"Fee Rate (mili mSats)",inputType:"number",inputValue:e.data&&e.data.channelUpdate&&e.feeProportionalMillionths?e.feeProportionalMillionths:100,min:1,width:48}]}})),this.rtlEffects.closeConfirm.pipe(Object(h.a)(this.unSubs[1])).subscribe((function(n){if(n){var a=n[0].inputValue,i=n[1].inputValue,o=null,c="";"all"===e?(t.activeChannels.forEach((function(e){c=c+","+e.channelId})),o={baseFeeMsat:a,feeRate:i,channelIds:c=c.substring(1)}):o={baseFeeMsat:a,feeRate:i,channelId:e.channelId},t.store.dispatch(new We.D("Updating Channel Policy...")),t.store.dispatch(new y.Y(o))}})),this.applyFilter())},e.prototype.onChannelClose=function(e){var t=this;this.store.dispatch(new We.B({data:{type:g.b.CONFIRM,alertTitle:"Close Channel",titleMessage:"Closing channel: "+e.channelId,noBtnText:"Cancel",yesBtnText:"Close Channel"}})),this.rtlEffects.closeConfirm.pipe(Object(h.a)(this.unSubs[3])).subscribe((function(n){n&&(t.store.dispatch(new We.D("Closing Channel...")),t.store.dispatch(new y.d({channelId:e.channelId})))}))},e.prototype.applyFilter=function(){this.selectedFilter=this.selFilter,this.channels.filter=this.selFilter},e.prototype.onChannelClick=function(e,t){this.store.dispatch(new We.A({data:{channel:e,showCopy:!0,selectedTab:this.selectedTab,component:at}}))},e.prototype.loadChannelsTable=function(e){var t=[];switch(e){case 0:this.selectedTab="open",t=this.activeChannels;break;case 1:this.selectedTab="pending",t=this.pendingChannels;break;case 2:this.selectedTab="inactive",t=this.inactiveChannels;break;default:this.selectedTab="open",t=this.activeChannels}t.sort((function(e,t){return e.alias===t.alias?0:t.alias?1:-1})),this.channels=new Ue.o(Object(Ee.g)(t)),this.channels.sort=this.sort,this.channels.paginator=this.paginator,this.logger.info(this.channels)},e.prototype.onDownloadCSV=function(){this.channels.data&&this.channels.data.length>0&&this.commonService.downloadCSV(this.channels.data,"Channels-"+this.selectedTab)},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(p.b),o.Qb(v.h),o.Qb(it.a),o.Qb(Ae.a),o.Qb(m.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-channels-table"]],viewQuery:function(e,t){var n;1&e&&(o.Dc(ze.a,!0),o.Dc(qe.a,!0)),2&e&&(o.vc(n=o.fc())&&(t.sort=n.first),o.vc(n=o.fc())&&(t.paginator=n.first))},features:[o.Cb([{provide:qe.b,useValue:Object(g.v)("Channels")}])],decls:13,vars:3,consts:[["fxLayout","column","fxFlex","100",1,"mt-2","bordered-box"],[3,"selectedTabChange"],["mat-tab-label",""],[4,"ngTemplateOutlet"],["channelsTable",""],["matBadgeOverlap","false",1,"tab-badge",3,"matBadge"],["fxLayout","column",1,"padding-gap"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"padding-gap-x","page-sub-title-container"],["fxFlex","70"],["fxFlex","30"],["matInput","","name","filter","placeholder","Filter",3,"ngModel","keyup","ngModelChange"],["perfectScrollbar","","fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"table-container","w-100"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","shortChannelId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","toLocal"],["mat-header-cell","","mat-sort-header","","arrowPosition","before",4,"matHeaderCellDef"],["matColumnDef","toRemote"],["matColumnDef","balancedness"],["mat-header-cell","","mat-sort-header","","class","pl-3",4,"matHeaderCellDef"],["mat-cell","","class","pl-3",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","pl-1",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center","class","pl-1",4,"matCellDef"],["matColumnDef","no_peer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-4",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","","arrowPosition","before"],["fxLayoutAlign","end center"],["mat-header-cell","","mat-sort-header","",1,"pl-3"],["mat-cell","",1,"pl-3"],["fxLayout","row"],["fxFlex","100","fxLayoutAlign","center center",1,"font-size-80"],["mode","determinate",3,"value"],["mat-header-cell","",1,"pl-1"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click",4,"ngIf"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"pl-1"],["fxFlex","100","fxLayoutAlign","center center",1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","2",1,"mr-0"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Wb(1,"mat-tab-group",1),o.ec("selectedTabChange",(function(e){return t.loadChannelsTable(e.index)})),o.Wb(2,"mat-tab"),o.Fc(3,rt,2,1,"ng-template",2),o.Fc(4,bt,1,0,"ng-container",3),o.Vb(),o.Wb(5,"mat-tab"),o.Fc(6,ht,2,1,"ng-template",2),o.Fc(7,dt,1,0,"ng-container",3),o.Vb(),o.Wb(8,"mat-tab"),o.Fc(9,ut,2,1,"ng-template",2),o.Fc(10,ft,1,0,"ng-container",3),o.Vb(),o.Vb(),o.Vb(),o.Fc(11,Et,33,14,"ng-template",null,4,o.Gc)),2&e){var n=o.wc(12);o.Db(4),o.pc("ngTemplateOutlet",n),o.Db(3),o.pc("ngTemplateOutlet",n),o.Db(3),o.pc("ngTemplateOutlet",n)}},directives:[w.c,w.a,ee.c,ee.a,ee.d,a.s,ot.a,w.b,R.c,ct.b,Re.b,Re.l,Re.o,M.b,a.n,Ue.n,ze.a,a.l,L.a,Ue.c,Ue.i,Ue.b,Ue.e,Ue.g,Ue.k,Ue.m,qe.a,c.a,Ue.h,ze.b,Ue.a,R.f,st.a,st.c,lt.n,Ue.d,Ue.f,Ue.j,Ue.l],pipes:[a.e],styles:[".mat-column-alias[_ngcontent-%COMP%]{flex:0 0 20%;width:20%}.mat-column-alias[_ngcontent-%COMP%]   .ellipsis-parent[_ngcontent-%COMP%]{display:flex}.mat-column-balancedness[_ngcontent-%COMP%]{padding-left:3rem;flex:0 0 22%;width:22%}.mat-column-shortChannelId[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%], .mat-column-toLocal[_ngcontent-%COMP%], .mat-column-toRemote[_ngcontent-%COMP%]{flex:0 0 15%;width:15%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"]}),e}(),zt=["peersForm"],Ut=["stepper"],Nt=function(){function e(e,t,n,a,i,o,c){this.dialogRef=e,this.data=t,this.store=n,this.eclrEffects=a,this.formBuilder=i,this.actions$=o,this.logger=c,this.faExclamationTriangle=f.n,this.peerAddress="",this.totalBalance=0,this.feeRateTypes=g.j,this.flgChannelOpened=!1,this.channelOpenStatus=null,this.newlyAddedPeer=null,this.flgEditable=!0,this.peerConnectionError="",this.channelConnectionError="",this.peerFormLabel="Peer Details",this.channelFormLabel="Open Channel (Optional)",this.unSubs=[new b.a,new b.a]}return e.prototype.ngOnInit=function(){var e=this;this.totalBalance=this.data.message.balance,this.peerFormGroup=this.formBuilder.group({hiddenAddress:["",[Re.s.required]],peerAddress:["",[Re.s.required]]}),this.channelFormGroup=this.formBuilder.group({fundingAmount:["",[Re.s.required,Re.s.min(1),Re.s.max(this.totalBalance)]],isPrivate:[!1],selFeeRate:[null],flgMinConf:[!1],minConfValue:[null],hiddenAmount:["",[Re.s.required]]}),this.statusFormGroup=this.formBuilder.group({}),this.channelFormGroup.controls.flgMinConf.valueChanges.pipe(Object(h.a)(this.unSubs[0])).subscribe((function(t){t?(e.channelFormGroup.controls.selFeeRate.setValue(null),e.channelFormGroup.controls.selFeeRate.disable(),e.channelFormGroup.controls.minConfValue.enable(),e.channelFormGroup.controls.minConfValue.setValidators([Re.s.required])):(e.channelFormGroup.controls.selFeeRate.enable(),e.channelFormGroup.controls.minConfValue.disable(),e.channelFormGroup.controls.minConfValue.setValidators(null))})),this.actions$.pipe(Object(h.a)(this.unSubs[1]),Object(d.a)((function(e){return e.type===y.w||e.type===y.i||e.type===y.g}))).subscribe((function(t){t.type===y.w&&(e.logger.info(t.payload),e.flgEditable=!1,e.newlyAddedPeer=t.payload.peer,e.peerFormGroup.controls.hiddenAddress.setValue(e.peerFormGroup.controls.peerAddress.value),e.stepper.next()),t.type===y.i&&e.dialogRef.close(),t.type===y.g&&("SaveNewPeer"===t.payload.action?e.peerConnectionError=t.payload.message:"SaveNewChannel"===t.payload.action&&(e.channelConnectionError=t.payload.message))}))},e.prototype.onConnectPeer=function(){if(!this.peerFormGroup.controls.peerAddress.value)return!0;this.peerConnectionError="",this.store.dispatch(new We.D("Adding Peer...")),this.store.dispatch(new y.Q({nodeId:this.peerFormGroup.controls.peerAddress.value}))},e.prototype.onOpenChannel=function(){if(!this.channelFormGroup.controls.fundingAmount.value||this.totalBalance-this.channelFormGroup.controls.fundingAmount.value<0||this.channelFormGroup.controls.flgMinConf.value&&!this.channelFormGroup.controls.minConfValue.value)return!0;this.channelConnectionError="",this.store.dispatch(new We.D("Opening Channel...")),this.store.dispatch(new y.P({peerId:this.newlyAddedPeer.nodeId,satoshis:this.channelFormGroup.controls.fundingAmount.value,announce:!this.channelFormGroup.controls.isPrivate.value,feeRate:this.channelFormGroup.controls.selFeeRate.value,minconf:this.channelFormGroup.controls.flgMinConf.value?this.channelFormGroup.controls.minConfValue.value:null}))},e.prototype.onClose=function(){this.dialogRef.close(!1)},e.prototype.stepSelectionChanged=function(e){switch(e.selectedIndex){case 0:this.peerFormLabel="Peer Details",this.channelFormLabel="Open Channel (Optional)";break;case 1:this.peerFormLabel=this.peerFormGroup.controls.peerAddress.value?"Peer Added: "+(this.newlyAddedPeer.alias?this.newlyAddedPeer.alias:this.newlyAddedPeer.nodeId):"Peer Details",this.channelFormLabel="Open Channel (Optional)";break;case 2:this.peerFormLabel=this.peerFormGroup.controls.peerAddress.value?"Peer Added: "+(this.newlyAddedPeer.alias?this.newlyAddedPeer.alias:this.newlyAddedPeer.nodeId):"Peer Details",this.channelFormLabel=this.channelFormGroup.controls.fundingAmount.value?"Opening Channel for "+this.channelFormGroup.controls.fundingAmount.value+" Sats":"Open Channel (Optional)";break;default:this.peerFormLabel="Peer Details",this.channelFormLabel="Open Channel (Optional)"}e.selectedIndex<e.previouslySelectedIndex&&(0===e.selectedIndex?this.peerFormGroup.controls.hiddenAddress.setValue(""):1===e.selectedIndex&&this.channelFormGroup.controls.hiddenAmount.setValue(""))},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(Se.f),o.Qb(Se.a),o.Qb(v.h),o.Qb(Ae.a),o.Qb(Re.c),o.Qb(C.a),o.Qb(p.b))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-connect-peer"]],viewQuery:function(e,t){var n;1&e&&(o.Dc(zt,!0),o.Mc(Ut,!0)),2&e&&(o.vc(n=o.fc())&&(t.form=n.first),o.vc(n=o.fc())&&(t.stepper=n.first))},decls:2,vars:0,template:function(e,t){1&e&&(o.Wb(0,"h4"),o.Hc(1,"Connect Peer"),o.Vb())},styles:[""]}),e}(),Qt=n("mNcL");function _t(e,t){1&e&&o.Rb(0,"mat-progress-bar",35)}function Gt(e,t){1&e&&(o.Wb(0,"th",36),o.Hc(1," ID "),o.Vb())}var Jt=function(e){return{"max-width":e}};function $t(e,t){if(1&e&&(o.Wb(0,"td",37),o.Hc(1),o.Vb()),2&e){var n=t.$implicit,a=o.ic();o.pc("ngStyle",o.tc(2,Jt,a.screenSize===a.screenSizeEnum.XS?"10rem":"30rem")),o.Db(1),o.Jc(" ",null==n?null:n.nodeId," ")}}function Kt(e,t){1&e&&(o.Wb(0,"th",38),o.Hc(1," Alias "),o.Vb())}function Xt(e,t){if(1&e&&(o.Wb(0,"td",39),o.Hc(1),o.Vb()),2&e){var n=t.$implicit,a=o.ic();o.pc("ngStyle",o.tc(2,Jt,a.screenSize===a.screenSizeEnum.XS?"10rem":"25rem")),o.Db(1),o.Jc(" ",null==n?null:n.alias," ")}}function Yt(e,t){1&e&&(o.Wb(0,"th",36),o.Hc(1," State "),o.Vb())}function Zt(e,t){if(1&e&&(o.Wb(0,"td",40),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Jc(" ",null==n?null:n.state," ")}}function en(e,t){1&e&&(o.Wb(0,"th",36),o.Hc(1," Network Address "),o.Vb())}function tn(e,t){if(1&e&&(o.Wb(0,"td",40),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Jc(" ",null==n?null:n.address," ")}}function nn(e,t){1&e&&(o.Wb(0,"th",36),o.Hc(1," Channels "),o.Vb())}function an(e,t){if(1&e&&(o.Wb(0,"td",40),o.Hc(1),o.Vb()),2&e){var n=t.$implicit;o.Db(1),o.Jc(" ",null==n?null:n.channels," ")}}function on(e,t){if(1&e){var n=o.Xb();o.Wb(0,"th",41),o.Wb(1,"div",42),o.Wb(2,"mat-select",43),o.Rb(3,"mat-select-trigger"),o.Wb(4,"mat-option",44),o.ec("click",(function(){return o.yc(n),o.ic().onDownloadCSV()})),o.Hc(5,"Download CSV"),o.Vb(),o.Vb(),o.Vb(),o.Vb()}}function cn(e,t){if(1&e){var n=o.Xb();o.Wb(0,"td",45),o.Wb(1,"div",42),o.Wb(2,"mat-select",43),o.Rb(3,"mat-select-trigger"),o.Wb(4,"mat-option",44),o.ec("click",(function(e){o.yc(n);var a=t.$implicit;return o.ic().onPeerClick(a,e)})),o.Hc(5,"View Info"),o.Vb(),o.Wb(6,"mat-option",44),o.ec("click",(function(){o.yc(n);var e=t.$implicit;return o.ic().onOpenChannel(e)})),o.Hc(7,"Open Channel"),o.Vb(),o.Wb(8,"mat-option",44),o.ec("click",(function(){o.yc(n);var e=t.$implicit;return o.ic().onPeerDetach(e)})),o.Hc(9,"Disconnect"),o.Vb(),o.Vb(),o.Vb(),o.Vb()}}function sn(e,t){1&e&&(o.Wb(0,"p"),o.Hc(1,"No connected peers."),o.Vb())}function ln(e,t){if(1&e&&(o.Wb(0,"td",46),o.Fc(1,sn,2,0,"p",47),o.Vb()),2&e){var n=o.ic();o.Db(1),o.pc("ngIf",!n.peers.data||n.peers.data.length<1)}}var rn=function(e){return{"display-none":e}};function bn(e,t){if(1&e&&o.Rb(0,"tr",48),2&e){var n=o.ic();o.pc("ngClass",o.tc(1,rn,n.peers.data&&n.peers.data.length>0))}}function hn(e,t){1&e&&o.Rb(0,"tr",49)}function dn(e,t){if(1&e&&o.Rb(0,"tr",50),2&e){var n=t.$implicit,a=o.ic();o.pc("@newlyAddedRowAnimation",n.pub_key===a.newlyAddedPeer&&a.flgAnimate?"added":"notAdded")}}var un=function(e){return{"overflow-auto error-border":e,"overflow-auto":!0}},fn=function(){return["no_peer"]},pn=function(){function e(e,t,n,a,i,o){this.logger=e,this.store=t,this.rtlEffects=n,this.eclrEffects=a,this.actions$=i,this.commonService=o,this.faUsers=f.L,this.newlyAddedPeer="",this.flgAnimate=!0,this.displayedColumns=[],this.peerAddress="",this.information={},this.availableBalance=0,this.flgLoading=[!0],this.flgSticky=!1,this.pageSize=g.m,this.pageSizeOptions=g.n,this.screenSize="",this.screenSizeEnum=g.o,this.unSubs=[new b.a,new b.a,new b.a,new b.a],this.screenSize=this.commonService.getScreenSize(),this.screenSize===g.o.XS?(this.flgSticky=!1,this.displayedColumns=["alias","actions"]):this.screenSize===g.o.SM?(this.flgSticky=!1,this.displayedColumns=["alias","nodeId","address","actions"]):this.screenSize===g.o.MD?(this.flgSticky=!1,this.displayedColumns=["alias","nodeId","address","channels","actions"]):(this.flgSticky=!0,this.displayedColumns=["alias","nodeId","address","channels","actions"])}return e.prototype.ngOnInit=function(){var e=this;this.store.select("eclr").pipe(Object(h.a)(this.unSubs[0])).subscribe((function(t){t.effectErrors.forEach((function(t){"FetchPeers"===t.action&&(e.flgLoading[0]="error")})),e.information=t.information,e.availableBalance=t.onchainBalance.totalBalance||0,e.peers=new Ue.o(t.peers?Object(Ee.g)(t.peers):[]),e.peers.sort=e.sort,e.peers.paginator=e.paginator,"error"!==e.flgLoading[0]&&(e.flgLoading[0]=!1),setTimeout((function(){e.flgAnimate=!1}),3e3),e.logger.info(t)})),this.actions$.pipe(Object(h.a)(this.unSubs[1]),Object(d.a)((function(e){return e.type===y.N}))).subscribe((function(t){e.peerAddress=void 0,e.flgAnimate=!0}))},e.prototype.onPeerClick=function(e,t){var n=[[{key:"nodeId",value:e.nodeId,title:"Public Key",width:100}],[{key:"address",value:e.address,title:"Address",width:50},{key:"alias",value:e.alias,title:"Alias",width:50}],[{key:"state",value:this.commonService.titleCase(e.state),title:"State",width:50},{key:"channels",value:e.channels,title:"Channels",width:50}]];this.store.dispatch(new We.A({data:{type:g.b.INFORMATION,alertTitle:"Peer Information",showQRName:"Public Key",showQRField:e.nodeId,message:n}}))},e.prototype.onConnectPeer=function(){this.store.dispatch(new We.A({data:{message:{peer:null,information:this.information,balance:this.availableBalance},component:Nt}}))},e.prototype.onOpenChannel=function(e){this.store.dispatch(new We.A({data:{alertTitle:"Open Channel",message:{peer:e,information:this.information,balance:this.availableBalance},newlyAdded:!1,component:je}}))},e.prototype.onPeerDetach=function(e){var t=this;this.store.dispatch(new We.B({data:{type:g.b.CONFIRM,alertTitle:"Disconnect Peer",titleMessage:"Disconnect peer: "+(e.alias?e.alias:e.nodeId),noBtnText:"Cancel",yesBtnText:"Disconnect"}})),this.rtlEffects.closeConfirm.pipe(Object(h.a)(this.unSubs[3])).subscribe((function(n){n&&(t.store.dispatch(new We.D("Disconnecting Peer...")),t.store.dispatch(new y.f({nodeId:e.nodeId})))}))},e.prototype.applyFilter=function(e){this.peers.filter=e},e.prototype.onDownloadCSV=function(){this.peers.data&&this.peers.data.length>0&&this.commonService.downloadCSV(this.peers.data,"Peers")},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(p.b),o.Qb(v.h),o.Qb(it.a),o.Qb(Ae.a),o.Qb(C.a),o.Qb(m.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-peers"]],viewQuery:function(e,t){var n;1&e&&(o.Dc(ze.a,!0),o.Dc(qe.a,!0)),2&e&&(o.vc(n=o.fc())&&(t.sort=n.first),o.vc(n=o.fc())&&(t.paginator=n.first))},features:[o.Cb([{provide:qe.b,useValue:Object(g.v)("Peers")}])],decls:42,vars:14,consts:[["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxLayout.gt-sm","row wrap"],["peersForm","ngForm"],["mat-flat-button","","color","primary","type","submit","tabindex","1",3,"click"],["fxLayout","column"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutAlign","start stretch",1,"padding-gap-x","page-sub-title-container","mt-2"],["fxFlex","70"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxFlex","30"],["fxLayout","row","fxLayoutAlign","start start"],["matInput","","placeholder","Filter",3,"keyup"],["perfectScrollbar","","fxLayout","row","fxLayoutAlign","start center","fxFlex","100",1,"table-container"],["mode","indeterminate",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","ngClass"],["table",""],["matColumnDef","nodeId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","alias"],["mat-header-cell","","mat-sort-header","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","class","px-3",3,"ngStyle",4,"matCellDef"],["matColumnDef","state"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","channels"],["matColumnDef","actions"],["mat-header-cell","","class","px-3",4,"matHeaderCellDef"],["mat-cell","","fxLayoutAlign","end center","class","px-3",4,"matCellDef"],["matColumnDef","no_peer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-footer-row","",3,"ngClass",4,"matFooterRowDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mb-4",3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"ngStyle"],["mat-header-cell","","mat-sort-header","",1,"px-3"],["mat-cell","",1,"px-3",3,"ngStyle"],["mat-cell",""],["mat-header-cell","",1,"px-3"],[1,"bordered-box","table-actions-select"],["placeholder","Actions","tabindex","1",1,"mr-0"],[3,"click"],["mat-cell","","fxLayoutAlign","end center",1,"px-3"],["mat-footer-cell","","colspan","4"],[4,"ngIf"],["mat-footer-row","",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"form",1,2),o.Wb(3,"button",3),o.ec("click",(function(){return t.onConnectPeer()})),o.Hc(4,"Add Peer"),o.Vb(),o.Vb(),o.Wb(5,"div",4),o.Wb(6,"div",5),o.Wb(7,"div",6),o.Rb(8,"fa-icon",7),o.Wb(9,"span",8),o.Hc(10,"Connected Peers"),o.Vb(),o.Vb(),o.Wb(11,"mat-form-field",9),o.Wb(12,"div",10),o.Wb(13,"input",11),o.ec("keyup",(function(e){return t.applyFilter(e.target.value)})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(14,"div",12),o.Fc(15,_t,1,0,"mat-progress-bar",13),o.Wb(16,"table",14,15),o.Ub(18,16),o.Fc(19,Gt,2,0,"th",17),o.Fc(20,$t,2,4,"td",18),o.Tb(),o.Ub(21,19),o.Fc(22,Kt,2,0,"th",20),o.Fc(23,Xt,2,4,"td",21),o.Tb(),o.Ub(24,22),o.Fc(25,Yt,2,0,"th",17),o.Fc(26,Zt,2,1,"td",23),o.Tb(),o.Ub(27,24),o.Fc(28,en,2,0,"th",17),o.Fc(29,tn,2,1,"td",23),o.Tb(),o.Ub(30,25),o.Fc(31,nn,2,0,"th",17),o.Fc(32,an,2,1,"td",23),o.Tb(),o.Ub(33,26),o.Fc(34,on,6,0,"th",27),o.Fc(35,cn,10,0,"td",28),o.Tb(),o.Ub(36,29),o.Fc(37,ln,2,1,"td",30),o.Tb(),o.Fc(38,bn,1,3,"tr",31),o.Fc(39,hn,1,0,"tr",32),o.Fc(40,dn,1,1,"tr",33),o.Vb(),o.Vb(),o.Rb(41,"mat-paginator",34),o.Vb(),o.Vb()),2&e&&(o.Db(8),o.pc("icon",t.faUsers),o.Db(7),o.pc("ngIf",!0===t.flgLoading[0]),o.Db(1),o.pc("dataSource",t.peers)("ngClass",o.tc(11,un,"error"===t.flgLoading[0])),o.Db(22),o.pc("matFooterRowDef",o.sc(13,fn)),o.Db(1),o.pc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",t.flgSticky),o.Db(1),o.pc("matRowDefColumns",t.displayedColumns),o.Db(1),o.pc("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",t.screenSize!==t.screenSizeEnum.XS))},directives:[w.c,w.a,w.b,Re.t,Re.m,Re.n,S.a,V.a,R.c,ct.b,M.b,a.n,Ue.n,ze.a,a.l,L.a,Ue.c,Ue.i,Ue.b,Ue.e,Ue.g,Ue.k,Ue.m,qe.a,c.a,Ue.h,ze.b,Ue.a,a.o,L.b,st.a,st.c,lt.n,Ue.d,Ue.f,Ue.j,Ue.l],styles:[".mat-column-alias[_ngcontent-%COMP%], .mat-column-nodeId[_ngcontent-%COMP%]{flex:1 1 10%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-nodeId[_ngcontent-%COMP%]{padding-right:2rem}.mat-column-address[_ngcontent-%COMP%]{flex:1 1 15%;width:15%}.mat-column-actions[_ngcontent-%COMP%]{min-height:4.8rem}"],data:{animation:[Qt.a]}}),e}();function mn(e,t){if(1&e&&(o.Wb(0,"span",12),o.Hc(1,"Channels"),o.Vb()),2&e){var n=o.ic();o.qc("matBadge",n.activeChannels)}}function gn(e,t){if(1&e&&(o.Wb(0,"span",12),o.Hc(1,"Peers"),o.Vb()),2&e){var n=o.ic();o.qc("matBadge",n.activePeers)}}var yn=function(){function e(e,t){this.store=e,this.actions$=t,this.selNode={},this.information={},this.peers=[],this.totalBalance=0,this.activePeers=0,this.activeChannels=0,this.faUsers=f.L,this.faChartPie=f.f,this.balances=[{title:"Total Balance",dataValue:0},{title:"Confirmed",dataValue:0},{title:"Unconfirmed",dataValue:0}],this.unSubs=[new b.a,new b.a,new b.a,new b.a]}return e.prototype.ngOnInit=function(){var e=this;this.store.select("eclr").pipe(Object(h.a)(this.unSubs[1])).subscribe((function(t){e.selNode=t.nodeSettings,e.information=t.information,e.peers=t.peers,e.activePeers=t.peers&&t.peers.length?t.peers.length:0,e.activeChannels=t.channelsStatus&&t.channelsStatus.active&&t.channelsStatus.active.channels?t.channelsStatus.active.channels:0,e.totalBalance=t.onchainBalance.totalBalance,e.balances=[{title:"Total Balance",dataValue:t.onchainBalance.totalBalance||0},{title:"Confirmed",dataValue:t.onchainBalance.confBalance},{title:"Unconfirmed",dataValue:t.onchainBalance.unconfBalance}]}))},e.prototype.onOpenChannel=function(){this.store.dispatch(new We.A({data:{alertTitle:"Open Channel",message:{peers:this.peers,information:this.information,balance:this.totalBalance},component:je}}))},e.prototype.ngOnDestroy=function(){this.unSubs.forEach((function(e){e.next(),e.complete()}))},e.\u0275fac=function(t){return new(t||e)(o.Qb(v.h),o.Qb(C.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["rtl-eclr-peers-channels"]],decls:26,vars:3,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"padding-gap-x","page-title-container"],[1,"page-title-img","mr-1",3,"icon"],[1,"page-title"],["fxLayout","column",1,"padding-gap-x","mb-4"],["fxLayout","column"],[3,"values"],["fxLayout","column",1,"padding-gap-x"],["mat-tab-label",""],["fxLayout","column","fxFlex","100","fxLayoutAlign","space-between stretch",1,"padding-gap"],["fxLayout","row"],["mat-flat-button","","color","primary","type","submit","tabindex","1",3,"click"],["fxLayout","row","fxFlex","100"],["matBadgeOverlap","false",1,"tab-badge",3,"matBadge"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Rb(1,"fa-icon",1),o.Wb(2,"span",2),o.Hc(3,"On-chain Balance"),o.Vb(),o.Vb(),o.Wb(4,"div",3),o.Wb(5,"mat-card"),o.Wb(6,"mat-card-content",4),o.Rb(7,"rtl-currency-unit-converter",5),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",0),o.Rb(9,"fa-icon",1),o.Wb(10,"span",2),o.Hc(11,"Connections"),o.Vb(),o.Vb(),o.Wb(12,"div",6),o.Wb(13,"mat-card"),o.Wb(14,"mat-card-content",4),o.Wb(15,"mat-tab-group"),o.Wb(16,"mat-tab"),o.Fc(17,mn,2,1,"ng-template",7),o.Wb(18,"div",8),o.Wb(19,"div",9),o.Wb(20,"button",10),o.ec("click",(function(){return t.onOpenChannel()})),o.Hc(21,"Open Channel"),o.Vb(),o.Vb(),o.Rb(22,"rtl-eclr-channels-table",11),o.Vb(),o.Vb(),o.Wb(23,"mat-tab"),o.Fc(24,gn,2,1,"ng-template",7),o.Rb(25,"rtl-eclr-peers"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Db(1),o.pc("icon",t.faChartPie),o.Db(6),o.pc("values",t.balances),o.Db(2),o.pc("icon",t.faUsers))},directives:[w.c,w.b,V.a,F.a,F.b,Ie.a,ee.c,ee.a,ee.d,w.a,S.a,qt,pn,ot.a],styles:[""]}),e}(),vn=n("2h+y"),Cn=n("0dfH"),wn=i.j.forChild([{path:"",component:r,children:[{path:"home",component:Fe,canActivate:[vn.c]},{path:"onchain",component:ke,canActivate:[vn.c]},{path:"peerschannels",component:yn,canActivate:[vn.c]},{path:"**",component:Cn.a}]}]),Vn=n("PCNd"),xn=function(){function e(){}return e.\u0275mod=o.Ob({type:e,bootstrap:[r]}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)},providers:[vn.c],imports:[[a.c,Vn.a,wn]]}),e}()}}]);